{"version":3,"file":"angular-auth-oidc-client.mjs","sources":["../../../projects/angular-auth-oidc-client/src/lib/api/http-base.service.ts","../../../projects/angular-auth-oidc-client/src/lib/config/provider/config.provider.ts","../../../projects/angular-auth-oidc-client/src/lib/api/data.service.ts","../../../projects/angular-auth-oidc-client/src/lib/public-events/event-types.ts","../../../projects/angular-auth-oidc-client/src/lib/logging/log-level.ts","../../../projects/angular-auth-oidc-client/src/lib/logging/logger.service.ts","../../../projects/angular-auth-oidc-client/src/lib/storage/browser-storage.service.ts","../../../projects/angular-auth-oidc-client/src/lib/storage/storage-persistence.service.ts","../../../projects/angular-auth-oidc-client/src/lib/public-events/public-events.service.ts","../../../projects/angular-auth-oidc-client/src/lib/utils/tokenHelper/token-helper.service.ts","../../../projects/angular-auth-oidc-client/src/lib/validation/jsrsasign-reduced.service.ts","../../../projects/angular-auth-oidc-client/src/lib/validation/token-validation.service.ts","../../../projects/angular-auth-oidc-client/src/lib/auth-state/auth-state.service.ts","../../../projects/angular-auth-oidc-client/src/lib/auto-login/auto-login.service.ts","../../../projects/angular-auth-oidc-client/src/lib/utils/url/uri-encoder.ts","../../../projects/angular-auth-oidc-client/src/lib/flows/random/random.service.ts","../../../projects/angular-auth-oidc-client/src/lib/flows/flows-data.service.ts","../../../projects/angular-auth-oidc-client/src/lib/utils/flowHelper/flow-helper.service.ts","../../../projects/angular-auth-oidc-client/src/lib/utils/url/url.service.ts","../../../projects/angular-auth-oidc-client/src/lib/flows/callback-handling/code-flow-callback-handler.service.ts","../../../projects/angular-auth-oidc-client/src/lib/user-data/user.service.ts","../../../projects/angular-auth-oidc-client/src/lib/flows/reset-auth-data.service.ts","../../../projects/angular-auth-oidc-client/src/lib/flows/callback-handling/implicit-flow-callback-handler.service.ts","../../../projects/angular-auth-oidc-client/src/lib/validation/validation-result.ts","../../../projects/angular-auth-oidc-client/src/lib/flows/signin-key-data.service.ts","../../../projects/angular-auth-oidc-client/src/lib/flows/callback-handling/history-jwt-keys-callback-handler.service.ts","../../../projects/angular-auth-oidc-client/src/lib/flows/callback-handling/user-callback-handler.service.ts","../../../projects/angular-auth-oidc-client/src/lib/validation/state-validation-result.ts","../../../projects/angular-auth-oidc-client/src/lib/utils/equality/equality.service.ts","../../../projects/angular-auth-oidc-client/src/lib/validation/state-validation.service.ts","../../../projects/angular-auth-oidc-client/src/lib/flows/callback-handling/state-validation-callback-handler.service.ts","../../../projects/angular-auth-oidc-client/src/lib/flows/callback-handling/refresh-session-callback-handler.service.ts","../../../projects/angular-auth-oidc-client/src/lib/flows/callback-handling/refresh-token-callback-handler.service.ts","../../../projects/angular-auth-oidc-client/src/lib/flows/flows.service.ts","../../../projects/angular-auth-oidc-client/src/lib/callback/interval.service.ts","../../../projects/angular-auth-oidc-client/src/lib/callback/implicit-flow-callback.service.ts","../../../projects/angular-auth-oidc-client/src/lib/iframe/existing-iframe.service.ts","../../../projects/angular-auth-oidc-client/src/lib/iframe/check-session.service.ts","../../../projects/angular-auth-oidc-client/src/lib/utils/url/current-url.service.ts","../../../projects/angular-auth-oidc-client/src/lib/iframe/silent-renew.service.ts","../../../projects/angular-auth-oidc-client/src/lib/callback/code-flow-callback.service.ts","../../../projects/angular-auth-oidc-client/src/lib/callback/callback.service.ts","../../../projects/angular-auth-oidc-client/src/lib/config/auth-well-known/auth-well-known-data.service.ts","../../../projects/angular-auth-oidc-client/src/lib/config/auth-well-known/auth-well-known.service.ts","../../../projects/angular-auth-oidc-client/src/lib/iframe/refresh-session-iframe.service.ts","../../../projects/angular-auth-oidc-client/src/lib/callback/refresh-session-refresh-token.service.ts","../../../projects/angular-auth-oidc-client/src/lib/callback/refresh-session.service.ts","../../../projects/angular-auth-oidc-client/src/lib/callback/periodically-token-check.service.ts","../../../projects/angular-auth-oidc-client/src/lib/login/popup/popup.service.ts","../../../projects/angular-auth-oidc-client/src/lib/check-auth.service.ts","../../../projects/angular-auth-oidc-client/src/lib/config/default-config.ts","../../../projects/angular-auth-oidc-client/src/lib/config/validation/rule.ts","../../../projects/angular-auth-oidc-client/src/lib/config/validation/rules/ensure-authority.rule.ts","../../../projects/angular-auth-oidc-client/src/lib/config/validation/rules/ensure-clientId.rule.ts","../../../projects/angular-auth-oidc-client/src/lib/config/validation/rules/ensure-no-duplicated-configs.rule.ts","../../../projects/angular-auth-oidc-client/src/lib/config/validation/rules/ensure-redirect-url.rule.ts","../../../projects/angular-auth-oidc-client/src/lib/config/validation/rules/ensure-silentRenewUrl-with-no-refreshtokens.rule.ts","../../../projects/angular-auth-oidc-client/src/lib/config/validation/rules/use-offline-scope-with-silent-renew.rule.ts","../../../projects/angular-auth-oidc-client/src/lib/config/validation/rules/index.ts","../../../projects/angular-auth-oidc-client/src/lib/config/validation/config-validation.service.ts","../../../projects/angular-auth-oidc-client/src/lib/utils/platform-provider/platform.provider.ts","../../../projects/angular-auth-oidc-client/src/lib/storage/default-sessionstorage.service.ts","../../../projects/angular-auth-oidc-client/src/lib/config/config.service.ts","../../../projects/angular-auth-oidc-client/src/lib/config/loader/config-loader.ts","../../../projects/angular-auth-oidc-client/src/lib/interceptor/closest-matching-route.service.ts","../../../projects/angular-auth-oidc-client/src/lib/login/response-type-validation/response-type-validation.service.ts","../../../projects/angular-auth-oidc-client/src/lib/utils/redirect/redirect.service.ts","../../../projects/angular-auth-oidc-client/src/lib/login/par/par.service.ts","../../../projects/angular-auth-oidc-client/src/lib/login/par/par-login.service.ts","../../../projects/angular-auth-oidc-client/src/lib/login/popup/popup-login.service.ts","../../../projects/angular-auth-oidc-client/src/lib/login/standard/standard-login.service.ts","../../../projects/angular-auth-oidc-client/src/lib/login/login.service.ts","../../../projects/angular-auth-oidc-client/src/lib/logoff-revoke/logoff-revocation.service.ts","../../../projects/angular-auth-oidc-client/src/lib/oidc.security.service.ts","../../../projects/angular-auth-oidc-client/src/lib/auth.module.ts","../../../projects/angular-auth-oidc-client/src/lib/auto-login/auto-login-all-routes.guard.ts","../../../projects/angular-auth-oidc-client/src/lib/auto-login/auto-login-partial-routes.guard.ts","../../../projects/angular-auth-oidc-client/src/lib/interceptor/auth.interceptor.ts","../../../projects/angular-auth-oidc-client/src/lib/storage/abstract-security-storage.ts","../../../projects/angular-auth-oidc-client/src/lib/angular-auth-oidc-client.ts","../../../projects/angular-auth-oidc-client/src/public-api.ts","../../../projects/angular-auth-oidc-client/src/angular-auth-oidc-client.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class HttpBaseService {\n  constructor(private http: HttpClient) {}\n\n  get<T>(url: string, params?: { [key: string]: any }): Observable<T> {\n    return this.http.get<T>(url, params);\n  }\n\n  post<T>(url: string, body: any, params?: { [key: string]: any }): Observable<T> {\n    return this.http.post<T>(url, body, params);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { OpenIdConfiguration } from '../openid-configuration';\n\n@Injectable()\nexport class ConfigurationProvider {\n  private configsInternal: Record<string, OpenIdConfiguration> = {};\n\n  hasAtLeastOneConfig(): boolean {\n    return Object.keys(this.configsInternal).length > 0;\n  }\n\n  hasManyConfigs(): boolean {\n    return Object.keys(this.configsInternal).length > 1;\n  }\n\n  setConfig(readyConfig: OpenIdConfiguration): void {\n    const { configId } = readyConfig;\n    this.configsInternal[configId] = readyConfig;\n  }\n\n  getOpenIDConfiguration(configId?: string): OpenIdConfiguration {\n    if (!!configId) {\n      return this.configsInternal[configId] || null;\n    }\n\n    const [, value] = Object.entries(this.configsInternal)[0] || [[null, null]];\n\n    return value || null;\n  }\n\n  getAllConfigurations(): OpenIdConfiguration[] {\n    return Object.values(this.configsInternal);\n  }\n}\n","import { HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { HttpBaseService } from './http-base.service';\n\nconst NGSW_CUSTOM_PARAM = 'ngsw-bypass';\n\n@Injectable()\nexport class DataService {\n  constructor(private httpClient: HttpBaseService, private readonly configurationProvider: ConfigurationProvider) {}\n\n  get<T>(url: string, configId: string, token?: string): Observable<T> {\n    const headers = this.prepareHeaders(token);\n    const params = this.prepareParams(configId);\n\n    return this.httpClient.get<T>(url, {\n      headers,\n      params,\n    });\n  }\n\n  post<T>(url: string, body: any, configId: string, headersParams?: HttpHeaders): Observable<T> {\n    const headers = headersParams || this.prepareHeaders();\n    const params = this.prepareParams(configId);\n\n    return this.httpClient.post<T>(url, body, { headers, params });\n  }\n\n  private prepareHeaders(token?: string): HttpHeaders {\n    let headers = new HttpHeaders();\n    headers = headers.set('Accept', 'application/json');\n\n    if (!!token) {\n      headers = headers.set('Authorization', 'Bearer ' + decodeURIComponent(token));\n    }\n\n    return headers;\n  }\n\n  private prepareParams(configId: string): HttpParams {\n    let params = new HttpParams();\n    const { ngswBypass } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (ngswBypass) {\n      params = params.set(NGSW_CUSTOM_PARAM, '');\n    }\n\n    return params;\n  }\n}\n","// eslint-disable-next-line no-shadow\nexport enum EventTypes {\n  /**\n   *  This only works in the AppModule Constructor\n   */\n  ConfigLoaded,\n  ConfigLoadingFailed,\n  CheckSessionReceived,\n  UserDataChanged,\n  NewAuthenticationResult,\n  TokenExpired,\n  IdTokenExpired,\n  SilentRenewStarted,\n}\n","// eslint-disable-next-line no-shadow\nexport enum LogLevel {\n  None,\n  Debug,\n  Warn,\n  Error,\n}\n","import { Injectable } from '@angular/core';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { LogLevel } from './log-level';\n\n@Injectable()\nexport class LoggerService {\n  constructor(private configurationProvider: ConfigurationProvider) {}\n\n  logError(configId: string, message: any, ...args: any[]): void {\n    if (!!configId) {\n      this.logErrorWithConfig(configId, message, ...args);\n    } else {\n      this.logErrorWithoutConfig(message, ...args);\n    }\n  }\n\n  logWarning(configId: string, message: any, ...args: any[]): void {\n    if (!!configId) {\n      this.logWarningWithConfig(configId, message, ...args);\n    } else {\n      this.logWarningWithoutConfig(message, ...args);\n    }\n  }\n\n  logDebug(configId: string, message: any, ...args: any[]): void {\n    if (!this.logLevelIsSet(configId)) {\n      return;\n    }\n\n    if (this.loggingIsTurnedOff(configId)) {\n      return;\n    }\n\n    if (!this.currentLogLevelIsEqualOrSmallerThan(configId, LogLevel.Debug)) {\n      return;\n    }\n\n    if (!!args && !!args.length) {\n      console.log(`[DEBUG] ${configId} - ${message}`, ...args);\n    } else {\n      console.log(`[DEBUG] ${configId} - ${message}`);\n    }\n  }\n\n  private logWarningWithoutConfig(message: any, ...args: any[]): void {\n    if (!!args && !!args.length) {\n      console.warn(`[WARN] - ${message}`, ...args);\n    } else {\n      console.warn(`[WARN] - ${message}`);\n    }\n  }\n\n  private logWarningWithConfig(configId: string, message: any, ...args: any[]): void {\n    if (!this.logLevelIsSet(configId)) {\n      return;\n    }\n\n    if (this.loggingIsTurnedOff(configId)) {\n      return;\n    }\n\n    if (!this.currentLogLevelIsEqualOrSmallerThan(configId, LogLevel.Warn)) {\n      return;\n    }\n\n    if (!!args && !!args.length) {\n      console.warn(`[WARN] ${configId} - ${message}`, ...args);\n    } else {\n      console.warn(`[WARN] ${configId} - ${message}`);\n    }\n  }\n\n  private logErrorWithConfig(configId: string, message: any, ...args: any[]): void {\n    if (this.loggingIsTurnedOff(configId)) {\n      return;\n    }\n\n    if (!!args && !!args.length) {\n      console.error(`[ERROR] ${configId} - ${message}`, ...args);\n    } else {\n      console.error(`[ERROR] ${configId} - ${message}`);\n    }\n  }\n\n  private logErrorWithoutConfig(message: any, ...args: any[]): void {\n    if (!!args && !!args.length) {\n      console.error(`[ERROR] - ${message}`, ...args);\n    } else {\n      console.error(`[ERROR] - ${message}`);\n    }\n  }\n\n  private currentLogLevelIsEqualOrSmallerThan(configId: string, logLevelToCompare: LogLevel): boolean {\n    const { logLevel } = this.configurationProvider.getOpenIDConfiguration(configId) || {};\n\n    return logLevel <= logLevelToCompare;\n  }\n\n  private logLevelIsSet(configId: string): boolean {\n    const { logLevel } = this.configurationProvider.getOpenIDConfiguration(configId) || {};\n\n    if (logLevel === null) {\n      return false;\n    }\n\n    if (logLevel === undefined) {\n      return false;\n    }\n\n    return true;\n  }\n\n  private loggingIsTurnedOff(configId: string): boolean {\n    const { logLevel } = this.configurationProvider.getOpenIDConfiguration(configId) || {};\n\n    return logLevel === LogLevel.None;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { LoggerService } from '../logging/logger.service';\nimport { AbstractSecurityStorage } from './abstract-security-storage';\n\n@Injectable()\nexport class BrowserStorageService {\n  constructor(private configProvider: ConfigurationProvider, private loggerService: LoggerService) {}\n\n  read(key: string, configId: string): any {\n    if (!this.hasStorage()) {\n      this.loggerService.logDebug(configId, `Wanted to read '${key}' but Storage was undefined`);\n\n      return null;\n    }\n\n    const storage = this.getStorage(configId);\n\n    if (!storage) {\n      this.loggerService.logDebug(configId, `Wanted to read config for '${configId}' but Storage was falsy`);\n\n      return null;\n    }\n\n    const storedConfig = storage.read(configId);\n\n    if (!storedConfig) {\n      return null;\n    }\n\n    return JSON.parse(storedConfig);\n  }\n\n  write(value: any, configId: string): boolean {\n    if (!this.hasStorage()) {\n      this.loggerService.logDebug(configId, `Wanted to write '${value}' but Storage was falsy`);\n\n      return false;\n    }\n\n    const storage = this.getStorage(configId);\n    if (!storage) {\n      this.loggerService.logDebug(configId, `Wanted to write '${value}' but Storage was falsy`);\n\n      return false;\n    }\n\n    value = value || null;\n\n    storage.write(configId, JSON.stringify(value));\n\n    return true;\n  }\n\n  remove(key: string, configId: string): boolean {\n    if (!this.hasStorage()) {\n      this.loggerService.logDebug(configId, `Wanted to remove '${key}' but Storage was falsy`);\n\n      return false;\n    }\n\n    const storage = this.getStorage(configId);\n    if (!storage) {\n      this.loggerService.logDebug(configId, `Wanted to write '${key}' but Storage was falsy`);\n\n      return false;\n    }\n\n    storage.remove(key);\n\n    return true;\n  }\n\n  // TODO THIS STORAGE WANTS AN ID BUT CLEARS EVERYTHING\n  clear(configId: string): boolean {\n    if (!this.hasStorage()) {\n      this.loggerService.logDebug(configId, `Wanted to clear storage but Storage was falsy`);\n\n      return false;\n    }\n\n    const storage = this.getStorage(configId);\n    if (!storage) {\n      this.loggerService.logDebug(configId, `Wanted to clear storage but Storage was falsy`);\n\n      return false;\n    }\n\n    storage.clear();\n\n    return true;\n  }\n\n  private getStorage(configId: string): AbstractSecurityStorage {\n    const { storage } = this.configProvider.getOpenIDConfiguration(configId) || {};\n\n    return storage;\n  }\n\n  private hasStorage(): boolean {\n    return typeof Storage !== 'undefined';\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BrowserStorageService } from './browser-storage.service';\n\nexport type StorageKeys =\n  | 'authnResult'\n  | 'authzData'\n  | 'access_token_expires_at'\n  | 'authWellKnownEndPoints'\n  | 'userData'\n  | 'authNonce'\n  | 'codeVerifier'\n  | 'authStateControl'\n  | 'session_state'\n  | 'storageSilentRenewRunning'\n  | 'storageCustomParamsAuthRequest'\n  | 'storageCustomParamsRefresh'\n  | 'storageCustomParamsEndSession'\n  | 'redirect'\n  | 'configIds'\n  | 'jwtKeys';\n\n@Injectable()\nexport class StoragePersistenceService {\n  constructor(private readonly browserStorageService: BrowserStorageService) {}\n\n  read(key: StorageKeys, configId: string): any {\n    const storedConfig = this.browserStorageService.read(key, configId) || {};\n\n    return storedConfig[key];\n  }\n\n  write(key: StorageKeys, value: any, configId: string): void {\n    const storedConfig = this.browserStorageService.read(key, configId) || {};\n\n    storedConfig[key] = value;\n    this.browserStorageService.write(storedConfig, configId);\n  }\n\n  remove(key: StorageKeys, configId: string): void {\n    const storedConfig = this.browserStorageService.read(key, configId) || {};\n\n    delete storedConfig[key];\n\n    this.browserStorageService.write(storedConfig, configId);\n  }\n\n  clear(configId: string): void {\n    this.browserStorageService.clear(configId);\n  }\n\n  resetStorageFlowData(configId: string): void {\n    this.remove('session_state', configId);\n    this.remove('storageSilentRenewRunning', configId);\n    this.remove('codeVerifier', configId);\n    this.remove('userData', configId);\n    this.remove('storageCustomParamsAuthRequest', configId);\n    this.remove('access_token_expires_at', configId);\n    this.remove('storageCustomParamsRefresh', configId);\n    this.remove('storageCustomParamsEndSession', configId);\n  }\n\n  resetAuthStateInStorage(configId: string): void {\n    this.remove('authzData', configId);\n    this.remove('authnResult', configId);\n  }\n\n  getAccessToken(configId: string): string {\n    return this.read('authzData', configId);\n  }\n\n  getIdToken(configId: string): string {\n    return this.read('authnResult', configId)?.id_token;\n  }\n\n  getRefreshToken(configId: string): string {\n    return this.read('authnResult', configId)?.refresh_token;\n  }\n\n  getAuthenticationResult(configId: string): any {\n    return this.read('authnResult', configId);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { EventTypes } from './event-types';\nimport { OidcClientNotification } from './notification';\n\n@Injectable()\nexport class PublicEventsService {\n  private notify = new ReplaySubject<OidcClientNotification<any>>(1);\n\n  /**\n   * Fires a new event.\n   *\n   * @param type The event type.\n   * @param value The event value.\n   */\n  fireEvent<T>(type: EventTypes, value?: T): void {\n    this.notify.next({ type, value });\n  }\n\n  /**\n   * Wires up the event notification observable.\n   */\n  registerForEvents(): Observable<OidcClientNotification<any>> {\n    return this.notify.asObservable();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { LoggerService } from '../../logging/logger.service';\n\nconst PARTS_OF_TOKEN = 3;\n@Injectable()\nexport class TokenHelperService {\n  constructor(private readonly loggerService: LoggerService) {}\n\n  getTokenExpirationDate(dataIdToken: any): Date {\n    if (!dataIdToken.hasOwnProperty('exp')) {\n      return new Date(new Date().toUTCString());\n    }\n\n    const date = new Date(0); // The 0 here is the key, which sets the date to the epoch\n    date.setUTCSeconds(dataIdToken.exp);\n\n    return date;\n  }\n\n  getHeaderFromToken(token: any, encoded: boolean, configId: string): any {\n    if (!this.tokenIsValid(token, configId)) {\n      return {};\n    }\n\n    return this.getPartOfToken(token, 0, encoded);\n  }\n\n  getPayloadFromToken(token: any, encoded: boolean, configId: string): any {\n    if (!this.tokenIsValid(token, configId)) {\n      return {};\n    }\n\n    return this.getPartOfToken(token, 1, encoded);\n  }\n\n  getSignatureFromToken(token: any, encoded: boolean, configId: string): any {\n    if (!this.tokenIsValid(token, configId)) {\n      return {};\n    }\n\n    return this.getPartOfToken(token, 2, encoded);\n  }\n\n  private getPartOfToken(token: string, index: number, encoded: boolean): any {\n    const partOfToken = this.extractPartOfToken(token, index);\n\n    if (encoded) {\n      return partOfToken;\n    }\n\n    const result = this.urlBase64Decode(partOfToken);\n\n    return JSON.parse(result);\n  }\n\n  private urlBase64Decode(str: string): string {\n    let output = str.replace(/-/g, '+').replace(/_/g, '/');\n\n    switch (output.length % 4) {\n      case 0:\n        break;\n      case 2:\n        output += '==';\n        break;\n      case 3:\n        output += '=';\n        break;\n      default:\n        throw Error('Illegal base64url string!');\n    }\n\n    const decoded = typeof window !== 'undefined' ? window.atob(output) : Buffer.from(output, 'base64').toString('binary');\n\n    try {\n      // Going backwards: from byte stream, to percent-encoding, to original string.\n      return decodeURIComponent(\n        decoded\n          .split('')\n          .map((c: string) => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))\n          .join('')\n      );\n    } catch (err) {\n      return decoded;\n    }\n  }\n\n  private tokenIsValid(token: string, configId: string): boolean {\n    if (!token) {\n      this.loggerService.logError(configId, `token '${token}' is not valid --> token falsy`);\n\n      return false;\n    }\n\n    if (!(token as string).includes('.')) {\n      this.loggerService.logError(configId, `token '${token}' is not valid --> no dots included`);\n\n      return false;\n    }\n\n    const parts = token.split('.');\n\n    if (parts.length !== PARTS_OF_TOKEN) {\n      this.loggerService.logError(configId, `token '${token}' is not valid --> token has to have exactly ${PARTS_OF_TOKEN - 1} dots`);\n\n      return false;\n    }\n\n    return true;\n  }\n\n  private extractPartOfToken(token: string, index: number): string {\n    return token.split('.')[index];\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { hextob64u, KJUR } from 'jsrsasign-reduced';\n\n@Injectable()\nexport class JsrsAsignReducedService {\n  generateCodeChallenge(codeVerifier: any): string {\n    const hash = KJUR.crypto.Util.hashString(codeVerifier, 'sha256');\n    const testData = hextob64u(hash);\n\n    return testData;\n  }\n\n  generateAtHash(accessToken: any, sha: string): string {\n    const hash = KJUR.crypto.Util.hashString(accessToken, sha);\n    const first128bits = hash.substr(0, hash.length / 2);\n    const testData = hextob64u(first128bits);\n\n    return testData;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { KEYUTIL, KJUR } from 'jsrsasign-reduced';\nimport { LoggerService } from '../logging/logger.service';\nimport { TokenHelperService } from '../utils/tokenHelper/token-helper.service';\nimport { JsrsAsignReducedService } from './jsrsasign-reduced.service';\n\n// http://openid.net/specs/openid-connect-implicit-1_0.html\n\n// id_token\n// id_token C1: The Issuer Identifier for the OpenID Provider (which is typically obtained during Discovery)\n// MUST exactly match the value of the iss (issuer) Claim.\n//\n// id_token C2: The Client MUST validate that the aud (audience) Claim contains its client_id value registered at the Issuer identified\n// by the iss (issuer) Claim as an audience.The ID Token MUST be rejected if the ID Token does not list the Client as a valid audience,\n// or if it contains additional audiences not trusted by the Client.\n//\n// id_token C3: If the ID Token contains multiple audiences, the Client SHOULD verify that an azp Claim is present.\n//\n// id_token C4: If an azp (authorized party) Claim is present, the Client SHOULD verify that its client_id is the Claim Value.\n//\n// id_token C5: The Client MUST validate the signature of the ID Token according to JWS [JWS] using the algorithm specified in the\n// alg Header Parameter of the JOSE Header.The Client MUST use the keys provided by the Issuer.\n//\n// id_token C6: The alg value SHOULD be RS256. Validation of tokens using other signing algorithms is described in the OpenID Connect\n// Core 1.0\n// [OpenID.Core] specification.\n//\n// id_token C7: The current time MUST be before the time represented by the exp Claim (possibly allowing for some small leeway to account\n// for clock skew).\n//\n// id_token C8: The iat Claim can be used to reject tokens that were issued too far away from the current time,\n// limiting the amount of time that nonces need to be stored to prevent attacks.The acceptable range is Client specific.\n//\n// id_token C9: The value of the nonce Claim MUST be checked to verify that it is the same value as the one that was sent\n// in the Authentication Request.The Client SHOULD check the nonce value for replay attacks.The precise method for detecting replay attacks\n// is Client specific.\n//\n// id_token C10: If the acr Claim was requested, the Client SHOULD check that the asserted Claim Value is appropriate.\n// The meaning and processing of acr Claim Values is out of scope for this document.\n//\n// id_token C11: When a max_age request is made, the Client SHOULD check the auth_time Claim value and request re- authentication\n// if it determines too much time has elapsed since the last End- User authentication.\n\n// Access Token Validation\n// access_token C1: Hash the octets of the ASCII representation of the access_token with the hash algorithm specified in JWA[JWA]\n// for the alg Header Parameter of the ID Token's JOSE Header. For instance, if the alg is RS256, the hash algorithm used is SHA-256.\n// access_token C2: Take the left- most half of the hash and base64url- encode it.\n// access_token C3: The value of at_hash in the ID Token MUST match the value produced in the previous step if at_hash is present\n// in the ID Token.\n\n@Injectable()\nexport class TokenValidationService {\n  static refreshTokenNoncePlaceholder = '--RefreshToken--';\n  keyAlgorithms: string[] = ['HS256', 'HS384', 'HS512', 'RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'PS256', 'PS384', 'PS512'];\n\n  constructor(\n    private tokenHelperService: TokenHelperService,\n    private loggerService: LoggerService,\n    private jsrsAsignReducedService: JsrsAsignReducedService\n  ) {}\n\n  // id_token C7: The current time MUST be before the time represented by the exp Claim\n  // (possibly allowing for some small leeway to account for clock skew).\n  hasIdTokenExpired(token: string, configId: string, offsetSeconds?: number): boolean {\n    const decoded = this.tokenHelperService.getPayloadFromToken(token, false, configId);\n\n    return !this.validateIdTokenExpNotExpired(decoded, configId, offsetSeconds);\n  }\n\n  // id_token C7: The current time MUST be before the time represented by the exp Claim\n  // (possibly allowing for some small leeway to account for clock skew).\n  validateIdTokenExpNotExpired(decodedIdToken: string, configId: string, offsetSeconds?: number): boolean {\n    const tokenExpirationDate = this.tokenHelperService.getTokenExpirationDate(decodedIdToken);\n    offsetSeconds = offsetSeconds || 0;\n\n    if (!tokenExpirationDate) {\n      return false;\n    }\n\n    const tokenExpirationValue = tokenExpirationDate.valueOf();\n    const nowWithOffset = new Date(new Date().toUTCString()).valueOf() + offsetSeconds * 1000;\n    const tokenNotExpired = tokenExpirationValue > nowWithOffset;\n\n    this.loggerService.logDebug(\n      configId,\n      `Has idToken expired: ${!tokenNotExpired} --> expires in ${this.millisToMinutesAndSeconds(\n        tokenExpirationValue - nowWithOffset\n      )} , ${new Date(tokenExpirationValue).toLocaleTimeString()} > ${new Date(nowWithOffset).toLocaleTimeString()}`\n    );\n\n    // Token not expired?\n    return tokenNotExpired;\n  }\n\n  validateAccessTokenNotExpired(accessTokenExpiresAt: Date, configId: string, offsetSeconds?: number): boolean {\n    // value is optional, so if it does not exist, then it has not expired\n    if (!accessTokenExpiresAt) {\n      return true;\n    }\n\n    offsetSeconds = offsetSeconds || 0;\n    const accessTokenExpirationValue = accessTokenExpiresAt.valueOf();\n    const nowWithOffset = new Date(new Date().toUTCString()).valueOf() + offsetSeconds * 1000;\n    const tokenNotExpired = accessTokenExpirationValue > nowWithOffset;\n\n    this.loggerService.logDebug(\n      configId,\n      `Has accessToken expired: ${!tokenNotExpired} --> expires in ${this.millisToMinutesAndSeconds(\n        accessTokenExpirationValue - nowWithOffset\n      )} , ${new Date(accessTokenExpirationValue).toLocaleTimeString()} > ${new Date(nowWithOffset).toLocaleTimeString()}`\n    );\n\n    // access token not expired?\n    return tokenNotExpired;\n  }\n\n  // iss\n  // REQUIRED. Issuer Identifier for the Issuer of the response.The iss value is a case-sensitive URL using the\n  // https scheme that contains scheme, host,\n  // and optionally, port number and path components and no query or fragment components.\n  //\n  // sub\n  // REQUIRED. Subject Identifier.Locally unique and never reassigned identifier within the Issuer for the End- User,\n  // which is intended to be consumed by the Client, e.g., 24400320 or AItOawmwtWwcT0k51BayewNvutrJUqsvl6qs7A4.\n  // It MUST NOT exceed 255 ASCII characters in length.The sub value is a case-sensitive string.\n  //\n  // aud\n  // REQUIRED. Audience(s) that this ID Token is intended for. It MUST contain the OAuth 2.0 client_id of the Relying Party as an\n  // audience value.\n  // It MAY also contain identifiers for other audiences.In the general case, the aud value is an array of case-sensitive strings.\n  // In the common special case when there is one audience, the aud value MAY be a single case-sensitive string.\n  //\n  // exp\n  // REQUIRED. Expiration time on or after which the ID Token MUST NOT be accepted for processing.\n  // The processing of this parameter requires that the current date/ time MUST be before the expiration date/ time listed in the value.\n  // Implementers MAY provide for some small leeway, usually no more than a few minutes, to account for clock skew.\n  // Its value is a JSON [RFC7159] number representing the number of seconds from 1970- 01 - 01T00: 00:00Z as measured in UTC until\n  // the date/ time.\n  // See RFC 3339 [RFC3339] for details regarding date/ times in general and UTC in particular.\n  //\n  // iat\n  // REQUIRED. Time at which the JWT was issued. Its value is a JSON number representing the number of seconds from\n  // 1970- 01 - 01T00: 00: 00Z as measured\n  // in UTC until the date/ time.\n  validateRequiredIdToken(dataIdToken: any, configId: string): boolean {\n    let validated = true;\n    if (!dataIdToken.hasOwnProperty('iss')) {\n      validated = false;\n      this.loggerService.logWarning(configId, 'iss is missing, this is required in the id_token');\n    }\n\n    if (!dataIdToken.hasOwnProperty('sub')) {\n      validated = false;\n      this.loggerService.logWarning(configId, 'sub is missing, this is required in the id_token');\n    }\n\n    if (!dataIdToken.hasOwnProperty('aud')) {\n      validated = false;\n      this.loggerService.logWarning(configId, 'aud is missing, this is required in the id_token');\n    }\n\n    if (!dataIdToken.hasOwnProperty('exp')) {\n      validated = false;\n      this.loggerService.logWarning(configId, 'exp is missing, this is required in the id_token');\n    }\n\n    if (!dataIdToken.hasOwnProperty('iat')) {\n      validated = false;\n      this.loggerService.logWarning(configId, 'iat is missing, this is required in the id_token');\n    }\n\n    return validated;\n  }\n\n  // id_token C8: The iat Claim can be used to reject tokens that were issued too far away from the current time,\n  // limiting the amount of time that nonces need to be stored to prevent attacks.The acceptable range is Client specific.\n  validateIdTokenIatMaxOffset(\n    dataIdToken: any,\n    maxOffsetAllowedInSeconds: number,\n    disableIatOffsetValidation: boolean,\n    configId: string\n  ): boolean {\n    if (disableIatOffsetValidation) {\n      return true;\n    }\n\n    if (!dataIdToken.hasOwnProperty('iat')) {\n      return false;\n    }\n\n    const dateTimeIatIdToken = new Date(0); // The 0 here is the key, which sets the date to the epoch\n    dateTimeIatIdToken.setUTCSeconds(dataIdToken.iat);\n    maxOffsetAllowedInSeconds = maxOffsetAllowedInSeconds || 0;\n\n    const nowInUtc = new Date(new Date().toUTCString());\n    const diff = nowInUtc.valueOf() - dateTimeIatIdToken.valueOf();\n    const maxOffsetAllowedInMilliseconds = maxOffsetAllowedInSeconds * 1000;\n\n    this.loggerService.logDebug(configId, `validate id token iat max offset ${diff} < ${maxOffsetAllowedInMilliseconds}`);\n\n    if (diff > 0) {\n      return diff < maxOffsetAllowedInMilliseconds;\n    }\n\n    return -diff < maxOffsetAllowedInMilliseconds;\n  }\n\n  // id_token C9: The value of the nonce Claim MUST be checked to verify that it is the same value as the one\n  // that was sent in the Authentication Request.The Client SHOULD check the nonce value for replay attacks.\n  // The precise method for detecting replay attacks is Client specific.\n\n  // However the nonce claim SHOULD not be present for the refresh_token grant type\n  // https://bitbucket.org/openid/connect/issues/1025/ambiguity-with-how-nonce-is-handled-on\n  // The current spec is ambiguous and KeyCloak does send it.\n  validateIdTokenNonce(dataIdToken: any, localNonce: any, ignoreNonceAfterRefresh: boolean, configId: string): boolean {\n    const isFromRefreshToken =\n      (dataIdToken.nonce === undefined || ignoreNonceAfterRefresh) && localNonce === TokenValidationService.refreshTokenNoncePlaceholder;\n    if (!isFromRefreshToken && dataIdToken.nonce !== localNonce) {\n      this.loggerService.logDebug(\n        configId,\n        'Validate_id_token_nonce failed, dataIdToken.nonce: ' + dataIdToken.nonce + ' local_nonce:' + localNonce\n      );\n\n      return false;\n    }\n\n    return true;\n  }\n\n  // id_token C1: The Issuer Identifier for the OpenID Provider (which is typically obtained during Discovery)\n  // MUST exactly match the value of the iss (issuer) Claim.\n  validateIdTokenIss(dataIdToken: any, authWellKnownEndpointsIssuer: any, configId: string): boolean {\n    if ((dataIdToken.iss as string) !== (authWellKnownEndpointsIssuer as string)) {\n      this.loggerService.logDebug(\n        configId,\n        'Validate_id_token_iss failed, dataIdToken.iss: ' +\n          dataIdToken.iss +\n          ' authWellKnownEndpoints issuer:' +\n          authWellKnownEndpointsIssuer\n      );\n\n      return false;\n    }\n\n    return true;\n  }\n\n  // id_token C2: The Client MUST validate that the aud (audience) Claim contains its client_id value registered at the Issuer identified\n  // by the iss (issuer) Claim as an audience.\n  // The ID Token MUST be rejected if the ID Token does not list the Client as a valid audience, or if it contains additional audiences\n  // not trusted by the Client.\n  validateIdTokenAud(dataIdToken: any, aud: any, configId: string): boolean {\n    if (Array.isArray(dataIdToken.aud)) {\n      const result = dataIdToken.aud.includes(aud);\n\n      if (!result) {\n        this.loggerService.logDebug(\n          configId,\n          'Validate_id_token_aud array failed, dataIdToken.aud: ' + dataIdToken.aud + ' client_id:' + aud\n        );\n\n        return false;\n      }\n\n      return true;\n    } else if (dataIdToken.aud !== aud) {\n      this.loggerService.logDebug(configId, 'Validate_id_token_aud failed, dataIdToken.aud: ' + dataIdToken.aud + ' client_id:' + aud);\n\n      return false;\n    }\n\n    return true;\n  }\n\n  validateIdTokenAzpExistsIfMoreThanOneAud(dataIdToken: any): boolean {\n    if (!dataIdToken) {\n      return false;\n    }\n\n    if (Array.isArray(dataIdToken.aud) && dataIdToken.aud.length > 1 && !dataIdToken.azp) {\n      return false;\n    }\n\n    return true;\n  }\n\n  // If an azp (authorized party) Claim is present, the Client SHOULD verify that its client_id is the Claim Value.\n  validateIdTokenAzpValid(dataIdToken: any, clientId: string): boolean {\n    if (!dataIdToken?.azp) {\n      return true;\n    }\n\n    if (dataIdToken.azp === clientId) {\n      return true;\n    }\n\n    return false;\n  }\n\n  validateStateFromHashCallback(state: any, localState: any, configId: string): boolean {\n    if ((state as string) !== (localState as string)) {\n      this.loggerService.logDebug(configId, 'ValidateStateFromHashCallback failed, state: ' + state + ' local_state:' + localState);\n\n      return false;\n    }\n\n    return true;\n  }\n\n  // id_token C5: The Client MUST validate the signature of the ID Token according to JWS [JWS] using the algorithm specified in the alg\n  // Header Parameter of the JOSE Header.The Client MUST use the keys provided by the Issuer.\n  // id_token C6: The alg value SHOULD be RS256. Validation of tokens using other signing algorithms is described in the\n  // OpenID Connect Core 1.0 [OpenID.Core] specification.\n  validateSignatureIdToken(idToken: any, jwtkeys: any, configId: string): boolean {\n    if (!jwtkeys || !jwtkeys.keys) {\n      return false;\n    }\n\n    const headerData = this.tokenHelperService.getHeaderFromToken(idToken, false, configId);\n\n    if (Object.keys(headerData).length === 0 && headerData.constructor === Object) {\n      this.loggerService.logWarning(configId, 'id token has no header data');\n\n      return false;\n    }\n\n    const kid = headerData.kid;\n    const alg = headerData.alg;\n\n    if (!this.keyAlgorithms.includes(alg as string)) {\n      this.loggerService.logWarning(configId, 'alg not supported', alg);\n\n      return false;\n    }\n\n    let jwtKtyToUse = 'RSA';\n    if ((alg as string).charAt(0) === 'E') {\n      jwtKtyToUse = 'EC';\n    }\n\n    let isValid = false;\n\n    // No kid in the Jose header\n    if (!kid) {\n      let keyToValidate;\n\n      // If only one key, use it\n      if (jwtkeys.keys.length === 1 && (jwtkeys.keys[0].kty as string) === jwtKtyToUse) {\n        keyToValidate = jwtkeys.keys[0];\n      } else {\n        // More than one key\n        // Make sure there's exactly 1 key candidate\n        // kty \"RSA\" and \"EC\" uses \"sig\"\n        let amountOfMatchingKeys = 0;\n        for (const key of jwtkeys.keys) {\n          if ((key.kty as string) === jwtKtyToUse && (key.use as string) === 'sig') {\n            amountOfMatchingKeys++;\n            keyToValidate = key;\n          }\n        }\n\n        if (amountOfMatchingKeys > 1) {\n          this.loggerService.logWarning(configId, 'no ID Token kid claim in JOSE header and multiple supplied in jwks_uri');\n\n          return false;\n        }\n      }\n\n      if (!keyToValidate) {\n        this.loggerService.logWarning(configId, 'no keys found, incorrect Signature, validation failed for id_token');\n\n        return false;\n      }\n\n      isValid = KJUR.jws.JWS.verify(idToken, KEYUTIL.getKey(keyToValidate), [alg]);\n\n      if (!isValid) {\n        this.loggerService.logWarning(configId, 'incorrect Signature, validation failed for id_token');\n      }\n\n      return isValid;\n    } else {\n      // kid in the Jose header of id_token\n      for (const key of jwtkeys.keys) {\n        if ((key.kid as string) === (kid as string)) {\n          const publicKey = KEYUTIL.getKey(key);\n          isValid = KJUR.jws.JWS.verify(idToken, publicKey, [alg]);\n          if (!isValid) {\n            this.loggerService.logWarning(configId, 'incorrect Signature, validation failed for id_token');\n          }\n\n          return isValid;\n        }\n      }\n    }\n\n    return isValid;\n  }\n\n  // Accepts ID Token without 'kid' claim in JOSE header if only one JWK supplied in 'jwks_url'\n  //// private validate_no_kid_in_header_only_one_allowed_in_jwtkeys(header_data: any, jwtkeys: any): boolean {\n  ////    this.oidcSecurityCommon.logDebug('amount of jwtkeys.keys: ' + jwtkeys.keys.length);\n  ////    if (!header_data.hasOwnProperty('kid')) {\n  ////        // no kid defined in Jose header\n  ////        if (jwtkeys.keys.length != 1) {\n  ////            this.oidcSecurityCommon.logDebug('jwtkeys.keys.length != 1 and no kid in header');\n  ////            return false;\n  ////        }\n  ////    }\n\n  ////    return true;\n  //// }\n\n  // Access Token Validation\n  // access_token C1: Hash the octets of the ASCII representation of the access_token with the hash algorithm specified in JWA[JWA]\n  // for the alg Header Parameter of the ID Token's JOSE Header. For instance, if the alg is RS256, the hash algorithm used is SHA-256.\n  // access_token C2: Take the left- most half of the hash and base64url- encode it.\n  // access_token C3: The value of at_hash in the ID Token MUST match the value produced in the previous step if at_hash\n  // is present in the ID Token.\n  validateIdTokenAtHash(accessToken: any, atHash: any, idTokenAlg: string, configId: string): boolean {\n    this.loggerService.logDebug(configId, 'at_hash from the server:' + atHash);\n\n    // 'sha256' 'sha384' 'sha512'\n    let sha = 'sha256';\n    if (idTokenAlg.includes('384')) {\n      sha = 'sha384';\n    } else if (idTokenAlg.includes('512')) {\n      sha = 'sha512';\n    }\n\n    const testData = this.jsrsAsignReducedService.generateAtHash('' + accessToken, sha);\n    this.loggerService.logDebug(configId, 'at_hash client validation not decoded:' + testData);\n    if (testData === (atHash as string)) {\n      return true; // isValid;\n    } else {\n      const testValue = this.jsrsAsignReducedService.generateAtHash('' + decodeURIComponent(accessToken), sha);\n      this.loggerService.logDebug(configId, '-gen access--' + testValue);\n      if (testValue === (atHash as string)) {\n        return true; // isValid\n      }\n    }\n\n    return false;\n  }\n\n  private millisToMinutesAndSeconds(millis: number): string {\n    const minutes = Math.floor(millis / 60000);\n    const seconds = ((millis % 60000) / 1000).toFixed(0);\n\n    return minutes + ':' + (+seconds < 10 ? '0' : '') + seconds;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { AuthResult } from '../flows/callback-context';\nimport { LoggerService } from '../logging/logger.service';\nimport { EventTypes } from '../public-events/event-types';\nimport { PublicEventsService } from '../public-events/public-events.service';\nimport { StoragePersistenceService } from '../storage/storage-persistence.service';\nimport { TokenValidationService } from '../validation/token-validation.service';\nimport { AuthenticatedResult } from './auth-result';\nimport { AuthStateResult } from './auth-state';\n\nconst DEFAULT_AUTHRESULT = { isAuthenticated: false, allConfigsAuthenticated: [] };\n\n@Injectable()\nexport class AuthStateService {\n  private authenticatedInternal$ = new BehaviorSubject<AuthenticatedResult>(DEFAULT_AUTHRESULT);\n\n  get authenticated$(): Observable<AuthenticatedResult> {\n    return this.authenticatedInternal$.asObservable().pipe(distinctUntilChanged());\n  }\n\n  constructor(\n    private storagePersistenceService: StoragePersistenceService,\n    private loggerService: LoggerService,\n    private publicEventsService: PublicEventsService,\n    private configurationProvider: ConfigurationProvider,\n    private tokenValidationService: TokenValidationService\n  ) {}\n\n  setAuthenticatedAndFireEvent(): void {\n    const result = this.composeAuthenticatedResult();\n    this.authenticatedInternal$.next(result);\n  }\n\n  setUnauthenticatedAndFireEvent(configIdToReset: string): void {\n    this.storagePersistenceService.resetAuthStateInStorage(configIdToReset);\n\n    const result = this.composeUnAuthenticatedResult();\n    this.authenticatedInternal$.next(result);\n  }\n\n  updateAndPublishAuthState(authenticationResult: AuthStateResult): void {\n    this.publicEventsService.fireEvent<AuthStateResult>(EventTypes.NewAuthenticationResult, authenticationResult);\n  }\n\n  setAuthorizationData(accessToken: string, authResult: AuthResult, configId: string): void {\n    this.loggerService.logDebug(configId, `storing the accessToken '${accessToken}'`);\n\n    this.storagePersistenceService.write('authzData', accessToken, configId);\n    this.persistAccessTokenExpirationTime(authResult, configId);\n    this.setAuthenticatedAndFireEvent();\n  }\n\n  getAccessToken(configId: string): string {\n    if (!this.isAuthenticated(configId)) {\n      return null;\n    }\n\n    const token = this.storagePersistenceService.getAccessToken(configId);\n\n    return this.decodeURIComponentSafely(token);\n  }\n\n  getIdToken(configId: string): string {\n    if (!this.isAuthenticated(configId)) {\n      return null;\n    }\n\n    const token = this.storagePersistenceService.getIdToken(configId);\n\n    return this.decodeURIComponentSafely(token);\n  }\n\n  getRefreshToken(configId: string): string {\n    if (!this.isAuthenticated(configId)) {\n      return null;\n    }\n\n    const token = this.storagePersistenceService.getRefreshToken(configId);\n\n    return this.decodeURIComponentSafely(token);\n  }\n\n  getAuthenticationResult(configId?: string): any {\n    if (!this.isAuthenticated(configId)) {\n      return null;\n    }\n\n    return this.storagePersistenceService.getAuthenticationResult(configId);\n  }\n\n  areAuthStorageTokensValid(configId: string): boolean {\n    if (!this.isAuthenticated(configId)) {\n      return false;\n    }\n\n    if (this.hasIdTokenExpiredAndRenewCheckIsEnabled(configId)) {\n      this.loggerService.logDebug(configId, 'persisted idToken is expired');\n\n      return false;\n    }\n\n    if (this.hasAccessTokenExpiredIfExpiryExists(configId)) {\n      this.loggerService.logDebug(configId, 'persisted accessToken is expired');\n\n      return false;\n    }\n\n    this.loggerService.logDebug(configId, 'persisted idToken and accessToken are valid');\n\n    return true;\n  }\n\n  hasIdTokenExpiredAndRenewCheckIsEnabled(configId: string): boolean {\n    const { renewTimeBeforeTokenExpiresInSeconds, enableIdTokenExpiredValidationInRenew } =\n      this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!enableIdTokenExpiredValidationInRenew) {\n      return false;\n    }\n    const tokenToCheck = this.storagePersistenceService.getIdToken(configId);\n\n    const idTokenExpired = this.tokenValidationService.hasIdTokenExpired(tokenToCheck, configId, renewTimeBeforeTokenExpiresInSeconds);\n\n    if (idTokenExpired) {\n      this.publicEventsService.fireEvent<boolean>(EventTypes.IdTokenExpired, idTokenExpired);\n    }\n\n    return idTokenExpired;\n  }\n\n  hasAccessTokenExpiredIfExpiryExists(configId: string): boolean {\n    const { renewTimeBeforeTokenExpiresInSeconds } = this.configurationProvider.getOpenIDConfiguration(configId);\n    const accessTokenExpiresIn = this.storagePersistenceService.read('access_token_expires_at', configId);\n    const accessTokenHasNotExpired = this.tokenValidationService.validateAccessTokenNotExpired(\n      accessTokenExpiresIn,\n      configId,\n      renewTimeBeforeTokenExpiresInSeconds\n    );\n\n    const hasExpired = !accessTokenHasNotExpired;\n\n    if (hasExpired) {\n      this.publicEventsService.fireEvent<boolean>(EventTypes.TokenExpired, hasExpired);\n    }\n\n    return hasExpired;\n  }\n\n  isAuthenticated(configId: string): boolean {\n    return !!this.storagePersistenceService.getAccessToken(configId) && !!this.storagePersistenceService.getIdToken(configId);\n  }\n\n  private decodeURIComponentSafely(token: string): string {\n    if (token) {\n      return decodeURIComponent(token);\n    } else {\n      return '';\n    }\n  }\n\n  private persistAccessTokenExpirationTime(authResult: any, configId: string): void {\n    if (authResult?.expires_in) {\n      const accessTokenExpiryTime = new Date(new Date().toUTCString()).valueOf() + authResult.expires_in * 1000;\n      this.storagePersistenceService.write('access_token_expires_at', accessTokenExpiryTime, configId);\n    }\n  }\n\n  private composeAuthenticatedResult(): AuthenticatedResult {\n    if (!this.configurationProvider.hasManyConfigs()) {\n      const { configId } = this.configurationProvider.getOpenIDConfiguration();\n\n      return { isAuthenticated: true, allConfigsAuthenticated: [{ configId, isAuthenticated: true }] };\n    }\n\n    return this.checkAllConfigsIfTheyAreAuthenticated();\n  }\n\n  private composeUnAuthenticatedResult(): AuthenticatedResult {\n    if (!this.configurationProvider.hasManyConfigs()) {\n      const { configId } = this.configurationProvider.getOpenIDConfiguration();\n\n      return { isAuthenticated: false, allConfigsAuthenticated: [{ configId, isAuthenticated: false }] };\n    }\n\n    return this.checkAllConfigsIfTheyAreAuthenticated();\n  }\n\n  private checkAllConfigsIfTheyAreAuthenticated(): AuthenticatedResult {\n    const configs = this.configurationProvider.getAllConfigurations();\n\n    const allConfigsAuthenticated = configs.map(({ configId }) => ({\n      configId,\n      isAuthenticated: this.isAuthenticated(configId),\n    }));\n\n    const isAuthenticated = allConfigsAuthenticated.every((x) => !!x.isAuthenticated);\n\n    return { allConfigsAuthenticated, isAuthenticated };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { StoragePersistenceService } from '../storage/storage-persistence.service';\n\nconst STORAGE_KEY = 'redirect';\n\n@Injectable()\nexport class AutoLoginService {\n  constructor(private readonly storageService: StoragePersistenceService, private readonly router: Router) {}\n\n  checkSavedRedirectRouteAndNavigate(configId: string): void {\n    const savedRouteForRedirect = this.getStoredRedirectRoute(configId);\n\n    if (savedRouteForRedirect) {\n      this.deleteStoredRedirectRoute(configId);\n      this.router.navigateByUrl(savedRouteForRedirect);\n    }\n  }\n\n  /**\n   * Saves the redirect URL to storage.\n   *\n   * @param url The redirect URL to save.\n   */\n  saveRedirectRoute(configId: string, url: string): void {\n    this.storageService.write(STORAGE_KEY, url, configId);\n  }\n\n  /**\n   * Gets the stored redirect URL from storage.\n   */\n  private getStoredRedirectRoute(configId: string): string {\n    return this.storageService.read(STORAGE_KEY, configId);\n  }\n\n  /**\n   * Removes the redirect URL from storage.\n   */\n  private deleteStoredRedirectRoute(configId: string): void {\n    this.storageService.remove(STORAGE_KEY, configId);\n  }\n}\n","import { HttpParameterCodec } from '@angular/common/http';\n\nexport class UriEncoder implements HttpParameterCodec {\n  encodeKey(key: string): string {\n    return encodeURIComponent(key);\n  }\n\n  encodeValue(value: string): string {\n    return encodeURIComponent(value);\n  }\n\n  decodeKey(key: string): string {\n    return decodeURIComponent(key);\n  }\n\n  decodeValue(value: string): string {\n    return decodeURIComponent(value);\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable } from '@angular/core';\nimport { LoggerService } from '../../logging/logger.service';\n\n@Injectable()\nexport class RandomService {\n  constructor(@Inject(DOCUMENT) private readonly doc: any, private loggerService: LoggerService) {}\n\n  createRandom(requiredLength: number, configId: string): string {\n    if (requiredLength <= 0) {\n      return '';\n    }\n\n    if (requiredLength > 0 && requiredLength < 7) {\n      this.loggerService.logWarning(configId, `RandomService called with ${requiredLength} but 7 chars is the minimum, returning 10 chars`);\n      requiredLength = 10;\n    }\n\n    const length = requiredLength - 6;\n    const arr = new Uint8Array(Math.floor((length || length) / 2));\n    if (this.getCrypto()) {\n      this.getCrypto().getRandomValues(arr);\n    }\n\n    return Array.from(arr, this.toHex).join('') + this.randomString(7);\n  }\n\n  private toHex(dec): string {\n    return ('0' + dec.toString(16)).substr(-2);\n  }\n\n  private randomString(length): string {\n    let result = '';\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n    const values = new Uint32Array(length);\n    if (this.getCrypto()) {\n      this.getCrypto().getRandomValues(values);\n      for (let i = 0; i < length; i++) {\n        result += characters[values[i] % characters.length];\n      }\n    }\n\n    return result;\n  }\n\n  private getCrypto(): any {\n    // support for IE,  (window.crypto || window.msCrypto)\n    return this.doc.defaultView.crypto || (this.doc.defaultView as any).msCrypto;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { LoggerService } from '../logging/logger.service';\nimport { StoragePersistenceService } from '../storage/storage-persistence.service';\nimport { RandomService } from './random/random.service';\n\n@Injectable()\nexport class FlowsDataService {\n  constructor(\n    private storagePersistenceService: StoragePersistenceService,\n    private randomService: RandomService,\n    private configurationProvider: ConfigurationProvider,\n    private loggerService: LoggerService\n  ) {}\n\n  createNonce(configId: string): string {\n    const nonce = this.randomService.createRandom(40, configId);\n    this.loggerService.logDebug(configId, 'Nonce created. nonce:' + nonce);\n    this.setNonce(nonce, configId);\n\n    return nonce;\n  }\n\n  setNonce(nonce: string, configId: string): void {\n    this.storagePersistenceService.write('authNonce', nonce, configId);\n  }\n\n  getAuthStateControl(configId: string): any {\n    return this.storagePersistenceService.read('authStateControl', configId);\n  }\n\n  setAuthStateControl(authStateControl: string, configId: string): void {\n    this.storagePersistenceService.write('authStateControl', authStateControl, configId);\n  }\n\n  getExistingOrCreateAuthStateControl(configId: string): any {\n    let state = this.storagePersistenceService.read('authStateControl', configId);\n    if (!state) {\n      state = this.randomService.createRandom(40, configId);\n      this.storagePersistenceService.write('authStateControl', state, configId);\n    }\n\n    return state;\n  }\n\n  setSessionState(sessionState: any, configId: string): void {\n    this.storagePersistenceService.write('session_state', sessionState, configId);\n  }\n\n  resetStorageFlowData(configId: string): void {\n    this.storagePersistenceService.resetStorageFlowData(configId);\n  }\n\n  getCodeVerifier(configId: string): any {\n    return this.storagePersistenceService.read('codeVerifier', configId);\n  }\n\n  createCodeVerifier(configId: string): string {\n    const codeVerifier = this.randomService.createRandom(67, configId);\n    this.storagePersistenceService.write('codeVerifier', codeVerifier, configId);\n\n    return codeVerifier;\n  }\n\n  isSilentRenewRunning(configId: string): boolean {\n    const storageObject = this.getSilentRenewRunningStorageEntry(configId);\n\n    if (!storageObject) {\n      return false;\n    }\n\n    const { silentRenewTimeoutInSeconds } = this.configurationProvider.getOpenIDConfiguration(configId);\n    const timeOutInMilliseconds = silentRenewTimeoutInSeconds * 1000;\n    const dateOfLaunchedProcessUtc = Date.parse(storageObject.dateOfLaunchedProcessUtc);\n    const currentDateUtc = Date.parse(new Date().toISOString());\n    const elapsedTimeInMilliseconds = Math.abs(currentDateUtc - dateOfLaunchedProcessUtc);\n    const isProbablyStuck = elapsedTimeInMilliseconds > timeOutInMilliseconds;\n\n    if (isProbablyStuck) {\n      this.loggerService.logDebug(configId, 'silent renew process is probably stuck, state will be reset.', configId);\n      this.resetSilentRenewRunning(configId);\n\n      return false;\n    }\n\n    return storageObject.state === 'running';\n  }\n\n  setSilentRenewRunning(configId: string): void {\n    const storageObject = {\n      state: 'running',\n      dateOfLaunchedProcessUtc: new Date().toISOString(),\n    };\n\n    this.storagePersistenceService.write('storageSilentRenewRunning', JSON.stringify(storageObject), configId);\n  }\n\n  resetSilentRenewRunning(configId: string): void {\n    this.storagePersistenceService.write('storageSilentRenewRunning', '', configId);\n  }\n\n  private getSilentRenewRunningStorageEntry(configId: string): any {\n    const storageEntry = this.storagePersistenceService.read('storageSilentRenewRunning', configId);\n\n    if (!storageEntry) {\n      return null;\n    }\n\n    return JSON.parse(storageEntry);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ConfigurationProvider } from '../../config/provider/config.provider';\n\n@Injectable()\nexport class FlowHelper {\n  constructor(private configurationProvider: ConfigurationProvider) {}\n\n  isCurrentFlowCodeFlow(configId: string): boolean {\n    return this.currentFlowIs('code', configId);\n  }\n\n  isCurrentFlowAnyImplicitFlow(configId: string): boolean {\n    return this.isCurrentFlowImplicitFlowWithAccessToken(configId) || this.isCurrentFlowImplicitFlowWithoutAccessToken(configId);\n  }\n\n  isCurrentFlowCodeFlowWithRefreshTokens(configId: string): boolean {\n    const { useRefreshToken } = this.configurationProvider.getOpenIDConfiguration(configId);\n    if (this.isCurrentFlowCodeFlow(configId) && useRefreshToken) {\n      return true;\n    }\n\n    return false;\n  }\n\n  isCurrentFlowImplicitFlowWithAccessToken(configId: string): boolean {\n    return this.currentFlowIs('id_token token', configId);\n  }\n\n  currentFlowIs(flowTypes: string[] | string, configId: string): boolean {\n    const { responseType } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (Array.isArray(flowTypes)) {\n      return flowTypes.some((x) => responseType === x);\n    }\n\n    return responseType === flowTypes;\n  }\n\n  private isCurrentFlowImplicitFlowWithoutAccessToken(configId: string): boolean {\n    return this.currentFlowIs('id_token', configId);\n  }\n}\n","import { HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { ConfigurationProvider } from '../../config/provider/config.provider';\nimport { FlowsDataService } from '../../flows/flows-data.service';\nimport { LoggerService } from '../../logging/logger.service';\nimport { StoragePersistenceService } from '../../storage/storage-persistence.service';\nimport { JsrsAsignReducedService } from '../../validation/jsrsasign-reduced.service';\nimport { FlowHelper } from '../flowHelper/flow-helper.service';\nimport { UriEncoder } from './uri-encoder';\n\nconst CALLBACK_PARAMS_TO_CHECK = ['code', 'state', 'token', 'id_token'];\nconst AUTH0_ENDPOINT = 'auth0.com';\n\n@Injectable()\nexport class UrlService {\n  constructor(\n    private readonly configurationProvider: ConfigurationProvider,\n    private readonly loggerService: LoggerService,\n    private readonly flowsDataService: FlowsDataService,\n    private readonly flowHelper: FlowHelper,\n    private storagePersistenceService: StoragePersistenceService,\n    private jsrsAsignReducedService: JsrsAsignReducedService\n  ) {}\n\n  getUrlParameter(urlToCheck: any, name: any): string {\n    if (!urlToCheck) {\n      return '';\n    }\n\n    if (!name) {\n      return '';\n    }\n\n    name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n    const regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n    const results = regex.exec(urlToCheck);\n\n    return results === null ? '' : decodeURIComponent(results[1]);\n  }\n\n  isCallbackFromSts(currentUrl: string): boolean {\n    return CALLBACK_PARAMS_TO_CHECK.some((x) => !!this.getUrlParameter(currentUrl, x));\n  }\n\n  getRefreshSessionSilentRenewUrl(configId: string, customParams?: { [key: string]: string | number | boolean }): string {\n    if (this.flowHelper.isCurrentFlowCodeFlow(configId)) {\n      return this.createUrlCodeFlowWithSilentRenew(configId, customParams);\n    }\n\n    return this.createUrlImplicitFlowWithSilentRenew(configId, customParams) || '';\n  }\n\n  getAuthorizeParUrl(requestUri: string, configId: string): string {\n    const authWellKnownEndPoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n\n    if (!authWellKnownEndPoints) {\n      this.loggerService.logError(configId, 'authWellKnownEndpoints is undefined');\n\n      return null;\n    }\n\n    const authorizationEndpoint = authWellKnownEndPoints.authorizationEndpoint;\n\n    if (!authorizationEndpoint) {\n      this.loggerService.logError(configId, `Can not create an authorize URL when authorizationEndpoint is '${authorizationEndpoint}'`);\n\n      return null;\n    }\n\n    const { clientId } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!clientId) {\n      this.loggerService.logError(configId, `getAuthorizeParUrl could not add clientId because it was: `, clientId);\n\n      return null;\n    }\n\n    const urlParts = authorizationEndpoint.split('?');\n    const authorizationUrl = urlParts[0];\n    const existingParams = urlParts[1];\n    let params = this.createHttpParams(existingParams);\n\n    params = params.set('request_uri', requestUri);\n    params = params.append('client_id', clientId);\n\n    return `${authorizationUrl}?${params}`;\n  }\n\n  getAuthorizeUrl(configId: string, customParams?: { [key: string]: string | number | boolean }): string {\n    if (this.flowHelper.isCurrentFlowCodeFlow(configId)) {\n      return this.createUrlCodeFlowAuthorize(configId, customParams);\n    }\n\n    return this.createUrlImplicitFlowAuthorize(configId, customParams) || '';\n  }\n\n  createEndSessionUrl(idTokenHint: string, configId: string, customParamsEndSession?: { [p: string]: string | number | boolean }): string {\n    // Auth0 needs a special logout url\n    // See https://auth0.com/docs/api/authentication#logout\n\n    if (this.isAuth0Endpoint(configId)) {\n      return this.composeAuth0Endpoint(configId);\n    }\n\n    const authWellKnownEndPoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n    const endSessionEndpoint = authWellKnownEndPoints?.endSessionEndpoint;\n\n    if (!endSessionEndpoint) {\n      return null;\n    }\n\n    const urlParts = endSessionEndpoint.split('?');\n    const authorizationEndSessionUrl = urlParts[0];\n    const existingParams = urlParts[1];\n    let params = this.createHttpParams(existingParams);\n\n    params = params.set('id_token_hint', idTokenHint);\n\n    const postLogoutRedirectUri = this.getPostLogoutRedirectUrl(configId);\n\n    if (postLogoutRedirectUri) {\n      params = params.append('post_logout_redirect_uri', postLogoutRedirectUri);\n    }\n\n    if (customParamsEndSession) {\n      params = this.appendCustomParams({ ...customParamsEndSession }, params);\n    }\n\n    return `${authorizationEndSessionUrl}?${params}`;\n  }\n\n  createRevocationEndpointBodyAccessToken(token: any, configId: string): string {\n    const clientId = this.getClientId(configId);\n\n    if (!clientId) {\n      return null;\n    }\n\n    let params = this.createHttpParams();\n    params = params.set('client_id', clientId);\n    params = params.set('token', token);\n    params = params.set('token_type_hint', 'access_token');\n\n    return params.toString();\n  }\n\n  createRevocationEndpointBodyRefreshToken(token: any, configId: string): string {\n    const clientId = this.getClientId(configId);\n\n    if (!clientId) {\n      return null;\n    }\n\n    let params = this.createHttpParams();\n    params = params.set('client_id', clientId);\n    params = params.set('token', token);\n    params = params.set('token_type_hint', 'refresh_token');\n\n    return params.toString();\n  }\n\n  getRevocationEndpointUrl(configId: string): string {\n    const authWellKnownEndPoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n    const revocationEndpoint = authWellKnownEndPoints?.revocationEndpoint;\n\n    if (!revocationEndpoint) {\n      return null;\n    }\n\n    const urlParts = revocationEndpoint.split('?');\n\n    const revocationEndpointUrl = urlParts[0];\n\n    return revocationEndpointUrl;\n  }\n\n  createBodyForCodeFlowCodeRequest(code: string, configId: string, customTokenParams?: { [p: string]: string | number | boolean }): string {\n    const codeVerifier = this.flowsDataService.getCodeVerifier(configId);\n    if (!codeVerifier) {\n      this.loggerService.logError(configId, `CodeVerifier is not set `, codeVerifier);\n\n      return null;\n    }\n\n    const clientId = this.getClientId(configId);\n\n    if (!clientId) {\n      return null;\n    }\n\n    let params = this.createHttpParams();\n    params = params.set('grant_type', 'authorization_code');\n    params = params.set('client_id', clientId);\n    params = params.set('code_verifier', codeVerifier);\n    params = params.set('code', code);\n\n    if (customTokenParams) {\n      params = this.appendCustomParams({ ...customTokenParams }, params);\n    }\n\n    const silentRenewUrl = this.getSilentRenewUrl(configId);\n\n    if (this.flowsDataService.isSilentRenewRunning(configId) && silentRenewUrl) {\n      params = params.set('redirect_uri', silentRenewUrl);\n\n      return params.toString();\n    }\n\n    const redirectUrl = this.getRedirectUrl(configId);\n\n    if (!redirectUrl) {\n      return null;\n    }\n\n    params = params.set('redirect_uri', redirectUrl);\n\n    return params.toString();\n  }\n\n  createBodyForCodeFlowRefreshTokensRequest(\n    refreshToken: string,\n    configId: string,\n    customParamsRefresh?: { [key: string]: string | number | boolean }\n  ): string {\n    const clientId = this.getClientId(configId);\n\n    if (!clientId) {\n      return null;\n    }\n\n    let params = this.createHttpParams();\n    params = params.set('grant_type', 'refresh_token');\n    params = params.set('client_id', clientId);\n    params = params.set('refresh_token', refreshToken);\n\n    if (customParamsRefresh) {\n      params = this.appendCustomParams({ ...customParamsRefresh }, params);\n    }\n\n    return params.toString();\n  }\n\n  createBodyForParCodeFlowRequest(configId: string, customParamsRequest?: { [key: string]: string | number | boolean }): string {\n    const redirectUrl = this.getRedirectUrl(configId);\n\n    if (!redirectUrl) {\n      return null;\n    }\n\n    const state = this.flowsDataService.getExistingOrCreateAuthStateControl(configId);\n    const nonce = this.flowsDataService.createNonce(configId);\n    this.loggerService.logDebug(configId, 'Authorize created. adding myautostate: ' + state);\n\n    // code_challenge with \"S256\"\n    const codeVerifier = this.flowsDataService.createCodeVerifier(configId);\n    const codeChallenge = this.jsrsAsignReducedService.generateCodeChallenge(codeVerifier);\n\n    const { clientId, responseType, scope, hdParam, customParamsAuthRequest } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    let params = this.createHttpParams('');\n    params = params.set('client_id', clientId);\n    params = params.append('redirect_uri', redirectUrl);\n    params = params.append('response_type', responseType);\n    params = params.append('scope', scope);\n    params = params.append('nonce', nonce);\n    params = params.append('state', state);\n    params = params.append('code_challenge', codeChallenge);\n    params = params.append('code_challenge_method', 'S256');\n\n    if (hdParam) {\n      params = params.append('hd', hdParam);\n    }\n\n    if (customParamsAuthRequest) {\n      params = this.appendCustomParams({ ...customParamsAuthRequest }, params);\n    }\n\n    if (customParamsRequest) {\n      params = this.appendCustomParams({ ...customParamsRequest }, params);\n    }\n\n    return params.toString();\n  }\n\n  private createAuthorizeUrl(\n    codeChallenge: string,\n    redirectUrl: string,\n    nonce: string,\n    state: string,\n    configId: string,\n    prompt?: string,\n    customRequestParams?: { [key: string]: string | number | boolean }\n  ): string {\n    const authWellKnownEndPoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n    const authorizationEndpoint = authWellKnownEndPoints?.authorizationEndpoint;\n\n    if (!authorizationEndpoint) {\n      this.loggerService.logError(configId, `Can not create an authorize URL when authorizationEndpoint is '${authorizationEndpoint}'`);\n\n      return null;\n    }\n\n    const { clientId, responseType, scope, hdParam, customParamsAuthRequest } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!clientId) {\n      this.loggerService.logError(configId, `createAuthorizeUrl could not add clientId because it was: `, clientId);\n\n      return null;\n    }\n\n    if (!responseType) {\n      this.loggerService.logError(configId, `createAuthorizeUrl could not add responseType because it was: `, responseType);\n\n      return null;\n    }\n\n    if (!scope) {\n      this.loggerService.logError(configId, `createAuthorizeUrl could not add scope because it was: `, scope);\n\n      return null;\n    }\n\n    const urlParts = authorizationEndpoint.split('?');\n    const authorizationUrl = urlParts[0];\n    const existingParams = urlParts[1];\n    let params = this.createHttpParams(existingParams);\n\n    params = params.set('client_id', clientId);\n    params = params.append('redirect_uri', redirectUrl);\n    params = params.append('response_type', responseType);\n    params = params.append('scope', scope);\n    params = params.append('nonce', nonce);\n    params = params.append('state', state);\n\n    if (this.flowHelper.isCurrentFlowCodeFlow(configId)) {\n      params = params.append('code_challenge', codeChallenge);\n      params = params.append('code_challenge_method', 'S256');\n    }\n\n    const mergedParams = { ...customParamsAuthRequest, ...customRequestParams };\n\n    if (Object.keys(mergedParams).length > 0) {\n      params = this.appendCustomParams({ ...mergedParams }, params);\n    }\n\n    if (prompt) {\n      params = this.overWriteParam(params, 'prompt', prompt);\n    }\n\n    if (hdParam) {\n      params = params.append('hd', hdParam);\n    }\n\n    return `${authorizationUrl}?${params}`;\n  }\n\n  private createUrlImplicitFlowWithSilentRenew(configId: string, customParams?: { [key: string]: string | number | boolean }): string {\n    const state = this.flowsDataService.getExistingOrCreateAuthStateControl(configId);\n    const nonce = this.flowsDataService.createNonce(configId);\n\n    const silentRenewUrl = this.getSilentRenewUrl(configId);\n\n    if (!silentRenewUrl) {\n      return null;\n    }\n\n    this.loggerService.logDebug(configId, 'RefreshSession created. adding myautostate: ', state);\n\n    const authWellKnownEndPoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n    if (authWellKnownEndPoints) {\n      return this.createAuthorizeUrl('', silentRenewUrl, nonce, state, configId, 'none', customParams);\n    }\n\n    this.loggerService.logError(configId, 'authWellKnownEndpoints is undefined');\n\n    return null;\n  }\n\n  private createUrlCodeFlowWithSilentRenew(configId: string, customParams?: { [key: string]: string | number | boolean }): string {\n    const state = this.flowsDataService.getExistingOrCreateAuthStateControl(configId);\n    const nonce = this.flowsDataService.createNonce(configId);\n\n    this.loggerService.logDebug(configId, 'RefreshSession created. adding myautostate: ' + state);\n\n    // code_challenge with \"S256\"\n    const codeVerifier = this.flowsDataService.createCodeVerifier(configId);\n    const codeChallenge = this.jsrsAsignReducedService.generateCodeChallenge(codeVerifier);\n\n    const silentRenewUrl = this.getSilentRenewUrl(configId);\n\n    if (!silentRenewUrl) {\n      return null;\n    }\n\n    const authWellKnownEndPoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n    if (authWellKnownEndPoints) {\n      return this.createAuthorizeUrl(codeChallenge, silentRenewUrl, nonce, state, configId, 'none', customParams);\n    }\n\n    this.loggerService.logWarning(configId, 'authWellKnownEndpoints is undefined');\n\n    return null;\n  }\n\n  private createUrlImplicitFlowAuthorize(configId: string, customParams?: { [key: string]: string | number | boolean }): string {\n    const state = this.flowsDataService.getExistingOrCreateAuthStateControl(configId);\n    const nonce = this.flowsDataService.createNonce(configId);\n    this.loggerService.logDebug(configId, 'Authorize created. adding myautostate: ' + state);\n\n    const redirectUrl = this.getRedirectUrl(configId);\n\n    if (!redirectUrl) {\n      return null;\n    }\n\n    const authWellKnownEndPoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n    if (authWellKnownEndPoints) {\n      return this.createAuthorizeUrl('', redirectUrl, nonce, state, configId, null, customParams);\n    }\n\n    this.loggerService.logError(configId, 'authWellKnownEndpoints is undefined');\n\n    return null;\n  }\n\n  private createUrlCodeFlowAuthorize(configId: string, customParams?: { [key: string]: string | number | boolean }): string {\n    const state = this.flowsDataService.getExistingOrCreateAuthStateControl(configId);\n    const nonce = this.flowsDataService.createNonce(configId);\n    this.loggerService.logDebug(configId, 'Authorize created. adding myautostate: ' + state);\n\n    const redirectUrl = this.getRedirectUrl(configId);\n\n    if (!redirectUrl) {\n      return null;\n    }\n\n    // code_challenge with \"S256\"\n    const codeVerifier = this.flowsDataService.createCodeVerifier(configId);\n    const codeChallenge = this.jsrsAsignReducedService.generateCodeChallenge(codeVerifier);\n\n    const authWellKnownEndPoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n    if (authWellKnownEndPoints) {\n      return this.createAuthorizeUrl(codeChallenge, redirectUrl, nonce, state, configId, null, customParams);\n    }\n\n    this.loggerService.logError(configId, 'authWellKnownEndpoints is undefined');\n\n    return null;\n  }\n\n  private getRedirectUrl(configId: string): string {\n    const { redirectUrl } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!redirectUrl) {\n      this.loggerService.logError(configId, `could not get redirectUrl, was: `, redirectUrl);\n\n      null;\n    }\n\n    return redirectUrl;\n  }\n\n  private getSilentRenewUrl(configId: string): string {\n    const { silentRenewUrl } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!silentRenewUrl) {\n      this.loggerService.logError(configId, `could not get silentRenewUrl, was: `, silentRenewUrl);\n\n      return null;\n    }\n\n    return silentRenewUrl;\n  }\n\n  private getPostLogoutRedirectUrl(configId: string): string {\n    const { postLogoutRedirectUri } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!postLogoutRedirectUri) {\n      this.loggerService.logError(configId, `could not get postLogoutRedirectUri, was: `, postLogoutRedirectUri);\n\n      return null;\n    }\n\n    return postLogoutRedirectUri;\n  }\n\n  private getClientId(configId: string): string {\n    const { clientId } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!clientId) {\n      this.loggerService.logError(configId, `could not get clientId, was: `, clientId);\n\n      return null;\n    }\n\n    return clientId;\n  }\n\n  private appendCustomParams(customParams: { [key: string]: string | number | boolean }, params: HttpParams): HttpParams {\n    for (const [key, value] of Object.entries({ ...customParams })) {\n      params = params.append(key, value.toString());\n    }\n\n    return params;\n  }\n\n  private overWriteParam(params: HttpParams, key: string, value: string | number | boolean): HttpParams {\n    return params.set(key, value);\n  }\n\n  private createHttpParams(existingParams?: string): HttpParams {\n    existingParams = existingParams ?? '';\n\n    const params = new HttpParams({\n      fromString: existingParams,\n      encoder: new UriEncoder(),\n    });\n\n    return params;\n  }\n\n  private isAuth0Endpoint(configId: string): boolean {\n    const { authority } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!authority) {\n      return false;\n    }\n\n    return authority.endsWith(AUTH0_ENDPOINT);\n  }\n\n  private composeAuth0Endpoint(configId: string): string {\n    // format: https://YOUR_DOMAIN/v2/logout?client_id=YOUR_CLIENT_ID&returnTo=LOGOUT_URL\n    const { authority, clientId } = this.configurationProvider.getOpenIDConfiguration(configId);\n    const postLogoutRedirectUrl = this.getPostLogoutRedirectUrl(configId);\n\n    return `${authority}/v2/logout?client_id=${clientId}&returnTo=${postLogoutRedirectUrl}`;\n  }\n}\n","import { HttpErrorResponse, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, of, throwError, timer } from 'rxjs';\nimport { catchError, mergeMap, retryWhen, switchMap } from 'rxjs/operators';\nimport { DataService } from '../../api/data.service';\nimport { ConfigurationProvider } from '../../config/provider/config.provider';\nimport { LoggerService } from '../../logging/logger.service';\nimport { StoragePersistenceService } from '../../storage/storage-persistence.service';\nimport { UrlService } from '../../utils/url/url.service';\nimport { TokenValidationService } from '../../validation/token-validation.service';\nimport { CallbackContext } from '../callback-context';\nimport { FlowsDataService } from '../flows-data.service';\n\n@Injectable()\nexport class CodeFlowCallbackHandlerService {\n  constructor(\n    private readonly urlService: UrlService,\n    private readonly loggerService: LoggerService,\n    private readonly tokenValidationService: TokenValidationService,\n    private readonly flowsDataService: FlowsDataService,\n    private readonly configurationProvider: ConfigurationProvider,\n    private readonly storagePersistenceService: StoragePersistenceService,\n    private readonly dataService: DataService\n  ) {}\n\n  // STEP 1 Code Flow\n  codeFlowCallback(urlToCheck: string, configId: string): Observable<CallbackContext> {\n    const code = this.urlService.getUrlParameter(urlToCheck, 'code');\n    const state = this.urlService.getUrlParameter(urlToCheck, 'state');\n    const sessionState = this.urlService.getUrlParameter(urlToCheck, 'session_state');\n\n    if (!state) {\n      this.loggerService.logDebug(configId, 'no state in url');\n\n      return throwError(() => new Error('no state in url'));\n    }\n\n    if (!code) {\n      this.loggerService.logDebug(configId, 'no code in url');\n\n      return throwError(() => new Error('no code in url'));\n    }\n\n    this.loggerService.logDebug(configId, 'running validation for callback', urlToCheck);\n\n    const initialCallbackContext = {\n      code,\n      refreshToken: null,\n      state,\n      sessionState,\n      authResult: null,\n      isRenewProcess: false,\n      jwtKeys: null,\n      validationResult: null,\n      existingIdToken: null,\n    };\n\n    return of(initialCallbackContext);\n  }\n\n  // STEP 2 Code Flow //  Code Flow Silent Renew starts here\n  codeFlowCodeRequest(callbackContext: CallbackContext, configId: string): Observable<CallbackContext> {\n    const authStateControl = this.flowsDataService.getAuthStateControl(configId);\n\n    const isStateCorrect = this.tokenValidationService.validateStateFromHashCallback(callbackContext.state, authStateControl, configId);\n\n    if (!isStateCorrect) {\n      return throwError(() => new Error('codeFlowCodeRequest incorrect state'));\n    }\n\n    const authWellknownEndpoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n    const tokenEndpoint = authWellknownEndpoints?.tokenEndpoint;\n    if (!tokenEndpoint) {\n      return throwError(() => new Error('Token Endpoint not defined'));\n    }\n\n    let headers: HttpHeaders = new HttpHeaders();\n    headers = headers.set('Content-Type', 'application/x-www-form-urlencoded');\n\n    const config = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    const bodyForCodeFlow = this.urlService.createBodyForCodeFlowCodeRequest(\n      callbackContext.code,\n      configId,\n      config?.customParamsCodeRequest\n    );\n\n    return this.dataService.post(tokenEndpoint, bodyForCodeFlow, configId, headers).pipe(\n      switchMap((response) => {\n        let authResult: any = new Object();\n        authResult = response;\n        authResult.state = callbackContext.state;\n        authResult.session_state = callbackContext.sessionState;\n\n        callbackContext.authResult = authResult;\n\n        return of(callbackContext);\n      }),\n      retryWhen((error) => this.handleRefreshRetry(error, configId)),\n      catchError((error) => {\n        const { authority } = this.configurationProvider.getOpenIDConfiguration(configId);\n        const errorMessage = `OidcService code request ${authority}`;\n        this.loggerService.logError(configId, errorMessage, error);\n\n        return throwError(() => new Error(errorMessage));\n      })\n    );\n  }\n\n  private handleRefreshRetry(errors: Observable<any>, configId: string): Observable<any> {\n    return errors.pipe(\n      mergeMap((error) => {\n        // retry token refresh if there is no internet connection\n        if (error && error instanceof HttpErrorResponse && error.error instanceof ProgressEvent && error.error.type === 'error') {\n          const { authority, refreshTokenRetryInSeconds } = this.configurationProvider.getOpenIDConfiguration(configId);\n          const errorMessage = `OidcService code request ${authority} - no internet connection`;\n          this.loggerService.logWarning(configId, errorMessage, error);\n\n          return timer(refreshTokenRetryInSeconds * 1000);\n        }\n\n        return throwError(() => new Error(error));\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, of, throwError } from 'rxjs';\nimport { map, retry, switchMap } from 'rxjs/operators';\nimport { DataService } from '../api/data.service';\nimport { OpenIdConfiguration } from '../config/openid-configuration';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { LoggerService } from '../logging/logger.service';\nimport { EventTypes } from '../public-events/event-types';\nimport { PublicEventsService } from '../public-events/public-events.service';\nimport { StoragePersistenceService } from '../storage/storage-persistence.service';\nimport { FlowHelper } from '../utils/flowHelper/flow-helper.service';\nimport { TokenHelperService } from '../utils/tokenHelper/token-helper.service';\nimport { ConfigUserDataResult, UserDataResult } from './userdata-result';\n\nconst DEFAULT_USERRESULT = { userData: null, allUserData: [] };\n@Injectable()\nexport class UserService {\n  private userDataInternal$ = new BehaviorSubject<UserDataResult>(DEFAULT_USERRESULT);\n\n  get userData$(): Observable<UserDataResult> {\n    return this.userDataInternal$.asObservable();\n  }\n\n  constructor(\n    private oidcDataService: DataService,\n    private storagePersistenceService: StoragePersistenceService,\n    private eventService: PublicEventsService,\n    private loggerService: LoggerService,\n    private tokenHelperService: TokenHelperService,\n    private flowHelper: FlowHelper,\n    private configurationProvider: ConfigurationProvider\n  ) {}\n\n  getAndPersistUserDataInStore(configId: string, isRenewProcess = false, idToken?: any, decodedIdToken?: any): Observable<any> {\n    idToken = idToken || this.storagePersistenceService.getIdToken(configId);\n    decodedIdToken = decodedIdToken || this.tokenHelperService.getPayloadFromToken(idToken, false, configId);\n\n    const existingUserDataFromStorage = this.getUserDataFromStore(configId);\n    const haveUserData = !!existingUserDataFromStorage;\n    const isCurrentFlowImplicitFlowWithAccessToken = this.flowHelper.isCurrentFlowImplicitFlowWithAccessToken(configId);\n    const isCurrentFlowCodeFlow = this.flowHelper.isCurrentFlowCodeFlow(configId);\n\n    const accessToken = this.storagePersistenceService.getAccessToken(configId);\n    if (!(isCurrentFlowImplicitFlowWithAccessToken || isCurrentFlowCodeFlow)) {\n      this.loggerService.logDebug(configId, `authCallback idToken flow with accessToken ${accessToken}`);\n\n      this.setUserDataToStore(decodedIdToken, configId);\n\n      return of(decodedIdToken);\n    }\n\n    const { renewUserInfoAfterTokenRenew } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!isRenewProcess || renewUserInfoAfterTokenRenew || !haveUserData) {\n      return this.getUserDataOidcFlowAndSave(decodedIdToken.sub, configId).pipe(\n        switchMap((userData) => {\n          this.loggerService.logDebug(configId, 'Received user data: ', userData);\n          if (!!userData) {\n            this.loggerService.logDebug(configId, 'accessToken: ', accessToken);\n\n            return of(userData);\n          } else {\n            return throwError(() => new Error('Received no user data, request failed'));\n          }\n        })\n      );\n    }\n\n    return of(existingUserDataFromStorage);\n  }\n\n  getUserDataFromStore(configId: string): any {\n    return this.storagePersistenceService.read('userData', configId) || null;\n  }\n\n  publishUserDataIfExists(configId: string): void {\n    const userData = this.getUserDataFromStore(configId);\n\n    if (userData) {\n      this.fireUserDataEvent(configId, userData);\n    }\n  }\n\n  setUserDataToStore(userData: any, configId: string): void {\n    this.storagePersistenceService.write('userData', userData, configId);\n    this.fireUserDataEvent(configId, userData);\n  }\n\n  resetUserDataInStore(configId: string): void {\n    this.storagePersistenceService.remove('userData', configId);\n    this.fireUserDataEvent(configId, null);\n  }\n\n  private getUserDataOidcFlowAndSave(idTokenSub: any, configId: string): Observable<any> {\n    return this.getIdentityUserData(configId).pipe(\n      map((data: any) => {\n        if (this.validateUserDataSubIdToken(idTokenSub, data?.sub)) {\n          this.setUserDataToStore(data, configId);\n\n          return data;\n        } else {\n          // something went wrong, user data sub does not match that from id_token\n          this.loggerService.logWarning(configId, `User data sub does not match sub in id_token, resetting`);\n          this.resetUserDataInStore(configId);\n\n          return null;\n        }\n      })\n    );\n  }\n\n  private getIdentityUserData(configId: string): Observable<any> {\n    const token = this.storagePersistenceService.getAccessToken(configId);\n\n    const authWellKnownEndPoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n\n    if (!authWellKnownEndPoints) {\n      this.loggerService.logWarning(configId, 'init check session: authWellKnownEndpoints is undefined');\n\n      return throwError(() => new Error('authWellKnownEndpoints is undefined'));\n    }\n\n    const userInfoEndpoint = authWellKnownEndPoints.userInfoEndpoint;\n\n    if (!userInfoEndpoint) {\n      this.loggerService.logError(\n        configId,\n        'init check session: authWellKnownEndpoints.userinfo_endpoint is undefined; set auto_userinfo = false in config'\n      );\n\n      return throwError(() => new Error('authWellKnownEndpoints.userinfo_endpoint is undefined'));\n    }\n\n    return this.oidcDataService.get(userInfoEndpoint, configId, token).pipe(retry(2));\n  }\n\n  private validateUserDataSubIdToken(idTokenSub: any, userDataSub: any): boolean {\n    if (!idTokenSub) {\n      return false;\n    }\n\n    if (!userDataSub) {\n      return false;\n    }\n\n    if ((idTokenSub as string) !== (userDataSub as string)) {\n      this.loggerService.logDebug('validateUserDataSubIdToken failed', idTokenSub, userDataSub);\n\n      return false;\n    }\n\n    return true;\n  }\n\n  private fireUserDataEvent(configId: string, passedUserData: any): void {\n    const userData = this.composeSingleOrMultipleUserDataObject(configId, passedUserData);\n\n    this.userDataInternal$.next(userData);\n\n    this.eventService.fireEvent(EventTypes.UserDataChanged, { configId, userData: passedUserData });\n  }\n\n  private composeSingleOrMultipleUserDataObject(configId: string, passedUserData: any): UserDataResult {\n    const hasManyConfigs = this.configurationProvider.hasManyConfigs();\n\n    if (!hasManyConfigs) {\n      return this.composeSingleUserDataResult(configId, passedUserData);\n    }\n\n    const configs = this.configurationProvider.getAllConfigurations();\n\n    const allUserData: ConfigUserDataResult[] = configs.map((config) => {\n      if (this.currentConfigIsToUpdate(configId, config)) {\n        return { configId: config.configId, userData: passedUserData };\n      }\n\n      const alreadySavedUserData = this.storagePersistenceService.read('userData', config.configId) || null;\n\n      return { configId: config.configId, userData: alreadySavedUserData };\n    });\n\n    return {\n      userData: null,\n      allUserData,\n    };\n  }\n\n  private composeSingleUserDataResult(configId: string, userData: any): UserDataResult {\n    return {\n      userData,\n      allUserData: [{ configId, userData }],\n    };\n  }\n\n  private currentConfigIsToUpdate(configId: string, config: OpenIdConfiguration): boolean {\n    return config.configId === configId;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AuthStateService } from '../auth-state/auth-state.service';\nimport { UserService } from '../user-data/user.service';\nimport { FlowsDataService } from './flows-data.service';\n\n@Injectable()\nexport class ResetAuthDataService {\n  constructor(\n    private readonly authStateService: AuthStateService,\n    private readonly flowsDataService: FlowsDataService,\n    private readonly userService: UserService\n  ) {}\n\n  resetAuthorizationData(configId: string): void {\n    this.userService.resetUserDataInStore(configId);\n    this.flowsDataService.resetStorageFlowData(configId);\n    this.authStateService.setUnauthenticatedAndFireEvent(configId);\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { LoggerService } from '../../logging/logger.service';\nimport { CallbackContext } from '../callback-context';\nimport { FlowsDataService } from '../flows-data.service';\nimport { ResetAuthDataService } from '../reset-auth-data.service';\n\n@Injectable()\nexport class ImplicitFlowCallbackHandlerService {\n  constructor(\n    private readonly resetAuthDataService: ResetAuthDataService,\n    private readonly loggerService: LoggerService,\n    private readonly flowsDataService: FlowsDataService,\n    @Inject(DOCUMENT) private readonly doc: any\n  ) {}\n\n  // STEP 1 Code Flow\n  // STEP 1 Implicit Flow\n  implicitFlowCallback(configId: string, hash?: string): Observable<CallbackContext> {\n    const isRenewProcessData = this.flowsDataService.isSilentRenewRunning(configId);\n\n    this.loggerService.logDebug(configId, 'BEGIN callback, no auth data');\n    if (!isRenewProcessData) {\n      this.resetAuthDataService.resetAuthorizationData(configId);\n    }\n\n    hash = hash || this.doc.location.hash.substr(1);\n\n    const authResult: any = hash.split('&').reduce((resultData: any, item: string) => {\n      const parts = item.split('=');\n      resultData[parts.shift() as string] = parts.join('=');\n\n      return resultData;\n    }, {});\n\n    const callbackContext = {\n      code: null,\n      refreshToken: null,\n      state: null,\n      sessionState: null,\n      authResult,\n      isRenewProcess: isRenewProcessData,\n      jwtKeys: null,\n      validationResult: null,\n      existingIdToken: null,\n    };\n\n    return of(callbackContext);\n  }\n}\n","/* eslint-disable no-shadow */\nexport enum ValidationResult {\n  NotSet = 'NotSet',\n  StatesDoNotMatch = 'StatesDoNotMatch',\n  SignatureFailed = 'SignatureFailed',\n  IncorrectNonce = 'IncorrectNonce',\n  RequiredPropertyMissing = 'RequiredPropertyMissing',\n  MaxOffsetExpired = 'MaxOffsetExpired',\n  IssDoesNotMatchIssuer = 'IssDoesNotMatchIssuer',\n  NoAuthWellKnownEndPoints = 'NoAuthWellKnownEndPoints',\n  IncorrectAud = 'IncorrectAud',\n  IncorrectIdTokenClaimsAfterRefresh = 'IncorrectIdTokenClaimsAfterRefresh',\n  IncorrectAzp = 'IncorrectAzp',\n  TokenExpired = 'TokenExpired',\n  IncorrectAtHash = 'IncorrectAtHash',\n  Ok = 'Ok',\n  LoginRequired = 'LoginRequired',\n  SecureTokenServerError = 'SecureTokenServerError',\n}\n","import { HttpResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, retry } from 'rxjs/operators';\nimport { DataService } from '../api/data.service';\nimport { LoggerService } from '../logging/logger.service';\nimport { StoragePersistenceService } from '../storage/storage-persistence.service';\nimport { JwtKeys } from '../validation/jwtkeys';\n\n@Injectable()\nexport class SigninKeyDataService {\n  constructor(\n    private storagePersistenceService: StoragePersistenceService,\n    private loggerService: LoggerService,\n    private dataService: DataService\n  ) {}\n\n  getSigningKeys(configId: string): Observable<JwtKeys> {\n    const authWellKnownEndPoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n    const jwksUri = authWellKnownEndPoints?.jwksUri;\n    if (!jwksUri) {\n      const error = `getSigningKeys: authWellKnownEndpoints.jwksUri is: '${jwksUri}'`;\n      this.loggerService.logWarning(configId, error);\n\n      return throwError(() => new Error(error));\n    }\n\n    this.loggerService.logDebug(configId, 'Getting signinkeys from ', jwksUri);\n\n    return this.dataService.get<JwtKeys>(jwksUri, configId).pipe(\n      retry(2),\n      catchError((e) => this.handleErrorGetSigningKeys(e, configId))\n    );\n  }\n\n  private handleErrorGetSigningKeys(errorResponse: HttpResponse<any> | any, configId: string): Observable<never> {\n    let errMsg = '';\n    if (errorResponse instanceof HttpResponse) {\n      const body = errorResponse.body || {};\n      const err = JSON.stringify(body);\n      const { status, statusText } = errorResponse;\n      errMsg = `${status || ''} - ${statusText || ''} ${err || ''}`;\n    } else {\n      const { message } = errorResponse;\n      errMsg = !!message ? message : `${errorResponse}`;\n    }\n    this.loggerService.logError(configId, errMsg);\n\n    return throwError(() => new Error(errMsg));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of, throwError } from 'rxjs';\nimport { catchError, switchMap, tap } from 'rxjs/operators';\nimport { AuthStateService } from '../../auth-state/auth-state.service';\nimport { ConfigurationProvider } from '../../config/provider/config.provider';\nimport { LoggerService } from '../../logging/logger.service';\nimport { StoragePersistenceService } from '../../storage/storage-persistence.service';\nimport { JwtKeys } from '../../validation/jwtkeys';\nimport { ValidationResult } from '../../validation/validation-result';\nimport { CallbackContext } from '../callback-context';\nimport { FlowsDataService } from '../flows-data.service';\nimport { ResetAuthDataService } from '../reset-auth-data.service';\nimport { SigninKeyDataService } from '../signin-key-data.service';\n\nconst JWT_KEYS = 'jwtKeys';\n\n@Injectable()\nexport class HistoryJwtKeysCallbackHandlerService {\n  constructor(\n    private readonly loggerService: LoggerService,\n    private readonly configurationProvider: ConfigurationProvider,\n    private readonly authStateService: AuthStateService,\n    private readonly flowsDataService: FlowsDataService,\n    private readonly signInKeyDataService: SigninKeyDataService,\n    private readonly storagePersistenceService: StoragePersistenceService,\n    private readonly resetAuthDataService: ResetAuthDataService\n  ) {}\n\n  // STEP 3 Code Flow, STEP 2 Implicit Flow, STEP 3 Refresh Token\n  callbackHistoryAndResetJwtKeys(callbackContext: CallbackContext, configId: string): Observable<CallbackContext> {\n    this.storagePersistenceService.write('authnResult', callbackContext.authResult, configId);\n\n    if (this.historyCleanUpTurnedOn(configId) && !callbackContext.isRenewProcess) {\n      this.resetBrowserHistory();\n    } else {\n      this.loggerService.logDebug(configId, 'history clean up inactive');\n    }\n\n    if (callbackContext.authResult.error) {\n      const errorMessage = `AuthCallback AuthResult came with error: ${callbackContext.authResult.error}`;\n      this.loggerService.logDebug(configId, errorMessage);\n      this.resetAuthDataService.resetAuthorizationData(configId);\n      this.flowsDataService.setNonce('', configId);\n      this.handleResultErrorFromCallback(callbackContext.authResult, callbackContext.isRenewProcess);\n\n      return throwError(() => new Error(errorMessage));\n    }\n\n    this.loggerService.logDebug(\n      configId,\n      `AuthResult '${JSON.stringify(callbackContext.authResult, null, 2)}'.\n      AuthCallback created, begin token validation`\n    );\n\n    return this.signInKeyDataService.getSigningKeys(configId).pipe(\n      tap((jwtKeys: JwtKeys) => this.storeSigningKeys(jwtKeys, configId)),\n      catchError((err) => {\n        // fallback: try to load jwtKeys from storage\n        const storedJwtKeys = this.readSigningKeys(configId);\n        if (!!storedJwtKeys) {\n          this.loggerService.logWarning(configId, `Failed to retrieve signing keys, fallback to stored keys`);\n\n          return of(storedJwtKeys);\n        }\n\n        return throwError(() => new Error(err));\n      }),\n      switchMap((jwtKeys) => {\n        if (jwtKeys) {\n          callbackContext.jwtKeys = jwtKeys;\n\n          return of(callbackContext);\n        }\n\n        const errorMessage = `Failed to retrieve signing key`;\n        this.loggerService.logWarning(configId, errorMessage);\n\n        return throwError(() => new Error(errorMessage));\n      }),\n      catchError((err) => {\n        const errorMessage = `Failed to retrieve signing key with error: ${err}`;\n        this.loggerService.logWarning(configId, errorMessage);\n\n        return throwError(() => new Error(errorMessage));\n      })\n    );\n  }\n\n  private handleResultErrorFromCallback(result: any, isRenewProcess: boolean): void {\n    let validationResult = ValidationResult.SecureTokenServerError;\n\n    if ((result.error as string) === 'login_required') {\n      validationResult = ValidationResult.LoginRequired;\n    }\n\n    this.authStateService.updateAndPublishAuthState({\n      isAuthenticated: false,\n      validationResult,\n      isRenewProcess,\n    });\n  }\n\n  private historyCleanUpTurnedOn(configId: string): boolean {\n    const { historyCleanupOff } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    return !historyCleanupOff;\n  }\n\n  private resetBrowserHistory(): void {\n    window.history.replaceState({}, window.document.title, window.location.origin + window.location.pathname);\n  }\n\n  private storeSigningKeys(jwtKeys: JwtKeys, configId: string): void {\n    this.storagePersistenceService.write(JWT_KEYS, jwtKeys, configId);\n  }\n\n  private readSigningKeys(configId: string): any {\n    return this.storagePersistenceService.read(JWT_KEYS, configId);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of, throwError } from 'rxjs';\nimport { catchError, switchMap } from 'rxjs/operators';\nimport { AuthStateService } from '../../auth-state/auth-state.service';\nimport { ConfigurationProvider } from '../../config/provider/config.provider';\nimport { LoggerService } from '../../logging/logger.service';\nimport { UserService } from '../../user-data/user.service';\nimport { StateValidationResult } from '../../validation/state-validation-result';\nimport { CallbackContext } from '../callback-context';\nimport { FlowsDataService } from '../flows-data.service';\nimport { ResetAuthDataService } from '../reset-auth-data.service';\n\n@Injectable()\nexport class UserCallbackHandlerService {\n  constructor(\n    private readonly loggerService: LoggerService,\n    private readonly configurationProvider: ConfigurationProvider,\n    private readonly authStateService: AuthStateService,\n    private readonly flowsDataService: FlowsDataService,\n    private readonly userService: UserService,\n    private readonly resetAuthDataService: ResetAuthDataService\n  ) {}\n\n  // STEP 5 userData\n  callbackUser(callbackContext: CallbackContext, configId: string): Observable<CallbackContext> {\n    const { isRenewProcess, validationResult, authResult, refreshToken } = callbackContext;\n    const { autoUserInfo, renewUserInfoAfterTokenRenew } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!autoUserInfo) {\n      if (!isRenewProcess || renewUserInfoAfterTokenRenew) {\n        // userData is set to the id_token decoded, auto get user data set to false\n        if (validationResult.decodedIdToken) {\n          this.userService.setUserDataToStore(validationResult.decodedIdToken, configId);\n        }\n      }\n\n      if (!isRenewProcess && !refreshToken) {\n        this.flowsDataService.setSessionState(authResult.session_state, configId);\n      }\n\n      this.publishAuthState(validationResult, isRenewProcess);\n\n      return of(callbackContext);\n    }\n\n    return this.userService\n      .getAndPersistUserDataInStore(configId, isRenewProcess, validationResult.idToken, validationResult.decodedIdToken)\n      .pipe(\n        switchMap((userData) => {\n          if (!!userData) {\n            if (!refreshToken) {\n              this.flowsDataService.setSessionState(authResult.session_state, configId);\n            }\n\n            this.publishAuthState(validationResult, isRenewProcess);\n\n            return of(callbackContext);\n          } else {\n            this.resetAuthDataService.resetAuthorizationData(configId);\n            this.publishUnauthenticatedState(validationResult, isRenewProcess);\n            const errorMessage = `Called for userData but they were ${userData}`;\n            this.loggerService.logWarning(configId, errorMessage);\n\n            return throwError(() => new Error(errorMessage));\n          }\n        }),\n        catchError((err) => {\n          const errorMessage = `Failed to retrieve user info with error:  ${err}`;\n          this.loggerService.logWarning(configId, errorMessage);\n\n          return throwError(() => new Error(errorMessage));\n        })\n      );\n  }\n\n  private publishAuthState(stateValidationResult: StateValidationResult, isRenewProcess: boolean): void {\n    this.authStateService.updateAndPublishAuthState({\n      isAuthenticated: true,\n      validationResult: stateValidationResult.state,\n      isRenewProcess,\n    });\n  }\n\n  private publishUnauthenticatedState(stateValidationResult: StateValidationResult, isRenewProcess: boolean): void {\n    this.authStateService.updateAndPublishAuthState({\n      isAuthenticated: false,\n      validationResult: stateValidationResult.state,\n      isRenewProcess,\n    });\n  }\n}\n","import { ValidationResult } from './validation-result';\n\nexport class StateValidationResult {\n  constructor(\n    public accessToken = '',\n    public idToken = '',\n    public authResponseIsValid = false,\n    public decodedIdToken: any = {},\n    public state: ValidationResult = ValidationResult.NotSet\n  ) {}\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class EqualityService {\n  isStringEqualOrNonOrderedArrayEqual(value1: string | any[], value2: string | any[]): boolean {\n    if (this.isNullOrUndefined(value1)) {\n      return false;\n    }\n\n    if (this.isNullOrUndefined(value2)) {\n      return false;\n    }\n\n    if (this.oneValueIsStringAndTheOtherIsArray(value1, value2)) {\n      return false;\n    }\n\n    if (this.bothValuesAreStrings(value1, value2)) {\n      return value1 === value2;\n    }\n\n    if (this.bothValuesAreArrays(value1, value2)) {\n      return this.arraysHaveEqualContent(value1 as any[], value2 as any[]);\n    }\n\n    return false;\n  }\n\n  areEqual(value1: string | any[] | any | null | undefined, value2: string | any[] | any | null | undefined): boolean {\n    if (!value1 || !value2) {\n      return false;\n    }\n\n    if (this.bothValuesAreArrays(value1, value2)) {\n      return this.arraysStrictEqual(value1 as any[], value2 as any[]);\n    }\n\n    if (this.bothValuesAreStrings(value1, value2)) {\n      return value1 === value2;\n    }\n\n    if (this.bothValuesAreObjects(value1, value2)) {\n      return JSON.stringify(value1).toLowerCase() === JSON.stringify(value2).toLowerCase();\n    }\n\n    if (this.oneValueIsStringAndTheOtherIsArray(value1, value2)) {\n      if (Array.isArray(value1) && this.valueIsString(value2)) {\n        return value1[0] === value2;\n      }\n      if (Array.isArray(value2) && this.valueIsString(value1)) {\n        return value2[0] === value1;\n      }\n    }\n\n    return false;\n  }\n\n  private oneValueIsStringAndTheOtherIsArray(value1: string | any | any[], value2: string | any | any[]): boolean {\n    return (Array.isArray(value1) && this.valueIsString(value2)) || (Array.isArray(value2) && this.valueIsString(value1));\n  }\n\n  private bothValuesAreObjects(value1: string | any | any[], value2: string | any | any[]): boolean {\n    return this.valueIsObject(value1) && this.valueIsObject(value2);\n  }\n\n  private bothValuesAreStrings(value1: string | any | any[], value2: string | any | any[]): boolean {\n    return this.valueIsString(value1) && this.valueIsString(value2);\n  }\n\n  private bothValuesAreArrays(value1: string | any | any[], value2: string | any | any[]): boolean {\n    return Array.isArray(value1) && Array.isArray(value2);\n  }\n\n  private valueIsString(value: any): boolean {\n    return typeof value === 'string' || value instanceof String;\n  }\n\n  private valueIsObject(value: any): boolean {\n    return typeof value === 'object';\n  }\n\n  private arraysStrictEqual(arr1: Array<string>, arr2: Array<string>): boolean {\n    if (arr1.length !== arr2.length) {\n      return false;\n    }\n\n    for (let i = arr1.length; i--; ) {\n      if (arr1[i] !== arr2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  private arraysHaveEqualContent(arr1: Array<string>, arr2: Array<string>): boolean {\n    if (arr1.length !== arr2.length) {\n      return false;\n    }\n\n    return arr1.some((v) => arr2.includes(v));\n  }\n\n  private isNullOrUndefined(val: any): boolean {\n    return val === null || val === undefined;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { CallbackContext } from '../flows/callback-context';\nimport { LoggerService } from '../logging/logger.service';\nimport { StoragePersistenceService } from '../storage/storage-persistence.service';\nimport { EqualityService } from '../utils/equality/equality.service';\nimport { FlowHelper } from '../utils/flowHelper/flow-helper.service';\nimport { TokenHelperService } from '../utils/tokenHelper/token-helper.service';\nimport { StateValidationResult } from './state-validation-result';\nimport { TokenValidationService } from './token-validation.service';\nimport { ValidationResult } from './validation-result';\n\n@Injectable()\nexport class StateValidationService {\n  constructor(\n    private storagePersistenceService: StoragePersistenceService,\n    private tokenValidationService: TokenValidationService,\n    private tokenHelperService: TokenHelperService,\n    private loggerService: LoggerService,\n    private configurationProvider: ConfigurationProvider,\n    private equalityService: EqualityService,\n    private flowHelper: FlowHelper\n  ) {}\n\n  getValidatedStateResult(callbackContext: CallbackContext, configId: string): StateValidationResult {\n    if (!callbackContext) {\n      return new StateValidationResult('', '', false, {});\n    }\n\n    if (callbackContext.authResult.error) {\n      return new StateValidationResult('', '', false, {});\n    }\n\n    return this.validateState(callbackContext, configId);\n  }\n\n  validateState(callbackContext: any, configId: string): StateValidationResult {\n    const toReturn = new StateValidationResult();\n    const authStateControl = this.storagePersistenceService.read('authStateControl', configId);\n\n    if (!this.tokenValidationService.validateStateFromHashCallback(callbackContext.authResult.state, authStateControl, configId)) {\n      this.loggerService.logWarning(configId, 'authCallback incorrect state');\n      toReturn.state = ValidationResult.StatesDoNotMatch;\n      this.handleUnsuccessfulValidation(configId);\n\n      return toReturn;\n    }\n\n    const isCurrentFlowImplicitFlowWithAccessToken = this.flowHelper.isCurrentFlowImplicitFlowWithAccessToken(configId);\n    const isCurrentFlowCodeFlow = this.flowHelper.isCurrentFlowCodeFlow(configId);\n\n    if (isCurrentFlowImplicitFlowWithAccessToken || isCurrentFlowCodeFlow) {\n      toReturn.accessToken = callbackContext.authResult.access_token;\n    }\n\n    if (callbackContext.authResult.id_token) {\n      const { clientId, issValidationOff, maxIdTokenIatOffsetAllowedInSeconds, disableIatOffsetValidation, ignoreNonceAfterRefresh } =\n        this.configurationProvider.getOpenIDConfiguration(configId);\n\n      toReturn.idToken = callbackContext.authResult.id_token;\n\n      toReturn.decodedIdToken = this.tokenHelperService.getPayloadFromToken(toReturn.idToken, false, configId);\n\n      if (!this.tokenValidationService.validateSignatureIdToken(toReturn.idToken, callbackContext.jwtKeys, configId)) {\n        this.loggerService.logDebug(configId, 'authCallback Signature validation failed id_token');\n        toReturn.state = ValidationResult.SignatureFailed;\n        this.handleUnsuccessfulValidation(configId);\n\n        return toReturn;\n      }\n\n      const authNonce = this.storagePersistenceService.read('authNonce', configId);\n\n      if (!this.tokenValidationService.validateIdTokenNonce(toReturn.decodedIdToken, authNonce, ignoreNonceAfterRefresh, configId)) {\n        this.loggerService.logWarning(configId, 'authCallback incorrect nonce, did you call the checkAuth() method multiple times?');\n        toReturn.state = ValidationResult.IncorrectNonce;\n        this.handleUnsuccessfulValidation(configId);\n\n        return toReturn;\n      }\n\n      if (!this.tokenValidationService.validateRequiredIdToken(toReturn.decodedIdToken, configId)) {\n        this.loggerService.logDebug(configId, 'authCallback Validation, one of the REQUIRED properties missing from id_token');\n        toReturn.state = ValidationResult.RequiredPropertyMissing;\n        this.handleUnsuccessfulValidation(configId);\n\n        return toReturn;\n      }\n\n      if (\n        !this.tokenValidationService.validateIdTokenIatMaxOffset(\n          toReturn.decodedIdToken,\n          maxIdTokenIatOffsetAllowedInSeconds,\n          disableIatOffsetValidation,\n          configId\n        )\n      ) {\n        this.loggerService.logWarning(\n          configId,\n          'authCallback Validation, iat rejected id_token was issued too far away from the current time'\n        );\n        toReturn.state = ValidationResult.MaxOffsetExpired;\n        this.handleUnsuccessfulValidation(configId);\n\n        return toReturn;\n      }\n\n      const authWellKnownEndPoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n\n      if (authWellKnownEndPoints) {\n        if (issValidationOff) {\n          this.loggerService.logDebug(configId, 'iss validation is turned off, this is not recommended!');\n        } else if (\n          !issValidationOff &&\n          !this.tokenValidationService.validateIdTokenIss(toReturn.decodedIdToken, authWellKnownEndPoints.issuer, configId)\n        ) {\n          this.loggerService.logWarning(configId, 'authCallback incorrect iss does not match authWellKnownEndpoints issuer');\n          toReturn.state = ValidationResult.IssDoesNotMatchIssuer;\n          this.handleUnsuccessfulValidation(configId);\n\n          return toReturn;\n        }\n      } else {\n        this.loggerService.logWarning(configId, 'authWellKnownEndpoints is undefined');\n        toReturn.state = ValidationResult.NoAuthWellKnownEndPoints;\n        this.handleUnsuccessfulValidation(configId);\n\n        return toReturn;\n      }\n\n      if (!this.tokenValidationService.validateIdTokenAud(toReturn.decodedIdToken, clientId, configId)) {\n        this.loggerService.logWarning(configId, 'authCallback incorrect aud');\n        toReturn.state = ValidationResult.IncorrectAud;\n        this.handleUnsuccessfulValidation(configId);\n\n        return toReturn;\n      }\n\n      if (!this.tokenValidationService.validateIdTokenAzpExistsIfMoreThanOneAud(toReturn.decodedIdToken)) {\n        this.loggerService.logWarning(configId, 'authCallback missing azp');\n        toReturn.state = ValidationResult.IncorrectAzp;\n        this.handleUnsuccessfulValidation(configId);\n\n        return toReturn;\n      }\n\n      if (!this.tokenValidationService.validateIdTokenAzpValid(toReturn.decodedIdToken, clientId)) {\n        this.loggerService.logWarning(configId, 'authCallback incorrect azp');\n        toReturn.state = ValidationResult.IncorrectAzp;\n        this.handleUnsuccessfulValidation(configId);\n\n        return toReturn;\n      }\n\n      if (!this.isIdTokenAfterRefreshTokenRequestValid(callbackContext, toReturn.decodedIdToken, configId)) {\n        this.loggerService.logWarning(configId, 'authCallback pre, post id_token claims do not match in refresh');\n        toReturn.state = ValidationResult.IncorrectIdTokenClaimsAfterRefresh;\n        this.handleUnsuccessfulValidation(configId);\n\n        return toReturn;\n      }\n\n      if (!this.tokenValidationService.validateIdTokenExpNotExpired(toReturn.decodedIdToken, configId)) {\n        this.loggerService.logWarning(configId, 'authCallback id token expired');\n        toReturn.state = ValidationResult.TokenExpired;\n        this.handleUnsuccessfulValidation(configId);\n\n        return toReturn;\n      }\n    } else {\n      this.loggerService.logDebug(configId, 'No id_token found, skipping id_token validation');\n    }\n\n    // flow id_token\n    if (!isCurrentFlowImplicitFlowWithAccessToken && !isCurrentFlowCodeFlow) {\n      toReturn.authResponseIsValid = true;\n      toReturn.state = ValidationResult.Ok;\n      this.handleSuccessfulValidation(configId);\n      this.handleUnsuccessfulValidation(configId);\n\n      return toReturn;\n    }\n\n    // only do check if id_token returned, no always the case when using refresh tokens\n    if (callbackContext.authResult.id_token) {\n      const idTokenHeader = this.tokenHelperService.getHeaderFromToken(toReturn.idToken, false, configId);\n\n      // The at_hash is optional for the code flow\n      if (isCurrentFlowCodeFlow && !(toReturn.decodedIdToken.at_hash as string)) {\n        this.loggerService.logDebug(configId, 'Code Flow active, and no at_hash in the id_token, skipping check!');\n      } else if (\n        !this.tokenValidationService.validateIdTokenAtHash(\n          toReturn.accessToken,\n          toReturn.decodedIdToken.at_hash,\n          idTokenHeader.alg, // 'RSA256'\n          configId\n        ) ||\n        !toReturn.accessToken\n      ) {\n        this.loggerService.logWarning(configId, 'authCallback incorrect at_hash');\n        toReturn.state = ValidationResult.IncorrectAtHash;\n        this.handleUnsuccessfulValidation(configId);\n\n        return toReturn;\n      }\n    }\n\n    toReturn.authResponseIsValid = true;\n    toReturn.state = ValidationResult.Ok;\n    this.handleSuccessfulValidation(configId);\n\n    return toReturn;\n  }\n\n  private isIdTokenAfterRefreshTokenRequestValid(callbackContext: CallbackContext, newIdToken: any, configId: string): boolean {\n    const { useRefreshToken, disableRefreshIdTokenAuthTimeValidation } = this.configurationProvider.getOpenIDConfiguration(configId);\n    if (!useRefreshToken) {\n      return true;\n    }\n\n    if (!callbackContext.existingIdToken) {\n      return true;\n    }\n\n    const decodedIdToken = this.tokenHelperService.getPayloadFromToken(callbackContext.existingIdToken, false, configId);\n\n    // Upon successful validation of the Refresh Token, the response body is the Token Response of Section 3.1.3.3\n    // except that it might not contain an id_token.\n\n    // If an ID Token is returned as a result of a token refresh request, the following requirements apply:\n\n    // its iss Claim Value MUST be the same as in the ID Token issued when the original authentication occurred,\n    if (decodedIdToken.iss !== newIdToken.iss) {\n      this.loggerService.logDebug(configId, `iss do not match: ${decodedIdToken.iss} ${newIdToken.iss}`);\n\n      return false;\n    }\n    // its azp Claim Value MUST be the same as in the ID Token issued when the original authentication occurred;\n    //   if no azp Claim was present in the original ID Token, one MUST NOT be present in the new ID Token, and\n    // otherwise, the same rules apply as apply when issuing an ID Token at the time of the original authentication.\n    if (decodedIdToken.azp !== newIdToken.azp) {\n      this.loggerService.logDebug(configId, `azp do not match: ${decodedIdToken.azp} ${newIdToken.azp}`);\n\n      return false;\n    }\n    // its sub Claim Value MUST be the same as in the ID Token issued when the original authentication occurred,\n    if (decodedIdToken.sub !== newIdToken.sub) {\n      this.loggerService.logDebug(configId, `sub do not match: ${decodedIdToken.sub} ${newIdToken.sub}`);\n\n      return false;\n    }\n\n    // its aud Claim Value MUST be the same as in the ID Token issued when the original authentication occurred,\n    if (!this.equalityService.isStringEqualOrNonOrderedArrayEqual(decodedIdToken?.aud, newIdToken?.aud)) {\n      this.loggerService.logDebug(configId, `aud in new id_token is not valid: '${decodedIdToken?.aud}' '${newIdToken.aud}'`);\n\n      return false;\n    }\n\n    if (disableRefreshIdTokenAuthTimeValidation) {\n      return true;\n    }\n\n    // its iat Claim MUST represent the time that the new ID Token is issued,\n    // if the ID Token contains an auth_time Claim, its value MUST represent the time of the original authentication\n    // - not the time that the new ID token is issued,\n    if (decodedIdToken.auth_time !== newIdToken.auth_time) {\n      this.loggerService.logDebug(configId, `auth_time do not match: ${decodedIdToken.auth_time} ${newIdToken.auth_time}`);\n\n      return false;\n    }\n\n    return true;\n  }\n\n  private handleSuccessfulValidation(configId: string): void {\n    const { autoCleanStateAfterAuthentication } = this.configurationProvider.getOpenIDConfiguration(configId);\n    this.storagePersistenceService.write('authNonce', null, configId);\n\n    if (autoCleanStateAfterAuthentication) {\n      this.storagePersistenceService.write('authStateControl', '', configId);\n    }\n    this.loggerService.logDebug(configId, 'authCallback token(s) validated, continue');\n  }\n\n  private handleUnsuccessfulValidation(configId: string): void {\n    const { autoCleanStateAfterAuthentication } = this.configurationProvider.getOpenIDConfiguration(configId);\n    this.storagePersistenceService.write('authNonce', null, configId);\n\n    if (autoCleanStateAfterAuthentication) {\n      this.storagePersistenceService.write('authStateControl', '', configId);\n    }\n    this.loggerService.logDebug(configId, 'authCallback token(s) invalid');\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable } from '@angular/core';\nimport { Observable, of, throwError } from 'rxjs';\nimport { AuthStateService } from '../../auth-state/auth-state.service';\nimport { LoggerService } from '../../logging/logger.service';\nimport { StateValidationResult } from '../../validation/state-validation-result';\nimport { StateValidationService } from '../../validation/state-validation.service';\nimport { CallbackContext } from '../callback-context';\nimport { ResetAuthDataService } from '../reset-auth-data.service';\n\n@Injectable()\nexport class StateValidationCallbackHandlerService {\n  constructor(\n    private readonly loggerService: LoggerService,\n    private readonly stateValidationService: StateValidationService,\n    private readonly authStateService: AuthStateService,\n    private readonly resetAuthDataService: ResetAuthDataService,\n    @Inject(DOCUMENT) private readonly doc: any\n  ) {}\n\n  // STEP 4 All flows\n\n  callbackStateValidation(callbackContext: CallbackContext, configId: string): Observable<CallbackContext> {\n    const validationResult = this.stateValidationService.getValidatedStateResult(callbackContext, configId);\n    callbackContext.validationResult = validationResult;\n\n    if (validationResult.authResponseIsValid) {\n      this.authStateService.setAuthorizationData(validationResult.accessToken, callbackContext.authResult, configId);\n\n      return of(callbackContext);\n    } else {\n      const errorMessage = `authorizedCallback, token(s) validation failed, resetting. Hash: ${this.doc.location.hash}`;\n      this.loggerService.logWarning(configId, errorMessage);\n      this.resetAuthDataService.resetAuthorizationData(configId);\n      this.publishUnauthorizedState(callbackContext.validationResult, callbackContext.isRenewProcess);\n\n      return throwError(() => new Error(errorMessage));\n    }\n  }\n\n  private publishUnauthorizedState(stateValidationResult: StateValidationResult, isRenewProcess: boolean): void {\n    this.authStateService.updateAndPublishAuthState({\n      isAuthenticated: false,\n      validationResult: stateValidationResult.state,\n      isRenewProcess,\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of, throwError } from 'rxjs';\nimport { AuthStateService } from '../../auth-state/auth-state.service';\nimport { LoggerService } from '../../logging/logger.service';\nimport { TokenValidationService } from '../../validation/token-validation.service';\nimport { CallbackContext } from '../callback-context';\nimport { FlowsDataService } from '../flows-data.service';\n\n@Injectable()\nexport class RefreshSessionCallbackHandlerService {\n  constructor(\n    private readonly loggerService: LoggerService,\n    private readonly authStateService: AuthStateService,\n    private readonly flowsDataService: FlowsDataService\n  ) {}\n\n  // STEP 1 Refresh session\n  refreshSessionWithRefreshTokens(configId: string): Observable<CallbackContext> {\n    const stateData = this.flowsDataService.getExistingOrCreateAuthStateControl(configId);\n    this.loggerService.logDebug(configId, 'RefreshSession created. Adding myautostate: ' + stateData);\n    const refreshToken = this.authStateService.getRefreshToken(configId);\n    const idToken = this.authStateService.getIdToken(configId);\n\n    if (refreshToken) {\n      const callbackContext = {\n        code: null,\n        refreshToken,\n        state: stateData,\n        sessionState: null,\n        authResult: null,\n        isRenewProcess: true,\n        jwtKeys: null,\n        validationResult: null,\n        existingIdToken: idToken,\n      };\n\n      this.loggerService.logDebug(configId, 'found refresh code, obtaining new credentials with refresh code');\n      // Nonce is not used with refresh tokens; but Key cloak may send it anyway\n      this.flowsDataService.setNonce(TokenValidationService.refreshTokenNoncePlaceholder, configId);\n\n      return of(callbackContext);\n    } else {\n      const errorMessage = 'no refresh token found, please login';\n      this.loggerService.logError(configId, errorMessage);\n\n      return throwError(() => new Error(errorMessage));\n    }\n  }\n}\n","import { HttpErrorResponse, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, of, throwError, timer } from 'rxjs';\nimport { catchError, mergeMap, retryWhen, switchMap } from 'rxjs/operators';\nimport { DataService } from '../../api/data.service';\nimport { ConfigurationProvider } from '../../config/provider/config.provider';\nimport { LoggerService } from '../../logging/logger.service';\nimport { StoragePersistenceService } from '../../storage/storage-persistence.service';\nimport { UrlService } from '../../utils/url/url.service';\nimport { CallbackContext } from '../callback-context';\n\n@Injectable()\nexport class RefreshTokenCallbackHandlerService {\n  constructor(\n    private readonly urlService: UrlService,\n    private readonly loggerService: LoggerService,\n    private readonly configurationProvider: ConfigurationProvider,\n    private readonly dataService: DataService,\n    private readonly storagePersistenceService: StoragePersistenceService\n  ) {}\n\n  // STEP 2 Refresh Token\n  refreshTokensRequestTokens(\n    callbackContext: CallbackContext,\n    configId: string,\n    customParamsRefresh?: { [key: string]: string | number | boolean }\n  ): Observable<CallbackContext> {\n    let headers: HttpHeaders = new HttpHeaders();\n    headers = headers.set('Content-Type', 'application/x-www-form-urlencoded');\n\n    const authWellknownEndpoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n    const tokenEndpoint = authWellknownEndpoints?.tokenEndpoint;\n    if (!tokenEndpoint) {\n      return throwError(() => new Error('Token Endpoint not defined'));\n    }\n\n    const data = this.urlService.createBodyForCodeFlowRefreshTokensRequest(callbackContext.refreshToken, configId, customParamsRefresh);\n\n    return this.dataService.post(tokenEndpoint, data, configId, headers).pipe(\n      switchMap((response: any) => {\n        this.loggerService.logDebug(configId, 'token refresh response: ', response);\n        let authResult: any = new Object();\n        authResult = response;\n        authResult.state = callbackContext.state;\n\n        callbackContext.authResult = authResult;\n\n        return of(callbackContext);\n      }),\n      retryWhen((error) => this.handleRefreshRetry(error, configId)),\n      catchError((error) => {\n        const { authority } = this.configurationProvider.getOpenIDConfiguration(configId);\n        const errorMessage = `OidcService code request ${authority}`;\n        this.loggerService.logError(configId, errorMessage, error);\n\n        return throwError(() => new Error(errorMessage));\n      })\n    );\n  }\n\n  private handleRefreshRetry(errors: Observable<any>, configId: string): Observable<any> {\n    return errors.pipe(\n      mergeMap((error) => {\n        // retry token refresh if there is no internet connection\n        if (error && error instanceof HttpErrorResponse && error.error instanceof ProgressEvent && error.error.type === 'error') {\n          const { authority, refreshTokenRetryInSeconds } = this.configurationProvider.getOpenIDConfiguration(configId);\n          const errorMessage = `OidcService code request ${authority} - no internet connection`;\n          this.loggerService.logWarning(configId, errorMessage, error);\n\n          return timer(refreshTokenRetryInSeconds * 1000);\n        }\n\n        return throwError(() => new Error(error));\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { concatMap } from 'rxjs/operators';\nimport { CallbackContext } from './callback-context';\nimport { CodeFlowCallbackHandlerService } from './callback-handling/code-flow-callback-handler.service';\nimport { HistoryJwtKeysCallbackHandlerService } from './callback-handling/history-jwt-keys-callback-handler.service';\nimport { ImplicitFlowCallbackHandlerService } from './callback-handling/implicit-flow-callback-handler.service';\nimport { RefreshSessionCallbackHandlerService } from './callback-handling/refresh-session-callback-handler.service';\nimport { RefreshTokenCallbackHandlerService } from './callback-handling/refresh-token-callback-handler.service';\nimport { StateValidationCallbackHandlerService } from './callback-handling/state-validation-callback-handler.service';\nimport { UserCallbackHandlerService } from './callback-handling/user-callback-handler.service';\n\n@Injectable()\nexport class FlowsService {\n  constructor(\n    private readonly codeFlowCallbackHandlerService: CodeFlowCallbackHandlerService,\n    private readonly implicitFlowCallbackHandlerService: ImplicitFlowCallbackHandlerService,\n    private readonly historyJwtKeysCallbackHandlerService: HistoryJwtKeysCallbackHandlerService,\n    private readonly userHandlerService: UserCallbackHandlerService,\n    private readonly stateValidationCallbackHandlerService: StateValidationCallbackHandlerService,\n    private readonly refreshSessionCallbackHandlerService: RefreshSessionCallbackHandlerService,\n    private readonly refreshTokenCallbackHandlerService: RefreshTokenCallbackHandlerService\n  ) {}\n\n  processCodeFlowCallback(urlToCheck: string, configId: string): Observable<CallbackContext> {\n    return this.codeFlowCallbackHandlerService.codeFlowCallback(urlToCheck, configId).pipe(\n      concatMap((callbackContext) => this.codeFlowCallbackHandlerService.codeFlowCodeRequest(callbackContext, configId)),\n      concatMap((callbackContext) => this.historyJwtKeysCallbackHandlerService.callbackHistoryAndResetJwtKeys(callbackContext, configId)),\n      concatMap((callbackContext) => this.stateValidationCallbackHandlerService.callbackStateValidation(callbackContext, configId)),\n      concatMap((callbackContext) => this.userHandlerService.callbackUser(callbackContext, configId))\n    );\n  }\n\n  processSilentRenewCodeFlowCallback(firstContext: CallbackContext, configId: string): Observable<CallbackContext> {\n    return this.codeFlowCallbackHandlerService.codeFlowCodeRequest(firstContext, configId).pipe(\n      concatMap((callbackContext) => this.historyJwtKeysCallbackHandlerService.callbackHistoryAndResetJwtKeys(callbackContext, configId)),\n      concatMap((callbackContext) => this.stateValidationCallbackHandlerService.callbackStateValidation(callbackContext, configId)),\n      concatMap((callbackContext) => this.userHandlerService.callbackUser(callbackContext, configId))\n    );\n  }\n\n  processImplicitFlowCallback(configId: string, hash?: string): Observable<CallbackContext> {\n    return this.implicitFlowCallbackHandlerService.implicitFlowCallback(configId, hash).pipe(\n      concatMap((callbackContext) => this.historyJwtKeysCallbackHandlerService.callbackHistoryAndResetJwtKeys(callbackContext, configId)),\n      concatMap((callbackContext) => this.stateValidationCallbackHandlerService.callbackStateValidation(callbackContext, configId)),\n      concatMap((callbackContext) => this.userHandlerService.callbackUser(callbackContext, configId))\n    );\n  }\n\n  processRefreshToken(configId: string, customParamsRefresh?: { [key: string]: string | number | boolean }): Observable<CallbackContext> {\n    return this.refreshSessionCallbackHandlerService.refreshSessionWithRefreshTokens(configId).pipe(\n      concatMap((callbackContext) =>\n        this.refreshTokenCallbackHandlerService.refreshTokensRequestTokens(callbackContext, configId, customParamsRefresh)\n      ),\n      concatMap((callbackContext) => this.historyJwtKeysCallbackHandlerService.callbackHistoryAndResetJwtKeys(callbackContext, configId)),\n      concatMap((callbackContext) => this.stateValidationCallbackHandlerService.callbackStateValidation(callbackContext, configId)),\n      concatMap((callbackContext) => this.userHandlerService.callbackUser(callbackContext, configId))\n    );\n  }\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport { Observable, Subscription } from 'rxjs';\n\n@Injectable({ providedIn: 'root' })\nexport class IntervalService {\n  runTokenValidationRunning: Subscription = null;\n\n  constructor(private zone: NgZone) {}\n\n  stopPeriodicTokenCheck(): void {\n    if (this.runTokenValidationRunning) {\n      this.runTokenValidationRunning.unsubscribe();\n      this.runTokenValidationRunning = null;\n    }\n  }\n\n  startPeriodicTokenCheck(repeatAfterSeconds: number): Observable<unknown> {\n    const millisecondsDelayBetweenTokenCheck = repeatAfterSeconds * 1000;\n\n    return new Observable((subscriber) => {\n      let intervalId;\n      this.zone.runOutsideAngular(() => {\n        intervalId = setInterval(() => this.zone.run(() => subscriber.next()), millisecondsDelayBetweenTokenCheck);\n      });\n\n      return (): void => {\n        clearInterval(intervalId);\n      };\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { CallbackContext } from '../flows/callback-context';\nimport { FlowsDataService } from '../flows/flows-data.service';\nimport { FlowsService } from '../flows/flows.service';\nimport { IntervalService } from './interval.service';\n\n@Injectable({ providedIn: 'root' })\nexport class ImplicitFlowCallbackService {\n  constructor(\n    private flowsService: FlowsService,\n    private configurationProvider: ConfigurationProvider,\n    private router: Router,\n    private flowsDataService: FlowsDataService,\n    private intervalService: IntervalService\n  ) {}\n\n  authenticatedImplicitFlowCallback(configId: string, hash?: string): Observable<CallbackContext> {\n    const isRenewProcess = this.flowsDataService.isSilentRenewRunning(configId);\n    const { triggerAuthorizationResultEvent, postLoginRoute, unauthorizedRoute } =\n      this.configurationProvider.getOpenIDConfiguration(configId);\n\n    return this.flowsService.processImplicitFlowCallback(configId, hash).pipe(\n      tap((callbackContext) => {\n        if (!triggerAuthorizationResultEvent && !callbackContext.isRenewProcess) {\n          this.router.navigateByUrl(postLoginRoute);\n        }\n      }),\n      catchError((error) => {\n        this.flowsDataService.resetSilentRenewRunning(configId);\n        this.intervalService.stopPeriodicTokenCheck();\n        if (!triggerAuthorizationResultEvent && !isRenewProcess) {\n          this.router.navigateByUrl(unauthorizedRoute);\n        }\n\n        return throwError(() => new Error(error));\n      })\n    );\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable } from '@angular/core';\nimport { LoggerService } from '../logging/logger.service';\n\n@Injectable()\nexport class IFrameService {\n  constructor(@Inject(DOCUMENT) private readonly doc: any, private loggerService: LoggerService) {}\n\n  getExistingIFrame(identifier: string): HTMLIFrameElement | null {\n    const iFrameOnParent = this.getIFrameFromParentWindow(identifier);\n    if (this.isIFrameElement(iFrameOnParent)) {\n      return iFrameOnParent;\n    }\n\n    const iFrameOnSelf = this.getIFrameFromWindow(identifier);\n    if (this.isIFrameElement(iFrameOnSelf)) {\n      return iFrameOnSelf;\n    }\n\n    return null;\n  }\n\n  addIFrameToWindowBody(identifier: string, configId: string): HTMLIFrameElement {\n    const sessionIframe = this.doc.createElement('iframe');\n    sessionIframe.id = identifier;\n    sessionIframe.title = identifier;\n    this.loggerService.logDebug(configId, sessionIframe);\n    sessionIframe.style.display = 'none';\n    this.doc.body.appendChild(sessionIframe);\n\n    return sessionIframe;\n  }\n\n  private getIFrameFromParentWindow(identifier: string): HTMLIFrameElement | null {\n    try {\n      const iFrameElement = this.doc.defaultView.parent.document.getElementById(identifier);\n      if (this.isIFrameElement(iFrameElement)) {\n        return iFrameElement;\n      }\n\n      return null;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  private getIFrameFromWindow(identifier: string): HTMLIFrameElement | null {\n    const iFrameElement = this.doc.getElementById(identifier);\n    if (this.isIFrameElement(iFrameElement)) {\n      return iFrameElement;\n    }\n\n    return null;\n  }\n\n  private isIFrameElement(element: HTMLElement | null): element is HTMLIFrameElement {\n    return !!element && element instanceof HTMLIFrameElement;\n  }\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { LoggerService } from '../logging/logger.service';\nimport { EventTypes } from '../public-events/event-types';\nimport { PublicEventsService } from '../public-events/public-events.service';\nimport { StoragePersistenceService } from '../storage/storage-persistence.service';\nimport { IFrameService } from './existing-iframe.service';\n\nconst IFRAME_FOR_CHECK_SESSION_IDENTIFIER = 'myiFrameForCheckSession';\n\n// http://openid.net/specs/openid-connect-session-1_0-ID4.html\n\n@Injectable()\nexport class CheckSessionService {\n  private checkSessionReceived = false;\n  private scheduledHeartBeatRunning: any;\n  private lastIFrameRefresh = 0;\n  private outstandingMessages = 0;\n  private heartBeatInterval = 3000;\n  private iframeRefreshInterval = 60000;\n  private checkSessionChangedInternal$ = new BehaviorSubject<boolean>(false);\n\n  get checkSessionChanged$(): Observable<boolean> {\n    return this.checkSessionChangedInternal$.asObservable();\n  }\n\n  constructor(\n    private storagePersistenceService: StoragePersistenceService,\n    private loggerService: LoggerService,\n    private iFrameService: IFrameService,\n    private eventService: PublicEventsService,\n    private configurationProvider: ConfigurationProvider,\n    private zone: NgZone\n  ) {}\n\n  isCheckSessionConfigured(configId: string): boolean {\n    const { startCheckSession } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    return startCheckSession;\n  }\n\n  start(configId: string): void {\n    if (!!this.scheduledHeartBeatRunning) {\n      return;\n    }\n\n    const { clientId } = this.configurationProvider.getOpenIDConfiguration(configId);\n    this.pollServerSession(clientId, configId);\n  }\n\n  stop(): void {\n    if (!this.scheduledHeartBeatRunning) {\n      return;\n    }\n\n    this.clearScheduledHeartBeat();\n    this.checkSessionReceived = false;\n  }\n\n  serverStateChanged(configId: string): boolean {\n    const { startCheckSession } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    return startCheckSession && this.checkSessionReceived;\n  }\n\n  getExistingIframe(): HTMLIFrameElement {\n    return this.iFrameService.getExistingIFrame(IFRAME_FOR_CHECK_SESSION_IDENTIFIER);\n  }\n\n  private init(configId: string): Observable<any> {\n    if (this.lastIFrameRefresh + this.iframeRefreshInterval > Date.now()) {\n      return of(undefined);\n    }\n\n    const authWellKnownEndPoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n\n    if (!authWellKnownEndPoints) {\n      this.loggerService.logWarning(configId, 'CheckSession - init check session: authWellKnownEndpoints is undefined. Returning.');\n\n      return of();\n    }\n\n    const existingIframe = this.getOrCreateIframe(configId);\n    const checkSessionIframe = authWellKnownEndPoints.checkSessionIframe;\n\n    if (checkSessionIframe) {\n      existingIframe.contentWindow.location.replace(checkSessionIframe);\n    } else {\n      this.loggerService.logWarning(configId, 'CheckSession - init check session: checkSessionIframe is not configured to run');\n    }\n\n    return new Observable((observer) => {\n      existingIframe.onload = (): void => {\n        this.lastIFrameRefresh = Date.now();\n        observer.next();\n        observer.complete();\n      };\n    });\n  }\n\n  private pollServerSession(clientId: string, configId: string): void {\n    this.outstandingMessages = 0;\n    const pollServerSessionRecur = (): void => {\n      this.init(configId)\n        .pipe(take(1))\n        .subscribe(() => {\n          const existingIframe = this.getExistingIframe();\n          if (existingIframe && clientId) {\n            this.loggerService.logDebug(configId, `CheckSession - clientId : '${clientId}' - existingIframe: '${existingIframe}'`);\n            const sessionState = this.storagePersistenceService.read('session_state', configId);\n            const authWellKnownEndPoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n\n            if (sessionState && authWellKnownEndPoints?.checkSessionIframe) {\n              const iframeOrigin = new URL(authWellKnownEndPoints.checkSessionIframe)?.origin;\n              this.outstandingMessages++;\n              existingIframe.contentWindow.postMessage(clientId + ' ' + sessionState, iframeOrigin);\n            } else {\n              this.loggerService.logDebug(\n                configId,\n                `CheckSession - session_state is '${sessionState}' - AuthWellKnownEndPoints is '${JSON.stringify(\n                  authWellKnownEndPoints,\n                  null,\n                  2\n                )}'`\n              );\n              this.checkSessionChangedInternal$.next(true);\n            }\n          } else {\n            this.loggerService.logWarning(\n              configId,\n              `CheckSession - OidcSecurityCheckSession pollServerSession checkSession IFrame does not exist:\n               clientId : '${clientId}' - existingIframe: '${existingIframe}'`\n            );\n          }\n\n          // after sending three messages with no response, fail.\n          if (this.outstandingMessages > 3) {\n            this.loggerService.logError(\n              configId,\n              `CheckSession - OidcSecurityCheckSession not receiving check session response messages.\n                            Outstanding messages: '${this.outstandingMessages}'. Server unreachable?`\n            );\n          }\n\n          this.zone.runOutsideAngular(() => {\n            this.scheduledHeartBeatRunning = setTimeout(() => this.zone.run(pollServerSessionRecur), this.heartBeatInterval);\n          });\n        });\n    };\n\n    pollServerSessionRecur();\n  }\n\n  private clearScheduledHeartBeat(): void {\n    clearTimeout(this.scheduledHeartBeatRunning);\n    this.scheduledHeartBeatRunning = null;\n  }\n\n  private messageHandler(configId: string, e: any): void {\n    const existingIFrame = this.getExistingIframe();\n    const authWellKnownEndPoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n    const startsWith = !!authWellKnownEndPoints?.checkSessionIframe?.startsWith(e.origin);\n\n    this.outstandingMessages = 0;\n\n    if (existingIFrame && startsWith && e.source === existingIFrame.contentWindow) {\n      if (e.data === 'error') {\n        this.loggerService.logWarning(configId, 'CheckSession - error from check session messageHandler');\n      } else if (e.data === 'changed') {\n        this.loggerService.logDebug(configId, `CheckSession - ${e} from check session messageHandler`);\n        this.checkSessionReceived = true;\n        this.eventService.fireEvent(EventTypes.CheckSessionReceived, e.data);\n        this.checkSessionChangedInternal$.next(true);\n      } else {\n        this.eventService.fireEvent(EventTypes.CheckSessionReceived, e.data);\n        this.loggerService.logDebug(configId, `CheckSession - ${e.data} from check session messageHandler`);\n      }\n    }\n  }\n\n  private bindMessageEventToIframe(configId: string): void {\n    const iframeMessageEvent = this.messageHandler.bind(this, configId);\n    window.addEventListener('message', iframeMessageEvent, false);\n  }\n\n  private getOrCreateIframe(configId: string): HTMLIFrameElement {\n    const existingIframe = this.getExistingIframe();\n\n    if (!existingIframe) {\n      const frame = this.iFrameService.addIFrameToWindowBody(IFRAME_FOR_CHECK_SESSION_IDENTIFIER, configId);\n      this.bindMessageEventToIframe(configId);\n\n      return frame;\n    }\n\n    return existingIframe;\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable } from '@angular/core';\n\n@Injectable()\nexport class CurrentUrlService {\n  constructor(@Inject(DOCUMENT) private doc: any) {}\n\n  getStateParamFromCurrentUrl(): string {\n    const currentUrl = this.getCurrentUrl();\n    const parsedUrl = new URL(currentUrl);\n    const urlParams = new URLSearchParams(parsedUrl.search);\n    const stateFromUrl = urlParams.get('state');\n\n    return stateFromUrl;\n  }\n\n  currentUrlHasStateParam(): boolean {\n    return !!this.getStateParamFromCurrentUrl();\n  }\n\n  getCurrentUrl(): string {\n    return this.doc.defaultView.location.toString();\n  }\n}\n","import { HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, of, Subject, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { AuthStateService } from '../auth-state/auth-state.service';\nimport { ImplicitFlowCallbackService } from '../callback/implicit-flow-callback.service';\nimport { IntervalService } from '../callback/interval.service';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { CallbackContext } from '../flows/callback-context';\nimport { FlowsDataService } from '../flows/flows-data.service';\nimport { FlowsService } from '../flows/flows.service';\nimport { ResetAuthDataService } from '../flows/reset-auth-data.service';\nimport { LoggerService } from '../logging/logger.service';\nimport { FlowHelper } from '../utils/flowHelper/flow-helper.service';\nimport { ValidationResult } from '../validation/validation-result';\nimport { IFrameService } from './existing-iframe.service';\n\nconst IFRAME_FOR_SILENT_RENEW_IDENTIFIER = 'myiFrameForSilentRenew';\n\n@Injectable()\nexport class SilentRenewService {\n  private refreshSessionWithIFrameCompletedInternal$ = new Subject<CallbackContext>();\n\n  get refreshSessionWithIFrameCompleted$(): Observable<CallbackContext> {\n    return this.refreshSessionWithIFrameCompletedInternal$.asObservable();\n  }\n\n  constructor(\n    private configurationProvider: ConfigurationProvider,\n    private iFrameService: IFrameService,\n    private flowsService: FlowsService,\n    private resetAuthDataService: ResetAuthDataService,\n    private flowsDataService: FlowsDataService,\n    private authStateService: AuthStateService,\n    private loggerService: LoggerService,\n    private flowHelper: FlowHelper,\n    private implicitFlowCallbackService: ImplicitFlowCallbackService,\n    private intervalService: IntervalService\n  ) {}\n\n  getOrCreateIframe(configId: string): HTMLIFrameElement {\n    const existingIframe = this.getExistingIframe();\n\n    if (!existingIframe) {\n      return this.iFrameService.addIFrameToWindowBody(IFRAME_FOR_SILENT_RENEW_IDENTIFIER, configId);\n    }\n\n    return existingIframe;\n  }\n\n  isSilentRenewConfigured(configId: string): boolean {\n    const { useRefreshToken, silentRenew } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    return !useRefreshToken && silentRenew;\n  }\n\n  codeFlowCallbackSilentRenewIframe(urlParts: any, configId: string): Observable<CallbackContext> {\n    const params = new HttpParams({\n      fromString: urlParts[1],\n    });\n\n    const error = params.get('error');\n\n    if (error) {\n      this.authStateService.updateAndPublishAuthState({\n        isAuthenticated: false,\n        validationResult: ValidationResult.LoginRequired,\n        isRenewProcess: true,\n      });\n      this.resetAuthDataService.resetAuthorizationData(configId);\n      this.flowsDataService.setNonce('', configId);\n      this.intervalService.stopPeriodicTokenCheck();\n\n      return throwError(() => new Error(error));\n    }\n\n    const code = params.get('code');\n    const state = params.get('state');\n    const sessionState = params.get('session_state');\n\n    const callbackContext = {\n      code,\n      refreshToken: null,\n      state,\n      sessionState,\n      authResult: null,\n      isRenewProcess: true,\n      jwtKeys: null,\n      validationResult: null,\n      existingIdToken: null,\n    };\n\n    return this.flowsService.processSilentRenewCodeFlowCallback(callbackContext, configId).pipe(\n      catchError((errorFromFlow) => {\n        this.intervalService.stopPeriodicTokenCheck();\n        this.resetAuthDataService.resetAuthorizationData(configId);\n\n        return throwError(() => new Error(error));\n      })\n    );\n  }\n\n  silentRenewEventHandler(e: CustomEvent, configId: string): void {\n    this.loggerService.logDebug(configId, 'silentRenewEventHandler');\n    if (!e.detail) {\n      return;\n    }\n\n    let callback$ = of(null) as Observable<CallbackContext>;\n\n    const isCodeFlow = this.flowHelper.isCurrentFlowCodeFlow(configId);\n\n    if (isCodeFlow) {\n      const urlParts = e.detail.toString().split('?');\n      callback$ = this.codeFlowCallbackSilentRenewIframe(urlParts, configId);\n    } else {\n      callback$ = this.implicitFlowCallbackService.authenticatedImplicitFlowCallback(configId, e.detail);\n    }\n\n    callback$.subscribe({\n      next: (callbackContext) => {\n        this.refreshSessionWithIFrameCompletedInternal$.next(callbackContext);\n        this.flowsDataService.resetSilentRenewRunning(configId);\n      },\n      error: (err: any) => {\n        this.loggerService.logError(configId, 'Error: ' + err);\n        this.refreshSessionWithIFrameCompletedInternal$.next(null);\n        this.flowsDataService.resetSilentRenewRunning(configId);\n      },\n    });\n  }\n\n  private getExistingIframe(): HTMLIFrameElement {\n    return this.iFrameService.getExistingIFrame(IFRAME_FOR_SILENT_RENEW_IDENTIFIER);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { CallbackContext } from '../flows/callback-context';\nimport { FlowsDataService } from '../flows/flows-data.service';\nimport { FlowsService } from '../flows/flows.service';\nimport { IntervalService } from './interval.service';\n\n@Injectable({ providedIn: 'root' })\nexport class CodeFlowCallbackService {\n  constructor(\n    private flowsService: FlowsService,\n    private flowsDataService: FlowsDataService,\n    private intervalService: IntervalService,\n    private configurationProvider: ConfigurationProvider,\n    private router: Router\n  ) {}\n\n  authenticatedCallbackWithCode(urlToCheck: string, configId: string): Observable<CallbackContext> {\n    const isRenewProcess = this.flowsDataService.isSilentRenewRunning(configId);\n    const { triggerAuthorizationResultEvent, postLoginRoute, unauthorizedRoute } =\n      this.configurationProvider.getOpenIDConfiguration(configId);\n\n    return this.flowsService.processCodeFlowCallback(urlToCheck, configId).pipe(\n      tap((callbackContext) => {\n        if (!triggerAuthorizationResultEvent && !callbackContext.isRenewProcess) {\n          this.router.navigateByUrl(postLoginRoute);\n        }\n      }),\n      catchError((error) => {\n        this.flowsDataService.resetSilentRenewRunning(configId);\n        this.intervalService.stopPeriodicTokenCheck();\n        if (!triggerAuthorizationResultEvent && !isRenewProcess) {\n          this.router.navigateByUrl(unauthorizedRoute);\n        }\n\n        return throwError(() => new Error(error));\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { CallbackContext } from '../flows/callback-context';\nimport { FlowHelper } from '../utils/flowHelper/flow-helper.service';\nimport { UrlService } from '../utils/url/url.service';\nimport { CodeFlowCallbackService } from './code-flow-callback.service';\nimport { ImplicitFlowCallbackService } from './implicit-flow-callback.service';\n\n@Injectable({ providedIn: 'root' })\nexport class CallbackService {\n  private stsCallbackInternal$ = new Subject<void>();\n\n  get stsCallback$(): Observable<unknown> {\n    return this.stsCallbackInternal$.asObservable();\n  }\n\n  constructor(\n    private urlService: UrlService,\n    private flowHelper: FlowHelper,\n    private implicitFlowCallbackService: ImplicitFlowCallbackService,\n    private codeFlowCallbackService: CodeFlowCallbackService\n  ) {}\n\n  isCallback(currentUrl: string): boolean {\n    return this.urlService.isCallbackFromSts(currentUrl);\n  }\n\n  handleCallbackAndFireEvents(currentCallbackUrl: string, configId: string): Observable<CallbackContext> {\n    let callback$: Observable<any>;\n\n    if (this.flowHelper.isCurrentFlowCodeFlow(configId)) {\n      callback$ = this.codeFlowCallbackService.authenticatedCallbackWithCode(currentCallbackUrl, configId);\n    } else if (this.flowHelper.isCurrentFlowAnyImplicitFlow(configId)) {\n      callback$ = this.implicitFlowCallbackService.authenticatedImplicitFlowCallback(configId);\n    }\n\n    return callback$.pipe(tap(() => this.stsCallbackInternal$.next()));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map, retry } from 'rxjs/operators';\nimport { DataService } from '../../api/data.service';\nimport { AuthWellKnownEndpoints } from './auth-well-known-endpoints';\n\nconst WELL_KNOWN_SUFFIX = `/.well-known/openid-configuration`;\n\n@Injectable()\nexport class AuthWellKnownDataService {\n  constructor(private readonly http: DataService) {}\n\n  getWellKnownEndPointsFromUrl(authWellknownEndpoint: string, configId: string): Observable<AuthWellKnownEndpoints> {\n    return this.getWellKnownDocument(authWellknownEndpoint, configId).pipe(\n      map(\n        (wellKnownEndpoints) =>\n          ({\n            issuer: wellKnownEndpoints.issuer,\n            jwksUri: wellKnownEndpoints.jwks_uri,\n            authorizationEndpoint: wellKnownEndpoints.authorization_endpoint,\n            tokenEndpoint: wellKnownEndpoints.token_endpoint,\n            userInfoEndpoint: wellKnownEndpoints.userinfo_endpoint,\n            endSessionEndpoint: wellKnownEndpoints.end_session_endpoint,\n            checkSessionIframe: wellKnownEndpoints.check_session_iframe,\n            revocationEndpoint: wellKnownEndpoints.revocation_endpoint,\n            introspectionEndpoint: wellKnownEndpoints.introspection_endpoint,\n            parEndpoint: wellKnownEndpoints.pushed_authorization_request_endpoint,\n          } as AuthWellKnownEndpoints)\n      )\n    );\n  }\n\n  private getWellKnownDocument(wellKnownEndpoint: string, configId: string): Observable<any> {\n    let url = wellKnownEndpoint;\n\n    if (!wellKnownEndpoint.includes(WELL_KNOWN_SUFFIX)) {\n      url = `${wellKnownEndpoint}${WELL_KNOWN_SUFFIX}`;\n    }\n\n    return this.http.get<any>(url, configId).pipe(retry(2));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of, throwError } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport { EventTypes } from '../../public-events/event-types';\nimport { PublicEventsService } from '../../public-events/public-events.service';\nimport { StoragePersistenceService } from '../../storage/storage-persistence.service';\nimport { AuthWellKnownDataService } from './auth-well-known-data.service';\nimport { AuthWellKnownEndpoints } from './auth-well-known-endpoints';\n\n@Injectable()\nexport class AuthWellKnownService {\n  constructor(\n    private publicEventsService: PublicEventsService,\n    private dataService: AuthWellKnownDataService,\n    private storagePersistenceService: StoragePersistenceService\n  ) {}\n\n  getAuthWellKnownEndPoints(authWellknownEndpointUrl: string, configId: string): Observable<AuthWellKnownEndpoints> {\n    const alreadySavedWellKnownEndpoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n    if (!!alreadySavedWellKnownEndpoints) {\n      return of(alreadySavedWellKnownEndpoints);\n    }\n\n    return this.getWellKnownEndPointsFromUrl(authWellknownEndpointUrl, configId).pipe(\n      tap((mappedWellKnownEndpoints) => this.storeWellKnownEndpoints(configId, mappedWellKnownEndpoints)),\n      catchError((error) => {\n        this.publicEventsService.fireEvent(EventTypes.ConfigLoadingFailed, null);\n\n        return throwError(() => new Error(error));\n      })\n    );\n  }\n\n  storeWellKnownEndpoints(configId: string, mappedWellKnownEndpoints: AuthWellKnownEndpoints): void {\n    this.storagePersistenceService.write('authWellKnownEndPoints', mappedWellKnownEndpoints, configId);\n  }\n\n  private getWellKnownEndPointsFromUrl(authWellknownEndpointUrl: string, configId: string): Observable<AuthWellKnownEndpoints> {\n    return this.dataService.getWellKnownEndPointsFromUrl(authWellknownEndpointUrl, configId);\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable, Renderer2, RendererFactory2 } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { LoggerService } from '../logging/logger.service';\nimport { UrlService } from '../utils/url/url.service';\nimport { SilentRenewService } from './silent-renew.service';\n\n@Injectable({ providedIn: 'root' })\nexport class RefreshSessionIframeService {\n  private renderer: Renderer2;\n\n  constructor(\n    @Inject(DOCUMENT) private readonly doc: any,\n    private loggerService: LoggerService,\n    private urlService: UrlService,\n    private silentRenewService: SilentRenewService,\n    rendererFactory: RendererFactory2\n  ) {\n    this.renderer = rendererFactory.createRenderer(null, null);\n  }\n\n  refreshSessionWithIframe(configId: string, customParams?: { [key: string]: string | number | boolean }): Observable<boolean> {\n    this.loggerService.logDebug(configId, 'BEGIN refresh session Authorize Iframe renew');\n    const url = this.urlService.getRefreshSessionSilentRenewUrl(configId, customParams);\n\n    return this.sendAuthorizeRequestUsingSilentRenew(url, configId);\n  }\n\n  private sendAuthorizeRequestUsingSilentRenew(url: string, configId: string): Observable<boolean> {\n    const sessionIframe = this.silentRenewService.getOrCreateIframe(configId);\n    this.initSilentRenewRequest(configId);\n    this.loggerService.logDebug(configId, 'sendAuthorizeRequestUsingSilentRenew for URL:' + url);\n\n    return new Observable((observer) => {\n      const onLoadHandler = (): void => {\n        sessionIframe.removeEventListener('load', onLoadHandler);\n        this.loggerService.logDebug(configId, 'removed event listener from IFrame');\n        observer.next(true);\n        observer.complete();\n      };\n      sessionIframe.addEventListener('load', onLoadHandler);\n      sessionIframe.contentWindow.location.replace(url);\n    });\n  }\n\n  private initSilentRenewRequest(configId: string): void {\n    const instanceId = Math.random();\n\n    const initDestroyHandler = this.renderer.listen('window', 'oidc-silent-renew-init', (e: CustomEvent) => {\n      if (e.detail !== instanceId) {\n        initDestroyHandler();\n        renewDestroyHandler();\n      }\n    });\n    const renewDestroyHandler = this.renderer.listen('window', 'oidc-silent-renew-message', (e) =>\n      this.silentRenewService.silentRenewEventHandler(e, configId)\n    );\n\n    this.doc.defaultView.dispatchEvent(\n      new CustomEvent('oidc-silent-renew-init', {\n        detail: instanceId,\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { CallbackContext } from '../flows/callback-context';\nimport { FlowsService } from '../flows/flows.service';\nimport { ResetAuthDataService } from '../flows/reset-auth-data.service';\nimport { LoggerService } from '../logging/logger.service';\nimport { IntervalService } from './interval.service';\n\n@Injectable({ providedIn: 'root' })\nexport class RefreshSessionRefreshTokenService {\n  constructor(\n    private loggerService: LoggerService,\n    private resetAuthDataService: ResetAuthDataService,\n    private flowsService: FlowsService,\n    private intervalService: IntervalService\n  ) {}\n\n  refreshSessionWithRefreshTokens(\n    configId: string,\n    customParamsRefresh?: { [key: string]: string | number | boolean }\n  ): Observable<CallbackContext> {\n    this.loggerService.logDebug(configId, 'BEGIN refresh session Authorize');\n\n    return this.flowsService.processRefreshToken(configId, customParamsRefresh).pipe(\n      catchError((error) => {\n        this.intervalService.stopPeriodicTokenCheck();\n        this.resetAuthDataService.resetAuthorizationData(configId);\n\n        return throwError(() => new Error(error));\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { forkJoin, Observable, of, throwError, TimeoutError, timer } from 'rxjs';\nimport { map, mergeMap, retryWhen, switchMap, take, timeout } from 'rxjs/operators';\nimport { AuthStateService } from '../auth-state/auth-state.service';\nimport { AuthWellKnownService } from '../config/auth-well-known/auth-well-known.service';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { CallbackContext } from '../flows/callback-context';\nimport { FlowsDataService } from '../flows/flows-data.service';\nimport { RefreshSessionIframeService } from '../iframe/refresh-session-iframe.service';\nimport { SilentRenewService } from '../iframe/silent-renew.service';\nimport { LoggerService } from '../logging/logger.service';\nimport { LoginResponse } from '../login/login-response';\nimport { StoragePersistenceService } from '../storage/storage-persistence.service';\nimport { UserService } from '../user-data/user.service';\nimport { FlowHelper } from '../utils/flowHelper/flow-helper.service';\nimport { RefreshSessionRefreshTokenService } from './refresh-session-refresh-token.service';\n\nexport const MAX_RETRY_ATTEMPTS = 3;\n@Injectable({ providedIn: 'root' })\nexport class RefreshSessionService {\n  constructor(\n    private flowHelper: FlowHelper,\n    private configurationProvider: ConfigurationProvider,\n    private flowsDataService: FlowsDataService,\n    private loggerService: LoggerService,\n    private silentRenewService: SilentRenewService,\n    private authStateService: AuthStateService,\n    private authWellKnownService: AuthWellKnownService,\n    private refreshSessionIframeService: RefreshSessionIframeService,\n    private storagePersistenceService: StoragePersistenceService,\n    private refreshSessionRefreshTokenService: RefreshSessionRefreshTokenService,\n    private userService: UserService\n  ) {}\n\n  userForceRefreshSession(configId: string, extraCustomParams?: { [key: string]: string | number | boolean }): Observable<LoginResponse> {\n    this.persistCustomParams(extraCustomParams, configId);\n\n    return this.forceRefreshSession(configId, extraCustomParams);\n  }\n\n  forceRefreshSession(configId: string, extraCustomParams?: { [key: string]: string | number | boolean }): Observable<LoginResponse> {\n    const { customParamsRefreshTokenRequest } = this.configurationProvider.getOpenIDConfiguration();\n\n    const mergedParams = { ...customParamsRefreshTokenRequest, ...extraCustomParams };\n\n    if (this.flowHelper.isCurrentFlowCodeFlowWithRefreshTokens(configId)) {\n      return this.startRefreshSession(configId, mergedParams).pipe(\n        map(() => {\n          const isAuthenticated = this.authStateService.areAuthStorageTokensValid(configId);\n          if (isAuthenticated) {\n            return {\n              idToken: this.authStateService.getIdToken(configId),\n              accessToken: this.authStateService.getAccessToken(configId),\n              userData: this.userService.getUserDataFromStore(configId),\n              isAuthenticated,\n              configId,\n            } as LoginResponse;\n          }\n\n          return null;\n        })\n      );\n    }\n\n    const { silentRenewTimeoutInSeconds } = this.configurationProvider.getOpenIDConfiguration(configId);\n    const timeOutTime = silentRenewTimeoutInSeconds * 1000;\n\n    return forkJoin([\n      this.startRefreshSession(configId, extraCustomParams),\n      this.silentRenewService.refreshSessionWithIFrameCompleted$.pipe(take(1)),\n    ]).pipe(\n      timeout(timeOutTime),\n      retryWhen(this.timeoutRetryStrategy.bind(this)),\n      map(([_, callbackContext]) => {\n        const isAuthenticated = this.authStateService.areAuthStorageTokensValid(configId);\n        if (isAuthenticated) {\n          return {\n            idToken: callbackContext?.authResult?.id_token,\n            accessToken: callbackContext?.authResult?.access_token,\n            userData: this.userService.getUserDataFromStore(configId),\n            isAuthenticated,\n            configId,\n          };\n        }\n\n        return null;\n      })\n    );\n  }\n\n  private persistCustomParams(extraCustomParams: { [key: string]: string | number | boolean }, configId: string): void {\n    const { useRefreshToken } = this.configurationProvider.getOpenIDConfiguration();\n\n    if (extraCustomParams) {\n      if (useRefreshToken) {\n        this.storagePersistenceService.write('storageCustomParamsRefresh', extraCustomParams, configId);\n      } else {\n        this.storagePersistenceService.write('storageCustomParamsAuthRequest', extraCustomParams, configId);\n      }\n    }\n  }\n\n  private startRefreshSession(\n    configId: string,\n    extraCustomParams?: { [key: string]: string | number | boolean }\n  ): Observable<boolean | CallbackContext | null> {\n    const isSilentRenewRunning = this.flowsDataService.isSilentRenewRunning(configId);\n    this.loggerService.logDebug(configId, `Checking: silentRenewRunning: ${isSilentRenewRunning}`);\n    const shouldBeExecuted = !isSilentRenewRunning;\n\n    if (!shouldBeExecuted) {\n      return of(null);\n    }\n\n    const { authWellknownEndpointUrl } = this.configurationProvider.getOpenIDConfiguration(configId) || {};\n\n    if (!authWellknownEndpointUrl) {\n      this.loggerService.logError(configId, 'no authWellKnownEndpoint given!');\n\n      return of(null);\n    }\n\n    return this.authWellKnownService.getAuthWellKnownEndPoints(authWellknownEndpointUrl, configId).pipe(\n      switchMap(() => {\n        this.flowsDataService.setSilentRenewRunning(configId);\n\n        if (this.flowHelper.isCurrentFlowCodeFlowWithRefreshTokens(configId)) {\n          // Refresh Session using Refresh tokens\n          return this.refreshSessionRefreshTokenService.refreshSessionWithRefreshTokens(configId, extraCustomParams);\n        }\n\n        return this.refreshSessionIframeService.refreshSessionWithIframe(configId, extraCustomParams);\n      })\n    );\n  }\n\n  private timeoutRetryStrategy(errorAttempts: Observable<any>, configId: string): Observable<number> {\n    return errorAttempts.pipe(\n      mergeMap((error, index) => {\n        const scalingDuration = 1000;\n        const currentAttempt = index + 1;\n\n        if (!(error instanceof TimeoutError) || currentAttempt > MAX_RETRY_ATTEMPTS) {\n          return throwError(() => new Error(error));\n        }\n\n        this.loggerService.logDebug(configId, `forceRefreshSession timeout. Attempt #${currentAttempt}`);\n\n        this.flowsDataService.resetSilentRenewRunning(configId);\n\n        return timer(currentAttempt * scalingDuration);\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { forkJoin, Observable, of, throwError } from 'rxjs';\nimport { catchError, switchMap } from 'rxjs/operators';\nimport { AuthStateService } from '../auth-state/auth-state.service';\nimport { OpenIdConfiguration } from '../config/openid-configuration';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { FlowsDataService } from '../flows/flows-data.service';\nimport { ResetAuthDataService } from '../flows/reset-auth-data.service';\nimport { RefreshSessionIframeService } from '../iframe/refresh-session-iframe.service';\nimport { LoggerService } from '../logging/logger.service';\nimport { EventTypes } from '../public-events/event-types';\nimport { PublicEventsService } from '../public-events/public-events.service';\nimport { StoragePersistenceService } from '../storage/storage-persistence.service';\nimport { UserService } from '../user-data/user.service';\nimport { FlowHelper } from '../utils/flowHelper/flow-helper.service';\nimport { IntervalService } from './interval.service';\nimport { RefreshSessionRefreshTokenService } from './refresh-session-refresh-token.service';\n\n@Injectable({ providedIn: 'root' })\nexport class PeriodicallyTokenCheckService {\n  constructor(\n    private resetAuthDataService: ResetAuthDataService,\n    private flowHelper: FlowHelper,\n    private configurationProvider: ConfigurationProvider,\n    private flowsDataService: FlowsDataService,\n    private loggerService: LoggerService,\n    private userService: UserService,\n    private authStateService: AuthStateService,\n    private refreshSessionIframeService: RefreshSessionIframeService,\n    private refreshSessionRefreshTokenService: RefreshSessionRefreshTokenService,\n    private intervalService: IntervalService,\n    private storagePersistenceService: StoragePersistenceService,\n    private publicEventsService: PublicEventsService\n  ) {}\n\n  startTokenValidationPeriodically(): void {\n    const configsWithSilentRenewEnabled = this.getConfigsWithSilentRenewEnabled();\n    if (configsWithSilentRenewEnabled.length <= 0) {\n      return;\n    }\n\n    const refreshTimeInSeconds = this.getSmallestRefreshTimeFromConfigs(configsWithSilentRenewEnabled);\n\n    if (!!this.intervalService.runTokenValidationRunning) {\n      return;\n    }\n\n    // START PERIODICALLY CHECK ONCE AND CHECK EACH CONFIG WHICH HAS IT ENABLED\n    const periodicallyCheck$ = this.intervalService.startPeriodicTokenCheck(refreshTimeInSeconds).pipe(\n      switchMap(() => {\n        const objectWithConfigIdsAndRefreshEvent = {};\n        configsWithSilentRenewEnabled.forEach(({ configId }) => {\n          objectWithConfigIdsAndRefreshEvent[configId] = this.getRefreshEvent(configId);\n        });\n\n        return forkJoin(objectWithConfigIdsAndRefreshEvent);\n      })\n    );\n\n    this.intervalService.runTokenValidationRunning = periodicallyCheck$.subscribe((objectWithConfigIds) => {\n      for (const [key, _] of Object.entries(objectWithConfigIds)) {\n        this.loggerService.logDebug(key, 'silent renew, periodic check finished!');\n\n        if (this.flowHelper.isCurrentFlowCodeFlowWithRefreshTokens(key)) {\n          this.flowsDataService.resetSilentRenewRunning(key);\n        }\n      }\n    });\n  }\n\n  private getRefreshEvent(configId: string): Observable<any> {\n    const shouldStartRefreshEvent = this.shouldStartPeriodicallyCheckForConfig(configId);\n\n    if (!shouldStartRefreshEvent) {\n      return of(null);\n    }\n\n    const refreshEvent$ = this.createRefreshEventForConfig(configId);\n\n    this.publicEventsService.fireEvent(EventTypes.SilentRenewStarted);\n\n    const refreshEventWithErrorHandler$ = refreshEvent$.pipe(\n      catchError((error) => {\n        this.loggerService.logError(configId, 'silent renew failed!', error);\n        this.flowsDataService.resetSilentRenewRunning(configId);\n\n        return throwError(() => new Error(error));\n      })\n    );\n\n    return refreshEventWithErrorHandler$;\n  }\n\n  private getSmallestRefreshTimeFromConfigs(configsWithSilentRenewEnabled: OpenIdConfiguration[]): number {\n    const result = configsWithSilentRenewEnabled.reduce((prev, curr) =>\n      prev.tokenRefreshInSeconds < curr.tokenRefreshInSeconds ? prev : curr\n    );\n\n    return result.tokenRefreshInSeconds;\n  }\n\n  private getConfigsWithSilentRenewEnabled(): OpenIdConfiguration[] {\n    return this.configurationProvider.getAllConfigurations().filter((x) => x.silentRenew);\n  }\n\n  private createRefreshEventForConfig(configId: string): Observable<any> {\n    this.loggerService.logDebug(configId, 'starting silent renew...');\n\n    const config = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!config?.silentRenew) {\n      this.resetAuthDataService.resetAuthorizationData(configId);\n\n      return of(null);\n    }\n\n    this.flowsDataService.setSilentRenewRunning(configId);\n\n    if (this.flowHelper.isCurrentFlowCodeFlowWithRefreshTokens(configId)) {\n      // Retrieve Dynamically Set Custom Params for refresh body\n      const customParamsRefresh: { [key: string]: string | number | boolean } =\n        this.storagePersistenceService.read('storageCustomParamsRefresh', configId) || {};\n\n      const { customParamsRefreshTokenRequest } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n      const mergedParams = { ...customParamsRefreshTokenRequest, ...customParamsRefresh };\n\n      // Refresh Session using Refresh tokens\n      return this.refreshSessionRefreshTokenService.refreshSessionWithRefreshTokens(configId, mergedParams);\n    }\n\n    // Retrieve Dynamically Set Custom Params\n    const customParams: { [key: string]: string | number | boolean } = this.storagePersistenceService.read(\n      'storageCustomParamsAuthRequest',\n      configId\n    );\n\n    return this.refreshSessionIframeService.refreshSessionWithIframe(configId, customParams);\n  }\n\n  private shouldStartPeriodicallyCheckForConfig(configId: string): boolean {\n    const idToken = this.authStateService.getIdToken(configId);\n    const isSilentRenewRunning = this.flowsDataService.isSilentRenewRunning(configId);\n    const userDataFromStore = this.userService.getUserDataFromStore(configId);\n\n    this.loggerService.logDebug(\n      configId,\n      `Checking: silentRenewRunning: ${isSilentRenewRunning} - has idToken: ${!!idToken} - has userData: ${!!userDataFromStore}`\n    );\n\n    const shouldBeExecuted = !!userDataFromStore && !isSilentRenewRunning && !!idToken;\n\n    if (!shouldBeExecuted) {\n      return false;\n    }\n\n    const idTokenStillValid = this.authStateService.hasIdTokenExpiredAndRenewCheckIsEnabled(configId);\n    const accessTokenHasExpired = this.authStateService.hasAccessTokenExpiredIfExpiryExists(configId);\n\n    if (!idTokenStillValid && !accessTokenHasExpired) {\n      return false;\n    }\n\n    return true;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\nimport { PopupOptions } from './popup-options';\nimport { PopupResult } from './popup-result';\n\n@Injectable({ providedIn: 'root' })\nexport class PopUpService {\n  private STORAGE_IDENTIFIER = 'popupauth';\n  private popUp: Window;\n  private handle: number;\n  private resultInternal$ = new Subject<PopupResult>();\n\n  get result$(): Observable<PopupResult> {\n    return this.resultInternal$.asObservable();\n  }\n\n  isCurrentlyInPopup(): boolean {\n    if (this.canAccessSessionStorage()) {\n      const popup = sessionStorage.getItem(this.STORAGE_IDENTIFIER);\n\n      return !!window.opener && window.opener !== window && !!popup;\n    }\n\n    return false;\n  }\n\n  openPopUp(url: string, popupOptions?: PopupOptions): void {\n    const optionsToPass = this.getOptions(popupOptions);\n    this.popUp = window.open(url, '_blank', optionsToPass);\n    this.popUp.sessionStorage.setItem(this.STORAGE_IDENTIFIER, 'true');\n\n    const listener = (event: MessageEvent): void => {\n      if (!event?.data || typeof event.data !== 'string') {\n        return;\n      }\n\n      this.resultInternal$.next({ userClosed: false, receivedUrl: event.data });\n\n      this.cleanUp(listener);\n    };\n\n    window.addEventListener('message', listener, false);\n\n    this.handle = window.setInterval(() => {\n      if (this.popUp.closed) {\n        this.resultInternal$.next({ userClosed: true });\n\n        this.cleanUp(listener);\n      }\n    }, 200);\n  }\n\n  sendMessageToMainWindow(url: string): void {\n    if (window.opener) {\n      this.sendMessage(url, window.location.href);\n    }\n  }\n\n  private cleanUp(listener: any): void {\n    window.removeEventListener('message', listener, false);\n\n    window.clearInterval(this.handle);\n\n    if (this.popUp) {\n      this.popUp.sessionStorage?.removeItem(this.STORAGE_IDENTIFIER);\n      this.popUp.close();\n      this.popUp = null;\n    }\n  }\n\n  private sendMessage(url: string, href: string): void {\n    window.opener.postMessage(url, href);\n  }\n\n  private getOptions(popupOptions?: PopupOptions): string {\n    const popupDefaultOptions: PopupOptions = { width: 500, height: 500, left: 50, top: 50 };\n\n    const options: PopupOptions = { ...popupDefaultOptions, ...(popupOptions || {}) };\n    const left: number = window.screenLeft + (window.outerWidth - options.width) / 2;\n    const top: number = window.screenTop + (window.outerHeight - options.height) / 2;\n    options.left = left;\n    options.top = top;\n\n    return Object.entries(options)\n      .map(([key, value]) => `${encodeURIComponent(key)}=${encodeURIComponent(value)}`)\n      .join(',');\n  }\n\n  private canAccessSessionStorage(): boolean {\n    return typeof navigator !== 'undefined' && navigator.cookieEnabled && typeof Storage !== 'undefined';\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { forkJoin, Observable, of, throwError } from 'rxjs';\nimport { catchError, map, switchMap, tap } from 'rxjs/operators';\nimport { AuthStateService } from './auth-state/auth-state.service';\nimport { AutoLoginService } from './auto-login/auto-login.service';\nimport { CallbackService } from './callback/callback.service';\nimport { PeriodicallyTokenCheckService } from './callback/periodically-token-check.service';\nimport { RefreshSessionService } from './callback/refresh-session.service';\nimport { OpenIdConfiguration } from './config/openid-configuration';\nimport { ConfigurationProvider } from './config/provider/config.provider';\nimport { CheckSessionService } from './iframe/check-session.service';\nimport { SilentRenewService } from './iframe/silent-renew.service';\nimport { LoggerService } from './logging/logger.service';\nimport { LoginResponse } from './login/login-response';\nimport { PopUpService } from './login/popup/popup.service';\nimport { StoragePersistenceService } from './storage/storage-persistence.service';\nimport { UserService } from './user-data/user.service';\nimport { CurrentUrlService } from './utils/url/current-url.service';\n\n@Injectable()\nexport class CheckAuthService {\n  constructor(\n    private checkSessionService: CheckSessionService,\n    private currentUrlService: CurrentUrlService,\n    private silentRenewService: SilentRenewService,\n    private userService: UserService,\n    private loggerService: LoggerService,\n    private configurationProvider: ConfigurationProvider,\n    private authStateService: AuthStateService,\n    private callbackService: CallbackService,\n    private refreshSessionService: RefreshSessionService,\n    private periodicallyTokenCheckService: PeriodicallyTokenCheckService,\n    private popupService: PopUpService,\n    private autoLoginService: AutoLoginService,\n    private storagePersistenceService: StoragePersistenceService\n  ) {}\n\n  checkAuth(passedConfigId?: string, url?: string): Observable<LoginResponse> {\n    if (this.currentUrlService.currentUrlHasStateParam()) {\n      const stateParamFromUrl = this.currentUrlService.getStateParamFromCurrentUrl();\n      const config = this.getConfigurationWithUrlState(stateParamFromUrl);\n\n      if (!config) {\n        return throwError(() => new Error(`could not find matching config for state ${stateParamFromUrl}`));\n      }\n\n      return this.checkAuthWithConfig(config, url);\n    }\n\n    if (!!passedConfigId) {\n      const config = this.configurationProvider.getOpenIDConfiguration(passedConfigId);\n\n      return this.checkAuthWithConfig(config, url);\n    }\n\n    const onlyExistingConfig = this.configurationProvider.getOpenIDConfiguration();\n\n    return this.checkAuthWithConfig(onlyExistingConfig, url);\n  }\n\n  checkAuthMultiple(passedConfigId?: string, url?: string): Observable<LoginResponse[]> {\n    if (this.currentUrlService.currentUrlHasStateParam()) {\n      const stateParamFromUrl = this.currentUrlService.getStateParamFromCurrentUrl();\n      const config = this.getConfigurationWithUrlState(stateParamFromUrl);\n\n      if (!config) {\n        return throwError(() => new Error(`could not find matching config for state ${stateParamFromUrl}`));\n      }\n\n      return this.composeMultipleLoginResults(config, url);\n    }\n\n    if (!!passedConfigId) {\n      const config = this.configurationProvider.getOpenIDConfiguration(passedConfigId);\n\n      if (!config) {\n        return throwError(() => new Error(`could not find matching config for id ${passedConfigId}`));\n      }\n\n      return this.composeMultipleLoginResults(config, url);\n    }\n\n    const allConfigs = this.configurationProvider.getAllConfigurations();\n    const allChecks$ = allConfigs.map((x) => this.checkAuthWithConfig(x, url));\n\n    return forkJoin(allChecks$);\n  }\n\n  checkAuthIncludingServer(configId: string): Observable<LoginResponse> {\n    const config = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    return this.checkAuthWithConfig(config).pipe(\n      switchMap((loginResponse) => {\n        const { isAuthenticated } = loginResponse;\n\n        if (isAuthenticated) {\n          return of(loginResponse);\n        }\n\n        return this.refreshSessionService.forceRefreshSession(configId).pipe(\n          tap((loginResponseAfterRefreshSession) => {\n            if (loginResponseAfterRefreshSession?.isAuthenticated) {\n              this.startCheckSessionAndValidation(configId);\n            }\n          })\n        );\n      })\n    );\n  }\n\n  private checkAuthWithConfig(config: OpenIdConfiguration, url?: string): Observable<LoginResponse> {\n    const { configId, authority } = config;\n\n    if (!this.configurationProvider.hasAtLeastOneConfig()) {\n      const errorMessage = 'Please provide at least one configuration before setting up the module';\n      this.loggerService.logError(configId, errorMessage);\n\n      return of({ isAuthenticated: false, errorMessage, userData: null, idToken: null, accessToken: null, configId });\n    }\n\n    const currentUrl = url || this.currentUrlService.getCurrentUrl();\n\n    this.loggerService.logDebug(configId, `Working with config '${configId}' using ${authority}`);\n\n    if (this.popupService.isCurrentlyInPopup()) {\n      this.popupService.sendMessageToMainWindow(currentUrl);\n\n      return of(null);\n    }\n\n    const isCallback = this.callbackService.isCallback(currentUrl);\n\n    this.loggerService.logDebug(configId, 'currentUrl to check auth with: ', currentUrl);\n\n    const callback$ = isCallback ? this.callbackService.handleCallbackAndFireEvents(currentUrl, configId) : of(null);\n\n    return callback$.pipe(\n      map(() => {\n        const isAuthenticated = this.authStateService.areAuthStorageTokensValid(configId);\n        if (isAuthenticated) {\n          this.startCheckSessionAndValidation(configId);\n\n          if (!isCallback) {\n            this.authStateService.setAuthenticatedAndFireEvent();\n            this.userService.publishUserDataIfExists(configId);\n          }\n        }\n\n        this.loggerService.logDebug(configId, 'checkAuth completed - firing events now. isAuthenticated: ' + isAuthenticated);\n\n        return {\n          isAuthenticated,\n          userData: this.userService.getUserDataFromStore(configId),\n          accessToken: this.authStateService.getAccessToken(configId),\n          idToken: this.authStateService.getIdToken(configId),\n          configId,\n        };\n      }),\n      tap(({ isAuthenticated }) => {\n        if (isAuthenticated) {\n          this.autoLoginService.checkSavedRedirectRouteAndNavigate(configId);\n        }\n      }),\n      catchError(({ message }) => {\n        this.loggerService.logError(configId, message);\n\n        return of({ isAuthenticated: false, errorMessage: message, userData: null, idToken: null, accessToken: null, configId });\n      })\n    );\n  }\n\n  private startCheckSessionAndValidation(configId: string): void {\n    if (this.checkSessionService.isCheckSessionConfigured(configId)) {\n      this.checkSessionService.start(configId);\n    }\n\n    this.periodicallyTokenCheckService.startTokenValidationPeriodically();\n\n    if (this.silentRenewService.isSilentRenewConfigured(configId)) {\n      this.silentRenewService.getOrCreateIframe(configId);\n    }\n  }\n\n  private getConfigurationWithUrlState(stateFromUrl: string): OpenIdConfiguration {\n    const allConfigs = this.configurationProvider.getAllConfigurations();\n\n    for (const config of allConfigs) {\n      const storedState = this.storagePersistenceService.read('authStateControl', config.configId);\n\n      if (storedState === stateFromUrl) {\n        return config;\n      }\n    }\n\n    return null;\n  }\n\n  private composeMultipleLoginResults(activeConfig: OpenIdConfiguration, url?: string): Observable<LoginResponse[]> {\n    const allOtherConfigs = this.configurationProvider.getAllConfigurations().filter((x) => x.configId !== activeConfig.configId);\n\n    const currentConfigResult = this.checkAuthWithConfig(activeConfig, url);\n\n    const allOtherConfigResults = allOtherConfigs.map((config) => {\n      const { redirectUrl } = config;\n\n      return this.checkAuthWithConfig(config, redirectUrl);\n    });\n\n    return forkJoin([currentConfigResult, ...allOtherConfigResults]);\n  }\n}\n","import { LogLevel } from '../logging/log-level';\nimport { OpenIdConfiguration } from './openid-configuration';\n\nexport const DEFAULT_CONFIG: OpenIdConfiguration = {\n  authority: 'https://please_set',\n  authWellknownEndpointUrl: '',\n  authWellknownEndpoints: null,\n  redirectUrl: 'https://please_set',\n  clientId: 'please_set',\n  responseType: 'code',\n  scope: 'openid email profile',\n  hdParam: '',\n  postLogoutRedirectUri: 'https://please_set',\n  startCheckSession: false,\n  silentRenew: false,\n  silentRenewUrl: 'https://please_set',\n  silentRenewTimeoutInSeconds: 20,\n  renewTimeBeforeTokenExpiresInSeconds: 0,\n  useRefreshToken: false,\n  usePushedAuthorisationRequests: false,\n  ignoreNonceAfterRefresh: false,\n  postLoginRoute: '/',\n  forbiddenRoute: '/forbidden',\n  unauthorizedRoute: '/unauthorized',\n  autoUserInfo: true,\n  autoCleanStateAfterAuthentication: true,\n  triggerAuthorizationResultEvent: false,\n  logLevel: LogLevel.Warn,\n  issValidationOff: false,\n  historyCleanupOff: false,\n  maxIdTokenIatOffsetAllowedInSeconds: 120,\n  disableIatOffsetValidation: false,\n  storage: null,\n  customParamsAuthRequest: {},\n  customParamsRefreshTokenRequest: {},\n  customParamsEndSessionRequest: {},\n  customParamsCodeRequest: {},\n  eagerLoadAuthWellKnownEndpoints: true,\n  disableRefreshIdTokenAuthTimeValidation: false,\n  enableIdTokenExpiredValidationInRenew: true,\n  tokenRefreshInSeconds: 4,\n  refreshTokenRetryInSeconds: 3,\n  ngswBypass: false,\n};\n","import { OpenIdConfiguration } from '../openid-configuration';\n\nexport interface Rule {\n  validate(passedConfig: OpenIdConfiguration): RuleValidationResult;\n}\n\nexport interface RuleValidationResult {\n  result: boolean;\n  messages: string[];\n  level: Level;\n}\n\nexport const POSITIVE_VALIDATION_RESULT = {\n  result: true,\n  messages: [],\n  level: null,\n};\n\nexport type Level = 'warning' | 'error';\n","import { OpenIdConfiguration } from '../../openid-configuration';\nimport { POSITIVE_VALIDATION_RESULT, RuleValidationResult } from '../rule';\n\nexport const ensureAuthority = (passedConfig: OpenIdConfiguration): RuleValidationResult => {\n  if (!passedConfig.authority) {\n    return {\n      result: false,\n      messages: ['The authority URL MUST be provided in the configuration! '],\n      level: 'error',\n    };\n  }\n\n  return POSITIVE_VALIDATION_RESULT;\n};\n","import { OpenIdConfiguration } from '../../openid-configuration';\nimport { POSITIVE_VALIDATION_RESULT, RuleValidationResult } from '../rule';\n\nexport const ensureClientId = (passedConfig: OpenIdConfiguration): RuleValidationResult => {\n  if (!passedConfig.clientId) {\n    return {\n      result: false,\n      messages: ['The clientId is required and missing from your config!'],\n      level: 'error',\n    };\n  }\n\n  return POSITIVE_VALIDATION_RESULT;\n};\n","import { OpenIdConfiguration } from '../../openid-configuration';\nimport { POSITIVE_VALIDATION_RESULT, RuleValidationResult } from '../rule';\n\nconst createIdentifierToCheck = (passedConfig: OpenIdConfiguration): string => {\n  if (!passedConfig) {\n    return null;\n  }\n\n  const { authority, clientId, scope } = passedConfig;\n\n  return `${authority}${clientId}${scope}`;\n};\n\nconst arrayHasDuplicates = (array: string[]): boolean => new Set(array).size !== array.length;\n\nexport const ensureNoDuplicatedConfigsRule = (passedConfigs: OpenIdConfiguration[]): RuleValidationResult => {\n  const allIdentifiers = passedConfigs.map((x) => createIdentifierToCheck(x));\n\n  const someAreNull = allIdentifiers.some((x) => x === null);\n\n  if (someAreNull) {\n    return {\n      result: false,\n      messages: [`Please make sure you add an object with a 'config' property: ....({ config }) instead of ...(config)`],\n      level: 'error',\n    };\n  }\n\n  const hasDuplicates = arrayHasDuplicates(allIdentifiers);\n\n  if (hasDuplicates) {\n    return {\n      result: false,\n      messages: ['You added multiple configs with the same authority, clientId and scope'],\n      level: 'warning',\n    };\n  }\n\n  return POSITIVE_VALIDATION_RESULT;\n};\n","import { OpenIdConfiguration } from '../../openid-configuration';\nimport { POSITIVE_VALIDATION_RESULT, RuleValidationResult } from '../rule';\n\nexport const ensureRedirectRule = (passedConfig: OpenIdConfiguration): RuleValidationResult => {\n  if (!passedConfig.redirectUrl) {\n    return {\n      result: false,\n      messages: ['The redirectUrl is required and missing from your config'],\n      level: 'error',\n    };\n  }\n\n  return POSITIVE_VALIDATION_RESULT;\n};\n","import { OpenIdConfiguration } from '../../openid-configuration';\nimport { POSITIVE_VALIDATION_RESULT, RuleValidationResult } from '../rule';\n\nexport const ensureSilentRenewUrlWhenNoRefreshTokenUsed = (passedConfig: OpenIdConfiguration): RuleValidationResult => {\n  const usesSilentRenew = passedConfig.silentRenew;\n  const usesRefreshToken = passedConfig.useRefreshToken;\n  const hasSilentRenewUrl = passedConfig.silentRenewUrl;\n\n  if (usesSilentRenew && !usesRefreshToken && !hasSilentRenewUrl) {\n    return {\n      result: false,\n      messages: ['Please provide a silent renew URL if using renew and not refresh tokens'],\n      level: 'error',\n    };\n  }\n\n  return POSITIVE_VALIDATION_RESULT;\n};\n","import { OpenIdConfiguration } from '../../openid-configuration';\nimport { POSITIVE_VALIDATION_RESULT, RuleValidationResult } from '../rule';\n\nexport const useOfflineScopeWithSilentRenew = (passedConfig: OpenIdConfiguration): RuleValidationResult => {\n  const hasRefreshToken = passedConfig.useRefreshToken;\n  const hasSilentRenew = passedConfig.silentRenew;\n  const scope = passedConfig.scope || '';\n  const hasOfflineScope = scope.split(' ').includes('offline_access');\n\n  if (hasRefreshToken && hasSilentRenew && !hasOfflineScope) {\n    return {\n      result: false,\n      messages: ['When using silent renew and refresh tokens please set the `offline_access` scope'],\n      level: 'warning',\n    };\n  }\n\n  return POSITIVE_VALIDATION_RESULT;\n};\n","import { ensureAuthority } from './ensure-authority.rule';\nimport { ensureClientId } from './ensure-clientId.rule';\nimport { ensureNoDuplicatedConfigsRule } from './ensure-no-duplicated-configs.rule';\nimport { ensureRedirectRule } from './ensure-redirect-url.rule';\nimport { ensureSilentRenewUrlWhenNoRefreshTokenUsed } from './ensure-silentRenewUrl-with-no-refreshtokens.rule';\nimport { useOfflineScopeWithSilentRenew } from './use-offline-scope-with-silent-renew.rule';\n\nexport const allRules = [\n  ensureAuthority,\n  useOfflineScopeWithSilentRenew,\n  ensureRedirectRule,\n  ensureClientId,\n  ensureSilentRenewUrlWhenNoRefreshTokenUsed,\n];\n\nexport const allMultipleConfigRules = [ensureNoDuplicatedConfigsRule];\n","import { Injectable } from '@angular/core';\nimport { LoggerService } from '../../logging/logger.service';\nimport { OpenIdConfiguration } from '../openid-configuration';\nimport { Level, RuleValidationResult } from './rule';\nimport { allRules } from './rules';\nimport { allMultipleConfigRules } from './rules/index';\n\n@Injectable()\nexport class ConfigValidationService {\n  constructor(private loggerService: LoggerService) {}\n\n  validateConfigs(passedConfigs: OpenIdConfiguration[]): boolean {\n    return this.validateConfigsInternal(passedConfigs, allMultipleConfigRules);\n  }\n\n  validateConfig(passedConfig: OpenIdConfiguration): boolean {\n    return this.validateConfigInternal(passedConfig, allRules);\n  }\n\n  private validateConfigsInternal(passedConfigs: OpenIdConfiguration[], allRulesToUse: any[]): boolean {\n    const allValidationResults = allRulesToUse.map((rule) => rule(passedConfigs));\n\n    let overallErrorCount = 0;\n    passedConfigs.forEach((passedConfig) => {\n      const errorCount = this.processValidationResultsAndGetErrorCount(allValidationResults, passedConfig?.configId);\n      overallErrorCount += errorCount;\n    });\n\n    return overallErrorCount === 0;\n  }\n\n  private validateConfigInternal(passedConfig: OpenIdConfiguration, allRulesToUse: any[]): boolean {\n    const allValidationResults = allRulesToUse.map((rule) => rule(passedConfig));\n\n    const errorCount = this.processValidationResultsAndGetErrorCount(allValidationResults, passedConfig.configId);\n\n    return errorCount === 0;\n  }\n\n  private processValidationResultsAndGetErrorCount(allValidationResults: RuleValidationResult[], configId: string): number {\n    const allMessages = allValidationResults.filter((x) => x.messages.length > 0);\n\n    const allErrorMessages = this.getAllMessagesOfType('error', allMessages);\n    const allWarnings = this.getAllMessagesOfType('warning', allMessages);\n    allErrorMessages.forEach((message) => this.loggerService.logError(configId, message));\n    allWarnings.forEach((message) => this.loggerService.logWarning(configId, message));\n\n    return allErrorMessages.length;\n  }\n\n  private getAllMessagesOfType(type: Level, results: RuleValidationResult[]): string[] {\n    const allMessages = results.filter((x) => x.level === type).map((result) => result.messages);\n\n    return allMessages.reduce((acc, val) => acc.concat(val), []);\n  }\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\n\n@Injectable()\nexport class PlatformProvider {\n  get isBrowser(): boolean {\n    return isPlatformBrowser(this.platformId);\n  }\n\n  constructor(@Inject(PLATFORM_ID) private platformId: string) {}\n}\n","import { Injectable } from '@angular/core';\nimport { AbstractSecurityStorage } from './abstract-security-storage';\n\n@Injectable()\nexport class DefaultSessionStorageService implements AbstractSecurityStorage {\n  public read(key: string): any {\n    return sessionStorage.getItem(key);\n  }\n\n  public write(key: string, value: any): void {\n    sessionStorage.setItem(key, value);\n  }\n\n  public remove(key: string): void {\n    sessionStorage.removeItem(key);\n  }\n\n  public clear(): void {\n    sessionStorage.clear();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { forkJoin, Observable, of, throwError } from 'rxjs';\nimport { catchError, switchMap, tap } from 'rxjs/operators';\nimport { LoggerService } from '../logging/logger.service';\nimport { EventTypes } from '../public-events/event-types';\nimport { PublicEventsService } from '../public-events/public-events.service';\nimport { StoragePersistenceService } from '../storage/storage-persistence.service';\nimport { PlatformProvider } from '../utils/platform-provider/platform.provider';\nimport { DefaultSessionStorageService } from './../storage/default-sessionstorage.service';\nimport { AuthWellKnownService } from './auth-well-known/auth-well-known.service';\nimport { DEFAULT_CONFIG } from './default-config';\nimport { OpenIdConfiguration } from './openid-configuration';\nimport { ConfigurationProvider } from './provider/config.provider';\nimport { ConfigValidationService } from './validation/config-validation.service';\n\n@Injectable()\nexport class OidcConfigService {\n  constructor(\n    private loggerService: LoggerService,\n    private publicEventsService: PublicEventsService,\n    private configurationProvider: ConfigurationProvider,\n    private authWellKnownService: AuthWellKnownService,\n    private storagePersistenceService: StoragePersistenceService,\n    private configValidationService: ConfigValidationService,\n    private platformProvider: PlatformProvider,\n    private defaultSessionStorageService: DefaultSessionStorageService\n  ) {}\n\n  withConfigs(passedConfigs: OpenIdConfiguration[]): Observable<OpenIdConfiguration[]> {\n    if (!this.configValidationService.validateConfigs(passedConfigs)) {\n      return of(null);\n    }\n\n    this.createUniqueIds(passedConfigs);\n    const allHandleConfigs$ = passedConfigs.map((x) => this.handleConfig(x));\n\n    return forkJoin(allHandleConfigs$);\n  }\n\n  private createUniqueIds(passedConfigs: OpenIdConfiguration[]): void {\n    passedConfigs.forEach((config, index) => {\n      if (!config.configId) {\n        config.configId = `${index}-${config.clientId}`;\n      }\n    });\n  }\n\n  private handleConfig(passedConfig: OpenIdConfiguration): Observable<OpenIdConfiguration> {\n    if (!this.configValidationService.validateConfig(passedConfig)) {\n      this.loggerService.logError(passedConfig.configId, 'Validation of config rejected with errors. Config is NOT set.');\n\n      return of(null);\n    }\n\n    if (!passedConfig.authWellknownEndpointUrl) {\n      passedConfig.authWellknownEndpointUrl = passedConfig.authority;\n    }\n\n    const usedConfig = this.prepareConfig(passedConfig);\n    this.configurationProvider.setConfig(usedConfig);\n\n    const alreadyExistingAuthWellKnownEndpoints = this.storagePersistenceService.read('authWellKnownEndPoints', usedConfig.configId);\n    if (!!alreadyExistingAuthWellKnownEndpoints) {\n      usedConfig.authWellknownEndpoints = alreadyExistingAuthWellKnownEndpoints;\n      this.publicEventsService.fireEvent<OpenIdConfiguration>(EventTypes.ConfigLoaded, usedConfig);\n\n      return of(usedConfig);\n    }\n\n    const passedAuthWellKnownEndpoints = usedConfig.authWellknownEndpoints;\n\n    if (!!passedAuthWellKnownEndpoints) {\n      this.authWellKnownService.storeWellKnownEndpoints(usedConfig.configId, passedAuthWellKnownEndpoints);\n      usedConfig.authWellknownEndpoints = passedAuthWellKnownEndpoints;\n      this.publicEventsService.fireEvent<OpenIdConfiguration>(EventTypes.ConfigLoaded, usedConfig);\n\n      return of(usedConfig);\n    }\n\n    if (usedConfig.eagerLoadAuthWellKnownEndpoints) {\n      return this.authWellKnownService.getAuthWellKnownEndPoints(usedConfig.authWellknownEndpointUrl, usedConfig.configId).pipe(\n        catchError((error) => {\n          this.loggerService.logError(usedConfig.configId, 'Getting auth well known endpoints failed on start', error);\n\n          return throwError(() => new Error(error));\n        }),\n        tap((wellknownEndPoints) => {\n          usedConfig.authWellknownEndpoints = wellknownEndPoints;\n          this.publicEventsService.fireEvent<OpenIdConfiguration>(EventTypes.ConfigLoaded, usedConfig);\n        }),\n        switchMap(() => of(usedConfig))\n      );\n    } else {\n      this.publicEventsService.fireEvent<OpenIdConfiguration>(EventTypes.ConfigLoaded, usedConfig);\n\n      return of(usedConfig);\n    }\n  }\n\n  private prepareConfig(configuration: OpenIdConfiguration): OpenIdConfiguration {\n    const openIdConfigurationInternal = { ...DEFAULT_CONFIG, ...configuration };\n    this.setSpecialCases(openIdConfigurationInternal);\n    this.setStorage(openIdConfigurationInternal);\n\n    return openIdConfigurationInternal;\n  }\n\n  private setSpecialCases(currentConfig: OpenIdConfiguration): void {\n    if (!this.platformProvider.isBrowser) {\n      currentConfig.startCheckSession = false;\n      currentConfig.silentRenew = false;\n      currentConfig.useRefreshToken = false;\n      currentConfig.usePushedAuthorisationRequests = false;\n    }\n  }\n\n  private setStorage(currentConfig: OpenIdConfiguration): void {\n    if (currentConfig.storage) {\n      return;\n    }\n\n    if (this.hasBrowserStorage()) {\n      currentConfig.storage = this.defaultSessionStorageService;\n    } else {\n      currentConfig.storage = null;\n    }\n  }\n\n  private hasBrowserStorage(): boolean {\n    return typeof navigator !== 'undefined' && navigator.cookieEnabled && typeof Storage !== 'undefined';\n  }\n}\n","import { Provider } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { OpenIdConfiguration } from '../openid-configuration';\n\nexport class OpenIdConfigLoader {\n  loader?: Provider;\n}\n\nexport abstract class StsConfigLoader {\n  abstract loadConfigs(): Observable<OpenIdConfiguration>[];\n}\n\nexport class StsConfigStaticLoader implements StsConfigLoader {\n  constructor(private passedConfigs: OpenIdConfiguration | OpenIdConfiguration[]) {}\n\n  loadConfigs(): Observable<OpenIdConfiguration>[] {\n    if (Array.isArray(this.passedConfigs)) {\n      return this.passedConfigs.map((x) => of(x));\n    }\n\n    const singleStaticConfig$ = of(this.passedConfigs);\n\n    return [singleStaticConfig$];\n  }\n}\n\nexport class StsConfigHttpLoader implements StsConfigLoader {\n  constructor(private configs$: Observable<OpenIdConfiguration> | Observable<OpenIdConfiguration>[]) {}\n\n  loadConfigs(): Observable<OpenIdConfiguration>[] {\n    return Array.isArray(this.configs$) ? this.configs$ : [this.configs$];\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\n\n@Injectable()\nexport class ClosestMatchingRouteService {\n  constructor(private configProvider: ConfigurationProvider) {}\n\n  getConfigIdForClosestMatchingRoute(route: string): ClosestMatchingRouteResult {\n    const allConfiguredRoutes = this.getAllConfiguredRoutes();\n\n    for (const routesWithConfig of allConfiguredRoutes) {\n      const allRoutesForConfig = routesWithConfig.routes;\n\n      for (const configuredRoute of allRoutesForConfig) {\n        if (route.startsWith(configuredRoute)) {\n          return {\n            matchingRoute: configuredRoute,\n            matchingConfigId: routesWithConfig.configId,\n          };\n        }\n      }\n    }\n\n    return {\n      matchingRoute: null,\n      matchingConfigId: null,\n    };\n  }\n\n  private getAllConfiguredRoutes(): ConfiguredRoutesWithConfig[] {\n    const allConfigurations = this.configProvider.getAllConfigurations();\n\n    return allConfigurations.map((x) => ({ routes: x.secureRoutes, configId: x.configId }));\n  }\n}\n\nexport interface ConfiguredRoutesWithConfig {\n  routes: string[];\n  configId: string;\n}\n\nexport interface ClosestMatchingRouteResult {\n  matchingRoute: string;\n  matchingConfigId: string;\n}\n","import { Injectable } from '@angular/core';\nimport { LoggerService } from '../../logging/logger.service';\nimport { FlowHelper } from '../../utils/flowHelper/flow-helper.service';\n\n@Injectable()\nexport class ResponseTypeValidationService {\n  constructor(private loggerService: LoggerService, private flowHelper: FlowHelper) {}\n\n  hasConfigValidResponseType(configId: string): boolean {\n    if (this.flowHelper.isCurrentFlowAnyImplicitFlow(configId)) {\n      return true;\n    }\n\n    if (this.flowHelper.isCurrentFlowCodeFlow(configId)) {\n      return true;\n    }\n\n    this.loggerService.logWarning(configId, 'module configured incorrectly, invalid response_type. Check the responseType in the config');\n\n    return false;\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable } from '@angular/core';\n\n@Injectable({ providedIn: 'root' })\nexport class RedirectService {\n  constructor(@Inject(DOCUMENT) private readonly doc: any) {}\n\n  redirectTo(url): void {\n    this.doc.location.href = url;\n  }\n}\n","import { HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, map, retry } from 'rxjs/operators';\nimport { DataService } from '../../api/data.service';\nimport { LoggerService } from '../../logging/logger.service';\nimport { StoragePersistenceService } from '../../storage/storage-persistence.service';\nimport { UrlService } from '../../utils/url/url.service';\nimport { ParResponse } from './par-response';\n\n@Injectable()\nexport class ParService {\n  constructor(\n    private loggerService: LoggerService,\n    private urlService: UrlService,\n    private dataService: DataService,\n    private storagePersistenceService: StoragePersistenceService\n  ) {}\n\n  postParRequest(configId: string, customParams?: { [key: string]: string | number | boolean }): Observable<ParResponse> {\n    let headers: HttpHeaders = new HttpHeaders();\n    headers = headers.set('Content-Type', 'application/x-www-form-urlencoded');\n\n    const authWellknownEndpoints = this.storagePersistenceService.read('authWellKnownEndPoints', configId);\n\n    if (!authWellknownEndpoints) {\n      return throwError(() => new Error('Could not read PAR endpoint because authWellKnownEndPoints are not given'));\n    }\n\n    const parEndpoint = authWellknownEndpoints.parEndpoint;\n    if (!parEndpoint) {\n      return throwError(() => new Error('Could not read PAR endpoint from authWellKnownEndpoints'));\n    }\n\n    const data = this.urlService.createBodyForParCodeFlowRequest(configId, customParams);\n\n    return this.dataService.post(parEndpoint, data, configId, headers).pipe(\n      retry(2),\n      map((response: any) => {\n        this.loggerService.logDebug(configId, 'par response: ', response);\n\n        return {\n          expiresIn: response.expires_in,\n          requestUri: response.request_uri,\n        };\n      }),\n      catchError((error) => {\n        const errorMessage = `There was an error on ParService postParRequest`;\n        this.loggerService.logError(configId, errorMessage, error);\n\n        return throwError(() => new Error(errorMessage));\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of, throwError } from 'rxjs';\nimport { switchMap, take } from 'rxjs/operators';\nimport { AuthOptions } from '../../auth-options';\nimport { CheckAuthService } from '../../check-auth.service';\nimport { AuthWellKnownService } from '../../config/auth-well-known/auth-well-known.service';\nimport { ConfigurationProvider } from '../../config/provider/config.provider';\nimport { LoggerService } from '../../logging/logger.service';\nimport { RedirectService } from '../../utils/redirect/redirect.service';\nimport { UrlService } from '../../utils/url/url.service';\nimport { LoginResponse } from '../login-response';\nimport { PopupOptions } from '../popup/popup-options';\nimport { PopupResultReceivedUrl } from '../popup/popup-result';\nimport { PopUpService } from '../popup/popup.service';\nimport { ResponseTypeValidationService } from '../response-type-validation/response-type-validation.service';\nimport { ParResponse } from './par-response';\nimport { ParService } from './par.service';\n\n@Injectable()\nexport class ParLoginService {\n  constructor(\n    private loggerService: LoggerService,\n    private responseTypeValidationService: ResponseTypeValidationService,\n    private urlService: UrlService,\n    private redirectService: RedirectService,\n    private configurationProvider: ConfigurationProvider,\n    private authWellKnownService: AuthWellKnownService,\n    private popupService: PopUpService,\n    private checkAuthService: CheckAuthService,\n    private parService: ParService\n  ) {}\n\n  loginPar(configId: string, authOptions?: AuthOptions): void {\n    if (!this.responseTypeValidationService.hasConfigValidResponseType(configId)) {\n      this.loggerService.logError(configId, 'Invalid response type!');\n\n      return;\n    }\n\n    const { authWellknownEndpointUrl } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!authWellknownEndpointUrl) {\n      this.loggerService.logError(configId, 'no authWellknownEndpoint given!');\n\n      return;\n    }\n\n    this.loggerService.logDebug(configId, 'BEGIN Authorize OIDC Flow, no auth data');\n\n    const { urlHandler, customParams } = authOptions || {};\n\n    this.authWellKnownService\n      .getAuthWellKnownEndPoints(authWellknownEndpointUrl, configId)\n      .pipe(switchMap(() => this.parService.postParRequest(configId, customParams)))\n      .subscribe((response) => {\n        this.loggerService.logDebug(configId, 'par response: ', response);\n\n        const url = this.urlService.getAuthorizeParUrl(response.requestUri, configId);\n\n        this.loggerService.logDebug(configId, 'par request url: ', url);\n\n        if (!url) {\n          this.loggerService.logError(configId, `Could not create URL with param ${response.requestUri}: '${url}'`);\n\n          return;\n        }\n\n        if (urlHandler) {\n          urlHandler(url);\n        } else {\n          this.redirectService.redirectTo(url);\n        }\n      });\n  }\n\n  loginWithPopUpPar(configId: string, authOptions?: AuthOptions, popupOptions?: PopupOptions): Observable<LoginResponse> {\n    if (!this.responseTypeValidationService.hasConfigValidResponseType(configId)) {\n      const errorMessage = 'Invalid response type!';\n      this.loggerService.logError(configId, errorMessage);\n\n      return throwError(() => new Error(errorMessage));\n    }\n\n    const { authWellknownEndpointUrl } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!authWellknownEndpointUrl) {\n      const errorMessage = 'no authWellknownEndpoint given!';\n      this.loggerService.logError(configId, errorMessage);\n\n      return throwError(() => new Error(errorMessage));\n    }\n\n    this.loggerService.logDebug(configId, 'BEGIN Authorize OIDC Flow with popup, no auth data');\n\n    const { customParams } = authOptions || {};\n\n    return this.authWellKnownService.getAuthWellKnownEndPoints(authWellknownEndpointUrl, configId).pipe(\n      switchMap(() => this.parService.postParRequest(configId, customParams)),\n      switchMap((response: ParResponse) => {\n        this.loggerService.logDebug(configId, 'par response: ', response);\n\n        const url = this.urlService.getAuthorizeParUrl(response.requestUri, configId);\n\n        this.loggerService.logDebug(configId, 'par request url: ', url);\n\n        if (!url) {\n          const errorMessage = `Could not create URL with param ${response.requestUri}: 'url'`;\n          this.loggerService.logError(configId, errorMessage);\n\n          return throwError(() => new Error(errorMessage));\n        }\n\n        this.popupService.openPopUp(url, popupOptions);\n\n        return this.popupService.result$.pipe(\n          take(1),\n          switchMap((result: PopupResultReceivedUrl) => {\n            const { userClosed, receivedUrl } = result;\n\n            if (userClosed) {\n              return of({\n                isAuthenticated: false,\n                errorMessage: 'User closed popup',\n                userData: null,\n                idToken: null,\n                accessToken: null,\n                configId,\n              });\n            }\n\n            return this.checkAuthService.checkAuth(configId, receivedUrl);\n          })\n        );\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of, throwError } from 'rxjs';\nimport { switchMap, take } from 'rxjs/operators';\nimport { AuthOptions } from '../../auth-options';\nimport { CheckAuthService } from '../../check-auth.service';\nimport { AuthWellKnownService } from '../../config/auth-well-known/auth-well-known.service';\nimport { ConfigurationProvider } from '../../config/provider/config.provider';\nimport { LoggerService } from '../../logging/logger.service';\nimport { UrlService } from '../../utils/url/url.service';\nimport { LoginResponse } from '../login-response';\nimport { PopupOptions } from '../popup/popup-options';\nimport { PopUpService } from '../popup/popup.service';\nimport { ResponseTypeValidationService } from '../response-type-validation/response-type-validation.service';\nimport { PopupResultReceivedUrl } from './popup-result';\n\n@Injectable()\nexport class PopUpLoginService {\n  constructor(\n    private loggerService: LoggerService,\n    private responseTypeValidationService: ResponseTypeValidationService,\n    private urlService: UrlService,\n    private configurationProvider: ConfigurationProvider,\n    private authWellKnownService: AuthWellKnownService,\n    private popupService: PopUpService,\n    private checkAuthService: CheckAuthService\n  ) {}\n\n  loginWithPopUpStandard(configId: string, authOptions?: AuthOptions, popupOptions?: PopupOptions): Observable<LoginResponse> {\n    if (!this.responseTypeValidationService.hasConfigValidResponseType(configId)) {\n      const errorMessage = 'Invalid response type!';\n      this.loggerService.logError(configId, errorMessage);\n\n      return throwError(() => new Error(errorMessage));\n    }\n\n    const { authWellknownEndpointUrl } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!authWellknownEndpointUrl) {\n      const errorMessage = 'no authWellknownEndpoint given!';\n      this.loggerService.logError(configId, errorMessage);\n\n      return throwError(() => new Error(errorMessage));\n    }\n\n    this.loggerService.logDebug(configId, 'BEGIN Authorize OIDC Flow with popup, no auth data');\n\n    return this.authWellKnownService.getAuthWellKnownEndPoints(authWellknownEndpointUrl, configId).pipe(\n      switchMap(() => {\n        const { customParams } = authOptions || {};\n\n        const authUrl = this.urlService.getAuthorizeUrl(configId, customParams);\n\n        this.popupService.openPopUp(authUrl, popupOptions);\n\n        return this.popupService.result$.pipe(\n          take(1),\n          switchMap((result: PopupResultReceivedUrl) => {\n            const { userClosed, receivedUrl } = result;\n\n            if (userClosed) {\n              return of({\n                isAuthenticated: false,\n                errorMessage: 'User closed popup',\n                userData: null,\n                idToken: null,\n                accessToken: null,\n                configId,\n              });\n            }\n\n            return this.checkAuthService.checkAuth(configId, receivedUrl);\n          })\n        );\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AuthOptions } from '../../auth-options';\nimport { AuthWellKnownService } from '../../config/auth-well-known/auth-well-known.service';\nimport { ConfigurationProvider } from '../../config/provider/config.provider';\nimport { LoggerService } from '../../logging/logger.service';\nimport { RedirectService } from '../../utils/redirect/redirect.service';\nimport { UrlService } from '../../utils/url/url.service';\nimport { ResponseTypeValidationService } from '../response-type-validation/response-type-validation.service';\n\n@Injectable()\nexport class StandardLoginService {\n  constructor(\n    private loggerService: LoggerService,\n    private responseTypeValidationService: ResponseTypeValidationService,\n    private urlService: UrlService,\n    private redirectService: RedirectService,\n    private configurationProvider: ConfigurationProvider,\n    private authWellKnownService: AuthWellKnownService\n  ) {}\n\n  loginStandard(configId: string, authOptions?: AuthOptions): void {\n    if (!this.responseTypeValidationService.hasConfigValidResponseType(configId)) {\n      this.loggerService.logError(configId, 'Invalid response type!');\n\n      return;\n    }\n\n    const { authWellknownEndpointUrl } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (!authWellknownEndpointUrl) {\n      this.loggerService.logError(configId, 'no authWellknownEndpoint given!');\n\n      return;\n    }\n\n    this.loggerService.logDebug(configId, 'BEGIN Authorize OIDC Flow, no auth data');\n\n    this.authWellKnownService.getAuthWellKnownEndPoints(authWellknownEndpointUrl, configId).subscribe(() => {\n      const { urlHandler, customParams } = authOptions || {};\n\n      const url = this.urlService.getAuthorizeUrl(configId, customParams);\n\n      if (!url) {\n        this.loggerService.logError(configId, 'Could not create URL', url);\n\n        return;\n      }\n\n      if (urlHandler) {\n        urlHandler(url);\n      } else {\n        this.redirectService.redirectTo(url);\n      }\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { AuthOptions } from '../auth-options';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { StoragePersistenceService } from '../storage/storage-persistence.service';\nimport { LoginResponse } from './login-response';\nimport { ParLoginService } from './par/par-login.service';\nimport { PopUpLoginService } from './popup/popup-login.service';\nimport { PopupOptions } from './popup/popup-options';\nimport { StandardLoginService } from './standard/standard-login.service';\n\n@Injectable()\nexport class LoginService {\n  constructor(\n    private configurationProvider: ConfigurationProvider,\n    private parLoginService: ParLoginService,\n    private popUpLoginService: PopUpLoginService,\n    private standardLoginService: StandardLoginService,\n    private storagePersistenceService: StoragePersistenceService\n  ) {}\n\n  login(configId: string, authOptions?: AuthOptions): void {\n    if (authOptions?.customParams) {\n      this.storagePersistenceService.write('storageCustomParamsAuthRequest', authOptions.customParams, configId);\n    }\n\n    const { usePushedAuthorisationRequests } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (usePushedAuthorisationRequests) {\n      return this.parLoginService.loginPar(configId, authOptions);\n    } else {\n      return this.standardLoginService.loginStandard(configId, authOptions);\n    }\n  }\n\n  loginWithPopUp(configId: string, authOptions?: AuthOptions, popupOptions?: PopupOptions): Observable<LoginResponse> {\n    if (authOptions?.customParams) {\n      this.storagePersistenceService.write('storageCustomParamsAuthRequest', authOptions.customParams, configId);\n    }\n\n    const { usePushedAuthorisationRequests } = this.configurationProvider.getOpenIDConfiguration(configId);\n\n    if (usePushedAuthorisationRequests) {\n      return this.parLoginService.loginWithPopUpPar(configId, authOptions, popupOptions);\n    } else {\n      return this.popUpLoginService.loginWithPopUpStandard(configId, authOptions, popupOptions);\n    }\n  }\n}\n","import { HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, of, throwError } from 'rxjs';\nimport { catchError, retry, switchMap, tap } from 'rxjs/operators';\nimport { DataService } from '../api/data.service';\nimport { AuthOptions } from '../auth-options';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { ResetAuthDataService } from '../flows/reset-auth-data.service';\nimport { CheckSessionService } from '../iframe/check-session.service';\nimport { LoggerService } from '../logging/logger.service';\nimport { StoragePersistenceService } from '../storage/storage-persistence.service';\nimport { RedirectService } from '../utils/redirect/redirect.service';\nimport { UrlService } from '../utils/url/url.service';\n\n@Injectable()\nexport class LogoffRevocationService {\n  constructor(\n    private dataService: DataService,\n    private storagePersistenceService: StoragePersistenceService,\n    private loggerService: LoggerService,\n    private urlService: UrlService,\n    private checkSessionService: CheckSessionService,\n    private resetAuthDataService: ResetAuthDataService,\n    private redirectService: RedirectService,\n    private configurationProvider: ConfigurationProvider\n  ) {}\n\n  // Logs out on the server and the local client.\n  // If the server state has changed, check session, then only a local logout.\n  logoff(configId: string, authOptions?: AuthOptions): void {\n    const { urlHandler, customParams } = authOptions || {};\n\n    this.loggerService.logDebug(configId, 'logoff, remove auth ');\n\n    const endSessionUrl = this.getEndSessionUrl(configId, customParams);\n\n    this.resetAuthDataService.resetAuthorizationData(configId);\n\n    if (!endSessionUrl) {\n      this.loggerService.logDebug(configId, 'only local login cleaned up, no end_session_endpoint');\n\n      return;\n    }\n\n    if (this.checkSessionService.serverStateChanged(configId)) {\n      this.loggerService.logDebug(configId, 'only local login cleaned up, server session has changed');\n    } else if (urlHandler) {\n      urlHandler(endSessionUrl);\n    } else {\n      this.redirectService.redirectTo(endSessionUrl);\n    }\n  }\n\n  logoffLocal(configId: string): void {\n    this.resetAuthDataService.resetAuthorizationData(configId);\n    this.checkSessionService.stop();\n  }\n\n  logoffLocalMultiple(): void {\n    const allConfigs = this.configurationProvider.getAllConfigurations();\n\n    allConfigs.forEach(({ configId }) => this.logoffLocal(configId));\n  }\n\n  // The refresh token and and the access token are revoked on the server. If the refresh token does not exist\n  // only the access token is revoked. Then the logout run.\n  logoffAndRevokeTokens(configId: string, authOptions?: AuthOptions): Observable<any> {\n    const { revocationEndpoint } = this.storagePersistenceService.read('authWellKnownEndPoints', configId) || {};\n\n    if (!revocationEndpoint) {\n      this.loggerService.logDebug(configId, 'revocation endpoint not supported');\n      this.logoff(configId, authOptions);\n    }\n\n    if (this.storagePersistenceService.getRefreshToken(configId)) {\n      return this.revokeRefreshToken(configId).pipe(\n        switchMap((result) => this.revokeAccessToken(configId, result)),\n        catchError((error) => {\n          const errorMessage = `revoke token failed`;\n          this.loggerService.logError(configId, errorMessage, error);\n\n          return throwError(() => new Error(errorMessage));\n        }),\n        tap(() => this.logoff(configId, authOptions))\n      );\n    } else {\n      return this.revokeAccessToken(configId).pipe(\n        catchError((error) => {\n          const errorMessage = `revoke accessToken failed`;\n          this.loggerService.logError(configId, errorMessage, error);\n\n          return throwError(() => new Error(errorMessage));\n        }),\n        tap(() => this.logoff(configId, authOptions))\n      );\n    }\n  }\n\n  // https://tools.ietf.org/html/rfc7009\n  // revokes an access token on the STS. If no token is provided, then the token from\n  // the storage is revoked. You can pass any token to revoke. This makes it possible to\n  // manage your own tokens. The is a public API.\n  revokeAccessToken(configId: string, accessToken?: any): Observable<any> {\n    const accessTok = accessToken || this.storagePersistenceService.getAccessToken(configId);\n    const body = this.urlService.createRevocationEndpointBodyAccessToken(accessTok, configId);\n\n    return this.sendRevokeRequest(configId, body);\n  }\n\n  // https://tools.ietf.org/html/rfc7009\n  // revokes an refresh token on the STS. This is only required in the code flow with refresh tokens.\n  // If no token is provided, then the token from the storage is revoked. You can pass any token to revoke.\n  // This makes it possible to manage your own tokens.\n  revokeRefreshToken(configId: string, refreshToken?: any): Observable<any> {\n    const refreshTok = refreshToken || this.storagePersistenceService.getRefreshToken(configId);\n    const body = this.urlService.createRevocationEndpointBodyRefreshToken(refreshTok, configId);\n\n    return this.sendRevokeRequest(configId, body);\n  }\n\n  getEndSessionUrl(configId: string, customParams?: { [p: string]: string | number | boolean }): string | null {\n    const idToken = this.storagePersistenceService.getIdToken(configId);\n    const { customParamsEndSessionRequest } = this.configurationProvider.getOpenIDConfiguration();\n\n    const mergedParams = { ...customParamsEndSessionRequest, ...customParams };\n\n    return this.urlService.createEndSessionUrl(idToken, configId, mergedParams);\n  }\n\n  private sendRevokeRequest(configId: string, body: string): Observable<any> {\n    const url = this.urlService.getRevocationEndpointUrl(configId);\n\n    let headers: HttpHeaders = new HttpHeaders();\n    headers = headers.set('Content-Type', 'application/x-www-form-urlencoded');\n\n    return this.dataService.post(url, body, configId, headers).pipe(\n      retry(2),\n      switchMap((response: any) => {\n        this.loggerService.logDebug(configId, 'revocation endpoint post response: ', response);\n\n        return of(response);\n      }),\n      catchError((error) => {\n        const errorMessage = `Revocation request failed`;\n        this.loggerService.logError(configId, errorMessage, error);\n\n        return throwError(() => new Error(errorMessage));\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { AuthOptions } from './auth-options';\nimport { AuthenticatedResult } from './auth-state/auth-result';\nimport { AuthStateService } from './auth-state/auth-state.service';\nimport { CallbackService } from './callback/callback.service';\nimport { RefreshSessionService } from './callback/refresh-session.service';\nimport { CheckAuthService } from './check-auth.service';\nimport { OpenIdConfiguration } from './config/openid-configuration';\nimport { ConfigurationProvider } from './config/provider/config.provider';\nimport { FlowsDataService } from './flows/flows-data.service';\nimport { CheckSessionService } from './iframe/check-session.service';\nimport { LoginResponse } from './login/login-response';\nimport { LoginService } from './login/login.service';\nimport { PopupOptions } from './login/popup/popup-options';\nimport { LogoffRevocationService } from './logoff-revoke/logoff-revocation.service';\nimport { UserService } from './user-data/user.service';\nimport { UserDataResult } from './user-data/userdata-result';\nimport { TokenHelperService } from './utils/tokenHelper/token-helper.service';\nimport { UrlService } from './utils/url/url.service';\n\n@Injectable()\nexport class OidcSecurityService {\n  /**\n   * Provides information about the user after they have logged in.\n   *\n   * @returns Returns an object containing either the user data directly (single config) or\n   * the user data per config in case you are running with multiple configs\n   */\n  get userData$(): Observable<UserDataResult> {\n    return this.userService.userData$;\n  }\n\n  /**\n   * Emits each time an authorization event occurs.\n   *\n   * @returns Returns an object containing if you are authenticated or not.\n   * Single Config: true if config is authenticated, false if not.\n   * Multiple Configs: true is all configs are authenticated, false if only one of them is not\n   *\n   * The `allConfigsAuthenticated` property contains the auth information _per config_.\n   */\n  get isAuthenticated$(): Observable<AuthenticatedResult> {\n    return this.authStateService.authenticated$;\n  }\n\n  /**\n   * Emits each time the server sends a CheckSession event and the value changed. This property will always return\n   * true.\n   */\n  get checkSessionChanged$(): Observable<boolean> {\n    return this.checkSessionService.checkSessionChanged$;\n  }\n\n  /**\n   * Emits on a Security Token Service callback. The observable will never contain a value.\n   */\n  get stsCallback$(): Observable<any> {\n    return this.callbackService.stsCallback$;\n  }\n\n  constructor(\n    private checkSessionService: CheckSessionService,\n    private checkAuthService: CheckAuthService,\n    private userService: UserService,\n    private tokenHelperService: TokenHelperService,\n    private configurationProvider: ConfigurationProvider,\n    private authStateService: AuthStateService,\n    private flowsDataService: FlowsDataService,\n    private callbackService: CallbackService,\n    private logoffRevocationService: LogoffRevocationService,\n    private loginService: LoginService,\n    private refreshSessionService: RefreshSessionService,\n    private urlService: UrlService\n  ) {}\n\n  /**\n   * Returns the currently active OpenID configurations.\n   *\n   * @returns an array of OpenIdConfigurations.\n   */\n  getConfigurations(): OpenIdConfiguration[] {\n    return this.configurationProvider.getAllConfigurations();\n  }\n\n  /**\n   * Returns a single active OpenIdConfiguration.\n   *\n   * @param configId The configId to identify the config. If not passed, the first one is being returned\n   */\n  getConfiguration(configId?: string): OpenIdConfiguration {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration().configId;\n\n    return this.configurationProvider.getOpenIDConfiguration(configId);\n  }\n\n  /**\n   * Returns the userData for a configuration\n   *\n   * @param configId The configId to identify the config. If not passed, the first one is being used\n   */\n  getUserData(configId?: string): any {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration().configId;\n\n    return this.userService.getUserDataFromStore(configId);\n  }\n\n  /**\n   * Starts the complete setup flow for one configuration. Calling will start the entire authentication flow, and the returned observable\n   * will denote whether the user was successfully authenticated including the user data, the access token, the configId and\n   * an error message in case an error happened\n   *\n   * @param url The URL to perform the authorization on the behalf of.\n   * @param configId The configId to perform the authorization on the behalf of. If not passed, the first configs will be taken\n   *\n   * @returns An object `LoginResponse` containing all information about the login\n   */\n  checkAuth(url?: string, configId?: string): Observable<LoginResponse> {\n    return this.checkAuthService.checkAuth(configId, url);\n  }\n\n  /**\n   * Starts the complete setup flow for multiple configurations.\n   * Calling will start the entire authentication flow, and the returned observable\n   * will denote whether the user was successfully authenticated including the user data, the access token, the configId and\n   * an error message in case an error happened in an array for each config which was provided\n   *\n   * @param url The URL to perform the authorization on the behalf of.\n   * @param configId The configId to perform the authorization on the behalf of. If not passed, all of the current\n   * configured ones will be used to check.\n   *\n   * @returns An array of `LoginResponse` objects containing all information about the logins\n   */\n  checkAuthMultiple(url?: string, configId?: string): Observable<LoginResponse[]> {\n    return this.checkAuthService.checkAuthMultiple(configId, url);\n  }\n\n  /**\n   * Provides information about the current authenticated state\n   *\n   * @param configId The configId to check the information for. If not passed, the first configs will be taken\n   *\n   * @returns A boolean whether the config is authenticated or not.\n   */\n  isAuthenticated(configId?: string): boolean {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.authStateService.isAuthenticated(configId);\n  }\n\n  /**\n   * Checks the server for an authenticated session using the iframe silent renew if not locally authenticated.\n   */\n  checkAuthIncludingServer(configId?: string): Observable<LoginResponse> {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.checkAuthService.checkAuthIncludingServer(configId);\n  }\n\n  /**\n   * Returns the access token for the login scenario.\n   *\n   * @param configId The configId to check the information for. If not passed, the first configs will be taken\n   *\n   * @returns A string with the access token.\n   */\n  getAccessToken(configId?: string): string {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.authStateService.getAccessToken(configId);\n  }\n\n  /**\n   * Returns the ID token for the sign-in.\n   *\n   * @param configId The configId to check the information for. If not passed, the first configs will be taken\n   *\n   * @returns A string with the id token.\n   */\n  getIdToken(configId?: string): string {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.authStateService.getIdToken(configId);\n  }\n\n  /**\n   * Returns the refresh token, if present, for the sign-in.\n   *\n   * @param configId The configId to check the information for. If not passed, the first configs will be taken\n   *\n   * @returns A string with the refresh token.\n   */\n  getRefreshToken(configId?: string): string {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.authStateService.getRefreshToken(configId);\n  }\n\n  /**\n   * Returns the authentication result, if present, for the sign-in.\n   *\n   * @param configId The configId to check the information for. If not passed, the first configs will be taken\n   *\n   * @returns A object with the authentication result\n   */\n  getAuthenticationResult(configId?: string): any {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.authStateService.getAuthenticationResult(configId);\n  }\n\n  /**\n   * Returns the payload from the ID token.\n   *\n   * @param encode Set to true if the payload is base64 encoded\n   * @param configId The configId to check the information for. If not passed, the first configs will be taken\n   *\n   * @returns The payload from the id token.\n   */\n  getPayloadFromIdToken(encode = false, configId?: string): any {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n    const token = this.authStateService.getIdToken(configId);\n\n    return this.tokenHelperService.getPayloadFromToken(token, encode, configId);\n  }\n\n  /**\n   * Sets a custom state for the authorize request.\n   *\n   * @param state The state to set.\n   * @param configId The configId to check the information for. If not passed, the first configs will be taken\n   */\n  setState(state: string, configId?: string): void {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    this.flowsDataService.setAuthStateControl(state, configId);\n  }\n\n  /**\n   * Gets the state value used for the authorize request.\n   *\n   * @param configId The configId to check the information for. If not passed, the first configs will be taken\n   *\n   * @returns The state value used for the authorize request.\n   */\n  getState(configId?: string): string {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.flowsDataService.getAuthStateControl(configId);\n  }\n\n  /**\n   * Redirects the user to the Security Token Service to begin the authentication process.\n   *\n   * @param configId The configId to perform the action in behalf of. If not passed, the first configs will be taken\n   * @param authOptions The custom options for the the authentication request.\n   */\n  authorize(configId?: string, authOptions?: AuthOptions): void {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    this.loginService.login(configId, authOptions);\n  }\n\n  /**\n   * Opens the Security Token Service in a new window to begin the authentication process.\n   *\n   * @param authOptions The custom options for the authentication request.\n   * @param popupOptions The configuration for the popup window.\n   * @param configId The configId to perform the action in behalf of. If not passed, the first configs will be taken\n   *\n   * @returns An `Observable<LoginResponse>` containing all information about the login\n   */\n  authorizeWithPopUp(authOptions?: AuthOptions, popupOptions?: PopupOptions, configId?: string): Observable<LoginResponse> {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.loginService.loginWithPopUp(configId, authOptions, popupOptions);\n  }\n\n  /**\n   * Manually refreshes the session.\n   *\n   * @param customParams Custom parameters to pass to the refresh request.\n   * @param configId The configId to perform the action in behalf of. If not passed, the first configs will be taken\n   *\n   * @returns An `Observable<LoginResponse>` containing all information about the login\n   */\n  forceRefreshSession(customParams?: { [key: string]: string | number | boolean }, configId?: string): Observable<LoginResponse> {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.refreshSessionService.userForceRefreshSession(configId, customParams);\n  }\n\n  /**\n   * Revokes the refresh token (if present) and the access token on the server and then performs the logoff operation.\n   * The refresh token and and the access token are revoked on the server. If the refresh token does not exist\n   * only the access token is revoked. Then the logout run.\n   *\n   * @param configId The configId to perform the action in behalf of. If not passed, the first configs will be taken\n   * @param authOptions The custom options for the request.\n   *\n   * @returns An observable when the action is finished\n   */\n  logoffAndRevokeTokens(configId?: string, authOptions?: AuthOptions): Observable<any> {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.logoffRevocationService.logoffAndRevokeTokens(configId, authOptions);\n  }\n\n  /**\n   * Logs out on the server and the local client. If the server state has changed, confirmed via check session,\n   * then only a local logout is performed.\n   *\n   * @param configId The configId to perform the action in behalf of. If not passed, the first configs will be taken\n   * @param authOptions with custom parameters and/or an custom url handler\n   */\n  logoff(configId?: string, authOptions?: AuthOptions): void {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.logoffRevocationService.logoff(configId, authOptions);\n  }\n\n  /**\n   * Logs the user out of the application without logging them out of the server.\n   * Use this method if you have _one_ config enabled.\n   *\n   * @param configId The configId to perform the action in behalf of. If not passed, the first configs will be taken\n   */\n  logoffLocal(configId?: string): void {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.logoffRevocationService.logoffLocal(configId);\n  }\n\n  /**\n   * Logs the user out of the application for all configs without logging them out of the server.\n   * Use this method if you have _multiple_ configs enabled.\n   */\n  logoffLocalMultiple(): void {\n    return this.logoffRevocationService.logoffLocalMultiple();\n  }\n\n  /**\n   * Revokes an access token on the Security Token Service. This is only required in the code flow with refresh tokens. If no token is\n   * provided, then the token from the storage is revoked. You can pass any token to revoke.\n   * https://tools.ietf.org/html/rfc7009\n   *\n   * @param accessToken The access token to revoke.\n   * @param configId The configId to perform the action in behalf of. If not passed, the first configs will be taken\n   *\n   * @returns An observable when the action is finished\n   */\n  revokeAccessToken(accessToken?: any, configId?: string): Observable<any> {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.logoffRevocationService.revokeAccessToken(configId, accessToken);\n  }\n\n  /**\n   * Revokes a refresh token on the Security Token Service. This is only required in the code flow with refresh tokens. If no token is\n   * provided, then the token from the storage is revoked. You can pass any token to revoke.\n   * https://tools.ietf.org/html/rfc7009\n   *\n   * @param refreshToken The access token to revoke.\n   * @param configId The configId to perform the action in behalf of. If not passed, the first configs will be taken\n   *\n   * @returns An observable when the action is finished\n   */\n  revokeRefreshToken(refreshToken?: any, configId?: string): Observable<any> {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.logoffRevocationService.revokeRefreshToken(configId, refreshToken);\n  }\n\n  /**\n   * Creates the end session URL which can be used to implement an alternate server logout.\n   *\n   * @param customParams\n   * @param configId The configId to perform the action in behalf of. If not passed, the first configs will be taken\n   *\n   * @returns A string with the end session url or null\n   */\n  getEndSessionUrl(customParams?: { [p: string]: string | number | boolean }, configId?: string): string | null {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.logoffRevocationService.getEndSessionUrl(configId, customParams);\n  }\n\n  /**\n   * Creates the authorize URL based on your flow\n   *\n   * @param customParams\n   * @param configId The configId to perform the action in behalf of. If not passed, the first configs will be taken\n   *\n   * @returns A string with the authorize URL or null\n   */\n  getAuthorizeUrl(customParams?: { [p: string]: string | number | boolean }, configId?: string): string | null {\n    configId = configId ?? this.configurationProvider.getOpenIDConfiguration(configId).configId;\n\n    return this.urlService.getAuthorizeUrl(configId, customParams);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { APP_INITIALIZER, InjectionToken, ModuleWithProviders, NgModule, Provider } from '@angular/core';\nimport { forkJoin, Observable } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { DataService } from './api/data.service';\nimport { HttpBaseService } from './api/http-base.service';\nimport { AuthStateService } from './auth-state/auth-state.service';\nimport { AutoLoginService } from './auto-login/auto-login.service';\nimport { ImplicitFlowCallbackService } from './callback/implicit-flow-callback.service';\nimport { CheckAuthService } from './check-auth.service';\nimport { AuthWellKnownDataService } from './config/auth-well-known/auth-well-known-data.service';\nimport { AuthWellKnownService } from './config/auth-well-known/auth-well-known.service';\nimport { OidcConfigService } from './config/config.service';\nimport { StsConfigLoader, StsConfigStaticLoader } from './config/loader/config-loader';\nimport { OpenIdConfiguration } from './config/openid-configuration';\nimport { ConfigurationProvider } from './config/provider/config.provider';\nimport { ConfigValidationService } from './config/validation/config-validation.service';\nimport { CodeFlowCallbackHandlerService } from './flows/callback-handling/code-flow-callback-handler.service';\nimport { HistoryJwtKeysCallbackHandlerService } from './flows/callback-handling/history-jwt-keys-callback-handler.service';\nimport { ImplicitFlowCallbackHandlerService } from './flows/callback-handling/implicit-flow-callback-handler.service';\nimport { RefreshSessionCallbackHandlerService } from './flows/callback-handling/refresh-session-callback-handler.service';\nimport { RefreshTokenCallbackHandlerService } from './flows/callback-handling/refresh-token-callback-handler.service';\nimport { StateValidationCallbackHandlerService } from './flows/callback-handling/state-validation-callback-handler.service';\nimport { UserCallbackHandlerService } from './flows/callback-handling/user-callback-handler.service';\nimport { FlowsDataService } from './flows/flows-data.service';\nimport { FlowsService } from './flows/flows.service';\nimport { RandomService } from './flows/random/random.service';\nimport { ResetAuthDataService } from './flows/reset-auth-data.service';\nimport { SigninKeyDataService } from './flows/signin-key-data.service';\nimport { CheckSessionService } from './iframe/check-session.service';\nimport { IFrameService } from './iframe/existing-iframe.service';\nimport { SilentRenewService } from './iframe/silent-renew.service';\nimport { ClosestMatchingRouteService } from './interceptor/closest-matching-route.service';\nimport { LoggerService } from './logging/logger.service';\nimport { LoginService } from './login/login.service';\nimport { ParLoginService } from './login/par/par-login.service';\nimport { ParService } from './login/par/par.service';\nimport { PopUpLoginService } from './login/popup/popup-login.service';\nimport { ResponseTypeValidationService } from './login/response-type-validation/response-type-validation.service';\nimport { StandardLoginService } from './login/standard/standard-login.service';\nimport { LogoffRevocationService } from './logoff-revoke/logoff-revocation.service';\nimport { OidcSecurityService } from './oidc.security.service';\nimport { PublicEventsService } from './public-events/public-events.service';\nimport { BrowserStorageService } from './storage/browser-storage.service';\nimport { DefaultSessionStorageService } from './storage/default-sessionstorage.service';\nimport { StoragePersistenceService } from './storage/storage-persistence.service';\nimport { UserService } from './user-data/user.service';\nimport { EqualityService } from './utils/equality/equality.service';\nimport { FlowHelper } from './utils/flowHelper/flow-helper.service';\nimport { PlatformProvider } from './utils/platform-provider/platform.provider';\nimport { TokenHelperService } from './utils/tokenHelper/token-helper.service';\nimport { CurrentUrlService } from './utils/url/current-url.service';\nimport { UrlService } from './utils/url/url.service';\nimport { JsrsAsignReducedService } from './validation/jsrsasign-reduced.service';\nimport { StateValidationService } from './validation/state-validation.service';\nimport { TokenValidationService } from './validation/token-validation.service';\n\nexport interface PassedInitialConfig {\n  config?: OpenIdConfiguration | OpenIdConfiguration[];\n  loader?: Provider;\n  storage?: any;\n}\n\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nexport function createStaticLoader(passedConfig: PassedInitialConfig) {\n  return new StsConfigStaticLoader(passedConfig.config);\n}\n\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nexport function configurationProviderFactory(\n  oidcConfigService: OidcConfigService,\n  loader: StsConfigLoader\n): () => Observable<OpenIdConfiguration[]> {\n  const allConfigs$ = forkJoin(loader.loadConfigs());\n\n  const fn: () => Observable<OpenIdConfiguration[]> = () =>\n    allConfigs$.pipe(switchMap((configs) => oidcConfigService.withConfigs(configs)));\n\n  return fn;\n}\n\nexport const PASSED_CONFIG = new InjectionToken<PassedInitialConfig>('PASSED_CONFIG');\n\n@NgModule({\n  imports: [CommonModule, HttpClientModule],\n  declarations: [],\n  exports: [],\n})\nexport class AuthModule {\n  static forRoot(passedConfig: PassedInitialConfig): ModuleWithProviders<AuthModule> {\n    return {\n      ngModule: AuthModule,\n      providers: [\n        // Make the PASSED_CONFIG available through injection\n        { provide: PASSED_CONFIG, useValue: passedConfig },\n\n        // Create the loader: Either the one getting passed or a static one\n        passedConfig?.loader || { provide: StsConfigLoader, useFactory: createStaticLoader, deps: [PASSED_CONFIG] },\n\n        // Load the config when the app starts\n        {\n          provide: APP_INITIALIZER,\n          multi: true,\n          deps: [OidcConfigService, StsConfigLoader, PASSED_CONFIG],\n          useFactory: configurationProviderFactory,\n        },\n        OidcConfigService,\n        PublicEventsService,\n        FlowHelper,\n        ConfigurationProvider,\n        OidcSecurityService,\n        TokenValidationService,\n        PlatformProvider,\n        CheckSessionService,\n        FlowsDataService,\n        FlowsService,\n        SilentRenewService,\n        LogoffRevocationService,\n        UserService,\n        RandomService,\n        HttpBaseService,\n        UrlService,\n        AuthStateService,\n        SigninKeyDataService,\n        StoragePersistenceService,\n        TokenHelperService,\n        LoggerService,\n        IFrameService,\n        EqualityService,\n        LoginService,\n        ParService,\n        AuthWellKnownDataService,\n        AuthWellKnownService,\n        DataService,\n        StateValidationService,\n        ConfigValidationService,\n        CheckAuthService,\n        ResetAuthDataService,\n        ImplicitFlowCallbackService,\n        HistoryJwtKeysCallbackHandlerService,\n        ResponseTypeValidationService,\n        UserCallbackHandlerService,\n        StateValidationCallbackHandlerService,\n        RefreshSessionCallbackHandlerService,\n        RefreshTokenCallbackHandlerService,\n        CodeFlowCallbackHandlerService,\n        ImplicitFlowCallbackHandlerService,\n        ParLoginService,\n        PopUpLoginService,\n        StandardLoginService,\n        AutoLoginService,\n        JsrsAsignReducedService,\n        CurrentUrlService,\n        ClosestMatchingRouteService,\n        DefaultSessionStorageService,\n        BrowserStorageService,\n      ],\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  ActivatedRouteSnapshot,\n  CanActivate,\n  CanActivateChild,\n  CanLoad,\n  Route,\n  RouterStateSnapshot,\n  UrlSegment,\n  UrlTree,\n} from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { map, take } from 'rxjs/operators';\nimport { CheckAuthService } from '../check-auth.service';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { LoginService } from '../login/login.service';\nimport { AutoLoginService } from './auto-login.service';\n\n@Injectable({ providedIn: 'root' })\nexport class AutoLoginAllRoutesGuard implements CanActivate, CanActivateChild, CanLoad {\n  constructor(\n    private autoLoginService: AutoLoginService,\n    private checkAuthService: CheckAuthService,\n    private loginService: LoginService,\n    private configurationProvider: ConfigurationProvider\n  ) {}\n\n  canLoad(route: Route, segments: UrlSegment[]): Observable<boolean | UrlTree> {\n    const routeToRedirect = segments.join('/');\n\n    return this.checkAuth(routeToRedirect);\n  }\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean | UrlTree> {\n    return this.checkAuth(state.url);\n  }\n\n  canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean | UrlTree> {\n    return this.checkAuth(state.url);\n  }\n\n  private checkAuth(url: string): Observable<boolean> {\n    const configId = this.getId();\n\n    return this.checkAuthService.checkAuth().pipe(\n      take(1),\n      map(({ isAuthenticated }) => {\n        if (isAuthenticated) {\n          this.autoLoginService.checkSavedRedirectRouteAndNavigate(configId);\n        }\n\n        if (!isAuthenticated) {\n          this.autoLoginService.saveRedirectRoute(configId, url);\n          this.loginService.login(configId);\n        }\n\n        return isAuthenticated;\n      })\n    );\n  }\n\n  private getId(): string {\n    return this.configurationProvider.getOpenIDConfiguration().configId;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, CanActivateChild, CanLoad, Route, RouterStateSnapshot, UrlSegment } from '@angular/router';\nimport { AuthStateService } from '../auth-state/auth-state.service';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { LoginService } from '../login/login.service';\nimport { AutoLoginService } from './auto-login.service';\n\n@Injectable({ providedIn: 'root' })\nexport class AutoLoginPartialRoutesGuard implements CanActivate, CanActivateChild, CanLoad {\n  constructor(\n    private autoLoginService: AutoLoginService,\n    private authStateService: AuthStateService,\n    private loginService: LoginService,\n    private configurationProvider: ConfigurationProvider\n  ) {}\n\n  canLoad(route: Route, segments: UrlSegment[]): boolean {\n    const routeToRedirect = segments.join('/');\n\n    return this.checkAuth(routeToRedirect);\n  }\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\n    return this.checkAuth(state.url);\n  }\n\n  canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {\n    return this.checkAuth(state.url);\n  }\n\n  private checkAuth(url: string): boolean {\n    const configId = this.getId();\n\n    const isAuthenticated = this.authStateService.areAuthStorageTokensValid(configId);\n\n    if (isAuthenticated) {\n      this.autoLoginService.checkSavedRedirectRouteAndNavigate(configId);\n    }\n\n    if (!isAuthenticated) {\n      this.autoLoginService.saveRedirectRoute(configId, url);\n      this.loginService.login(configId);\n    }\n\n    return isAuthenticated;\n  }\n\n  private getId(): string {\n    return this.configurationProvider.getOpenIDConfiguration().configId;\n  }\n}\n","import { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { AuthStateService } from '../auth-state/auth-state.service';\nimport { ConfigurationProvider } from '../config/provider/config.provider';\nimport { LoggerService } from '../logging/logger.service';\nimport { ClosestMatchingRouteService } from './closest-matching-route.service';\n\n@Injectable()\nexport class AuthInterceptor implements HttpInterceptor {\n  constructor(\n    private authStateService: AuthStateService,\n    private configurationProvider: ConfigurationProvider,\n    private loggerService: LoggerService,\n    private closestMatchingRouteService: ClosestMatchingRouteService\n  ) {}\n\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    if (!this.configurationProvider.hasAtLeastOneConfig()) {\n      return next.handle(req);\n    }\n\n    const allConfigurations = this.configurationProvider.getAllConfigurations();\n    const allRoutesConfigured = allConfigurations.map((x) => x.secureRoutes || []);\n    const allRoutesConfiguredFlat = [].concat.apply([], allRoutesConfigured);\n\n    if (allRoutesConfiguredFlat.length === 0) {\n      const { configId } = allConfigurations[0];\n      this.loggerService.logDebug(configId, `No routes to check configured`);\n\n      return next.handle(req);\n    }\n\n    const { matchingConfigId, matchingRoute } = this.closestMatchingRouteService.getConfigIdForClosestMatchingRoute(req.url);\n\n    if (!matchingConfigId) {\n      const { configId } = allConfigurations[0];\n      this.loggerService.logDebug(configId, `Did not find any configured route for route ${req.url}`);\n\n      return next.handle(req);\n    }\n\n    this.loggerService.logDebug(matchingConfigId, `'${req.url}' matches configured route '${matchingRoute}'`);\n\n    const token = this.authStateService.getAccessToken(matchingConfigId);\n\n    if (!token) {\n      this.loggerService.logDebug(matchingConfigId, `Wanted to add token to ${req.url} but found no token: '${token}'`);\n\n      return next.handle(req);\n    }\n\n    this.loggerService.logDebug(matchingConfigId, `'${req.url}' matches configured route '${matchingRoute}', adding token`);\n    req = req.clone({\n      headers: req.headers.set('Authorization', 'Bearer ' + token),\n    });\n\n    return next.handle(req);\n  }\n}\n","import { Injectable } from '@angular/core';\n\n/**\n * Implement this class-interface to create a custom storage.\n */\n@Injectable()\nexport abstract class AbstractSecurityStorage {\n  /**\n   * This method must contain the logic to read the storage.\n   *\n   * @return The value of the given key\n   */\n  public abstract read(key: string): any;\n\n  /**\n   * This method must contain the logic to write the storage.\n   *\n   * @param key The key to write a value for\n   * @param value The value for the given key\n   */\n  public abstract write(key: string, value: any): void;\n\n  /**\n   * This method must contain the logic to remove an item from the storage.\n   *\n   * @param key The value for the key to be removed\n   */\n  public abstract remove(key: string): void;\n\n  /**\n   * This method must contain the logic to remove all items from the storage.\n   */\n  public abstract clear(): void;\n}\n","// Public classes.\n\nexport * from './auth-options';\nexport * from './auth-state/auth-result';\nexport * from './auth-state/auth-state';\nexport * from './auth.module';\nexport * from './auto-login/auto-login-all-routes.guard';\nexport * from './auto-login/auto-login-partial-routes.guard';\nexport * from './config/auth-well-known/auth-well-known-endpoints';\nexport * from './config/config.service';\nexport * from './config/loader/config-loader';\nexport * from './config/openid-configuration';\nexport * from './interceptor/auth.interceptor';\nexport * from './logging/log-level';\nexport * from './logging/logger.service';\nexport * from './login/login-response';\nexport * from './login/popup/popup-options';\nexport * from './login/popup/popup.service';\nexport * from './oidc.security.service';\nexport * from './public-events/event-types';\nexport * from './public-events/notification';\nexport * from './public-events/public-events.service';\nexport * from './storage/abstract-security-storage';\nexport * from './user-data/userdata-result';\nexport * from './utils/tokenHelper/token-helper.service';\nexport * from './validation/jwtkeys';\nexport * from './validation/state-validation-result';\nexport * from './validation/token-validation.service';\nexport * from './validation/validation-result';\n","/*\n * Public API Surface of angular-auth-oidc-client\n */\n\nexport * from './lib/angular-auth-oidc-client';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i1.HttpBaseService","i2.ConfigurationProvider","i1.ConfigurationProvider","i2.LoggerService","i1.BrowserStorageService","i1.LoggerService","i1.TokenHelperService","i3.JsrsAsignReducedService","i1.StoragePersistenceService","i3.PublicEventsService","i4.ConfigurationProvider","i5.TokenValidationService","i2.RandomService","i3.ConfigurationProvider","i4.LoggerService","i3.FlowsDataService","i4.FlowHelper","i5.StoragePersistenceService","i6.JsrsAsignReducedService","i1.UrlService","i3.TokenValidationService","i4.FlowsDataService","i5.ConfigurationProvider","i6.StoragePersistenceService","i7.DataService","i1.DataService","i2.StoragePersistenceService","i5.TokenHelperService","i6.FlowHelper","i7.ConfigurationProvider","i1.AuthStateService","i2.FlowsDataService","i3.UserService","i3.DataService","i3.AuthStateService","i5.SigninKeyDataService","i7.ResetAuthDataService","i5.UserService","i6.ResetAuthDataService","i2.TokenValidationService","i3.TokenHelperService","i6.EqualityService","i7.FlowHelper","i2.AuthStateService","i4.DataService","i1.CodeFlowCallbackHandlerService","i2.ImplicitFlowCallbackHandlerService","i3.HistoryJwtKeysCallbackHandlerService","i4.UserCallbackHandlerService","i5.StateValidationCallbackHandlerService","i6.RefreshSessionCallbackHandlerService","i7.RefreshTokenCallbackHandlerService","i1.FlowsService","i3","i5.IntervalService","i3.IFrameService","i4.PublicEventsService","i2.IFrameService","i3.FlowsService","i4.ResetAuthDataService","i5.FlowsDataService","i6.AuthStateService","i7.LoggerService","i8.FlowHelper","i9.ImplicitFlowCallbackService","i10.IntervalService","i3.IntervalService","i5","i2.FlowHelper","i3.ImplicitFlowCallbackService","i4.CodeFlowCallbackService","i1.PublicEventsService","i2.AuthWellKnownDataService","i3.StoragePersistenceService","i2.UrlService","i3.SilentRenewService","i2.ResetAuthDataService","i4.IntervalService","i1.FlowHelper","i5.SilentRenewService","i7.AuthWellKnownService","i8.RefreshSessionIframeService","i9.StoragePersistenceService","i10.RefreshSessionRefreshTokenService","i11.UserService","i1.ResetAuthDataService","i5.LoggerService","i6.UserService","i7.AuthStateService","i9.RefreshSessionRefreshTokenService","i11.StoragePersistenceService","i12.PublicEventsService","i1.CheckSessionService","i2.CurrentUrlService","i4.UserService","i6.ConfigurationProvider","i8.CallbackService","i9.RefreshSessionService","i10.PeriodicallyTokenCheckService","i11.PopUpService","i12.AutoLoginService","i13.StoragePersistenceService","i2.PublicEventsService","i4.AuthWellKnownService","i6.ConfigValidationService","i7.PlatformProvider","i8.DefaultSessionStorageService","i4.StoragePersistenceService","i2.ResponseTypeValidationService","i3.UrlService","i4.RedirectService","i6.AuthWellKnownService","i7.PopUpService","i8.CheckAuthService","i9.ParService","i5.AuthWellKnownService","i6.PopUpService","i7.CheckAuthService","i2.ParLoginService","i3.PopUpLoginService","i4.StandardLoginService","i3.LoggerService","i4.UrlService","i5.CheckSessionService","i7.RedirectService","i8.ConfigurationProvider","i2.CheckAuthService","i4.TokenHelperService","i7.FlowsDataService","i9.LogoffRevocationService","i10.LoginService","i11.RefreshSessionService","i12.UrlService","i1.AutoLoginService","i3.LoginService","i4.ClosestMatchingRouteService"],"mappings":"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"}